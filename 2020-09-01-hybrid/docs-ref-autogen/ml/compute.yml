### YamlMime:AzureCLIGroup
uid: az_ml_compute
name: az ml compute
extensionInformation: >-
  > [!Note]

  > This reference is part of the **ml** extension for the Azure CLI  (version 2.15.0 or higher).  The extension will automatically install the first time you run an **az ml compute** command.  [Learn more](https://docs.microsoft.com/en-us/cli/azure/azure-cli-extensions-overview) about extensions.
summary: Manage Azure ML compute resources.
description: Azure ML compute targets are designated compute resources where you can run your jobs for training or deploy your models for inference.
directCommands:
- uid: az_ml_compute_attach
  name: az ml compute attach
  summary: Attach an existing compute resource to a workspace.
  description: Kubernetes clusters and remote VMs can be attached as compute targets.
  syntax: >-
    az ml compute attach --resource-group
                         --workspace-name
                         [--admin-password]
                         [--admin-username]
                         [--file]
                         [--identity-type]
                         [--name]
                         [--namespace]
                         [--no-wait]
                         [--resource-id]
                         [--ssh-port]
                         [--ssh-private-key-file]
                         [--type]
                         [--user-assigned-identities]
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --admin-password
    summary: The administrator user password that can be used to SSH into the node(s).
    description: ''
  - name: --admin-username
    summary: Name of the administrator user account that can be used to SSH into the node(s).
    description: ''
  - name: --file -f
    summary: Local path to the YAML file containing the Azure ML compute specification.
    description: ''
  - name: --identity-type
    summary: 'The type of manged identity. Allowed values: SystemAssigned, UserAssigned.'
    description: ''
  - name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - name: --namespace
    summary: Namespace of a KubernetesCompute.
    description: ''
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-id
    summary: The fully qualified ID of the resource, including the resource name and resource type (Required if not specified in the yaml file).
    description: ''
  - name: --ssh-port
    summary: The port number that can be used to SSH into the node(s). If not specified, the default (port 22) will be used.
    description: ''
  - name: --ssh-private-key-file
    summary: The file containing the SSH private key of the administrator user account.
    description: ''
  - name: --type -t
    summary: 'The type of compute target. Allowed values: virtualmachine, Kubernetes.'
    description: ''
  - name: --user-assigned-identities -i
    summary: The user assigned identity's resource ID, required for --identity_type=UserAssigned.
    description: ''
- uid: az_ml_compute_create
  name: az ml compute create
  summary: Create a compute target.
  description: You can create an AmlCompute cluster, which is Azure ML's managed compute infrastructure, or a compute instance, which is a managed cloud-based workstation.
  syntax: >-
    az ml compute create --resource-group
                         --workspace-name
                         [--admin-password]
                         [--admin-username]
                         [--description]
                         [--file]
                         [--identity-type]
                         [--idle-time-before-scale-down]
                         [--max-instances]
                         [--min-instances]
                         [--name]
                         [--no-wait]
                         [--set]
                         [--size]
                         [--ssh-key-value]
                         [--ssh-public-access-enabled]
                         [--subnet]
                         [--tags]
                         [--tier]
                         [--type]
                         [--user-assigned-identities]
                         [--user-object-id]
                         [--user-tenant-id]
                         [--vnet-name]
  examples:
  - summary: Create a compute target from a YAML specification file
    syntax: az ml compute create --file compute.yml --resource-group my-resource-group --workspace-name my-workspace
  - summary: Create an AmlCompute target using command options
    syntax: az ml compute create --name nc6-cluster --size Standard_NC6 --min-instances 0 --max-instances 5 --type AmlCompute --resource-group my-resource-group --workspace-name my-workspace
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --admin-password
    summary: Password for the administrator user account if authentication type is 'Password'.
    description: ''
  - name: --admin-username
    summary: Name of the administrator user account that can be used to SSH into the node(s).
    description: ''
  - name: --description
    summary: Description of the compute target.
    description: ''
  - name: --file -f
    summary: 'Local path to the YAML file containing the Azure ML compute specification. The YAML reference docs for compute can be found at: https://aka.ms/ml-cli-v2-compute-aml-yaml-reference, https://aka.ms/ml-cli-v2-compute-aml-yaml-reference, https://aka.ms/ml-cli-v2-compute-vm-yaml-reference.'
    description: ''
  - name: --identity-type
    summary: 'The type of managed identity. Allowed values: SystemAssigned, UserAssigned.'
    description: ''
  - name: --idle-time-before-scale-down -d
    summary: 'Node idle time in seconds before scaling down the cluster. Default: 120.'
    description: ''
  - name: --max-instances
    summary: 'The maximum number of nodes to use on the cluster. Default: 4.'
    description: ''
  - name: --min-instances
    summary: 'The minimum number of nodes to use on the cluster. Default: 0.'
    description: ''
  - name: --name -n
    summary: Name of the compute target. Required if --file/-f is not provided.
    description: ''
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running-operation to finish. Default is False.
    description: ''
  - name: --set
    summary: 'Update an object by specifying a property path and value to set. Example: --set property1.property2=<value>.'
    description: ''
  - name: --size
    summary: 'VM size to use for the compute target. More details can be found here: https://aka.ms/azureml-vm-details.'
    description: ''
  - name: --ssh-key-value
    summary: SSH public key of the administrator user account.
    description: ''
  - name: --ssh-public-access-enabled -p
    summary: Indicates whether public SSH port is enabled.
    description: ''
  - name: --subnet
    summary: Name of the subnet. Can also reference a subnet in an existing vnet by ID instead of name. If subnet ID is specified then vnet-name will be ignored. Subnet ID can refer to a vnet/subnet in another RG by specifying the fully qualified subnet ID. Required when vnet name is specified.
    description: ''
  - name: --tags
    summary: Space-separated key-value pairs for the tags of the object.
    description: ''
  - name: --tier
    summary: 'VM priority tier. Allowed values: dedicated, low_priority.'
    description: ''
  - name: --type -t
    summary: 'The type of compute target. Required if --file/-f is not provided. Allowed values: AmlCompute, ComputeInstance.'
    description: ''
  - name: --user-assigned-identities -i
    summary: Use '[system]' to set a system assigned identity else input resource IDs separated by commas (ie <ResourceID1>,<ResourceID2>) to set user assigned identities.
    description: ''
  - name: --user-object-id
    summary: AAD object ID of the assigned user.
    description: ''
  - name: --user-tenant-id
    summary: AAD tenant ID of the assigned user.
    description: ''
  - name: --vnet-name
    summary: Name of the virtual network.
    description: ''
- uid: az_ml_compute_delete
  name: az ml compute delete
  summary: Delete a compute target.
  description: ''
  syntax: >-
    az ml compute delete --name
                         --resource-group
                         --workspace-name
                         [--no-wait]
                         [--yes]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running-operation to finish. Default is False.
    description: ''
  - name: --yes -y
    defaultValue: "False"
    summary: Do not prompt for confirmation.
    description: ''
- uid: az_ml_compute_detach
  name: az ml compute detach
  summary: Detach a previously attached compute resource from a workspace.
  description: ''
  syntax: >-
    az ml compute detach --name
                         --resource-group
                         --workspace-name
                         [--no-wait]
                         [--yes]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --yes -y
    defaultValue: "False"
    summary: Do not prompt for confirmation.
    description: ''
- uid: az_ml_compute_list
  name: az ml compute list
  summary: List the compute targets in a workspace.
  description: ''
  syntax: >-
    az ml compute list --resource-group
                       --workspace-name
                       [--max-results]
                       [--type]
  examples:
  - summary: List all the compute targets in a workspace using --query argument to execute a JMESPath query on the results of commands.
    syntax: az ml compute list --query "[].{Name:name}"  --output table --resource-group my-resource-group --workspace-name my-workspace
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --max-results -r
    summary: Max number of results to return.
    description: ''
  - name: --type
    summary: 'The type of compute target. Allowed values: AmlCompute, ComputeInstance, Kubernetes.'
    description: ''
- uid: az_ml_compute_list-nodes
  name: az ml compute list-nodes
  summary: List node details for a compute target. The only supported compute type for this command is AML compute.
  description: ''
  syntax: >-
    az ml compute list-nodes --name
                             --resource-group
                             --workspace-name
  examples:
  - summary: List node details for an AML compute target
    syntax: az ml compute list-nodes --name nc6-cluster --resource-group my-resource-group --workspace-name my-workspace
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
- uid: az_ml_compute_list-sizes
  name: az ml compute list-sizes
  summary: List the VM sizes available by location.
  description: ''
  syntax: >-
    az ml compute list-sizes --resource-group
                             --workspace-name
                             [--location]
                             [--type]
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --location -l
    summary: 'Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.'
    description: ''
  - name: --type -t
    summary: 'The type of compute target. Allowed values: AmlCompute, ComputeInstance.'
    description: ''
- uid: az_ml_compute_list-usage
  name: az ml compute list-usage
  summary: List the available usage resources for VMs.
  description: ''
  syntax: >-
    az ml compute list-usage --resource-group
                             --workspace-name
                             [--location]
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --location -l
    summary: Defaults to workspace location.
    description: ''
- uid: az_ml_compute_restart
  name: az ml compute restart
  summary: Restart a ComputeInstance target.
  description: --no-wait option is recommended.
  syntax: >-
    az ml compute restart --name
                          --resource-group
                          --workspace-name
                          [--no-wait]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running-operation to finish. Default is False.
    description: ''
- uid: az_ml_compute_show
  name: az ml compute show
  summary: Show details for a compute target.
  description: ''
  syntax: >-
    az ml compute show --name
                       --resource-group
                       --workspace-name
  examples:
  - summary: Show details for a compute target
    syntax: az ml compute show --name nc6-cluster --resource-group my-resource-group --workspace-name my-workspace
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
- uid: az_ml_compute_start
  name: az ml compute start
  summary: Start a ComputeInstance target.
  description: --no-wait option is recommended.
  syntax: >-
    az ml compute start --name
                        --resource-group
                        --workspace-name
                        [--no-wait]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running-operation to finish. Default is False.
    description: ''
- uid: az_ml_compute_stop
  name: az ml compute stop
  summary: Stop a ComputeInstance target.
  description: --no-wait option is recommended.
  syntax: >-
    az ml compute stop --name
                       --resource-group
                       --workspace-name
                       [--no-wait]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running-operation to finish. Default is False.
    description: ''
- uid: az_ml_compute_update
  name: az ml compute update
  summary: Update a compute target.
  description: The 'tags', 'max_instances', 'min_instances', 'idle_time_before_scale_down', 'identity_type', and 'user_assigned_identities' properties can be updated.
  syntax: >-
    az ml compute update --name
                         --resource-group
                         --workspace-name
                         [--add]
                         [--force-string]
                         [--identity-type]
                         [--idle-time-before-scale-down]
                         [--max-instances]
                         [--min-instances]
                         [--no-wait]
                         [--remove]
                         [--set]
                         [--user-assigned-identities]
  examples:
  - summary: Update the minimum number of nodes for an AmlCompute cluster
    syntax: az ml compute update --name nc6-cluster --min-instances 1 --resource-group my-resource-group --workspace-name my-workspace
  - summary: Update existing tags or add new tags for an AmlCompute cluster
    syntax: az ml compute update --name nc6-cluster --set tags.key1=value1 tags.key2=value2 --resource-group my-resource-group --workspace-name my-workspace
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the compute target (Required if not specified in the yaml file).
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --workspace-name -w
    summary: Name of the Azure ML workspace. You can configure the default group using `az configure --defaults workspace=<name>`.
    description: ''
  optionalParameters:
  - name: --add
    defaultValue: "[]"
    summary: 'Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.'
    description: ''
  - name: --force-string
    defaultValue: "False"
    summary: When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
    description: ''
  - name: --identity-type
    summary: 'The type of managed identity. Allowed values: SystemAssigned, UserAssigned.'
    description: ''
  - name: --idle-time-before-scale-down -d
    summary: 'Node idle time in seconds before scaling down the cluster. Default: 120.'
    description: ''
  - name: --max-instances
    summary: 'Maximum number of nodes to use. Default: 4.'
    description: ''
  - name: --min-instances
    summary: 'Minimum number of nodes to use. Default: 0.'
    description: ''
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running-operation to finish. Default is False.
    description: ''
  - name: --remove
    defaultValue: "[]"
    summary: 'Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.'
    description: ''
  - name: --set
    defaultValue: "[]"
    summary: 'Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.'
    description: ''
  - name: --user-assigned-identities -i
    summary: Use '[system]' to set a system assigned identity else input resource IDs separated by commas (ie <ResourceID1>,<ResourceID2>) to set user assigned identities.
    description: ''
commands:
- az_ml_compute_attach
- az_ml_compute_create
- az_ml_compute_delete
- az_ml_compute_detach
- az_ml_compute_list
- az_ml_compute_list-nodes
- az_ml_compute_list-sizes
- az_ml_compute_list-usage
- az_ml_compute_restart
- az_ml_compute_show
- az_ml_compute_start
- az_ml_compute_stop
- az_ml_compute_update
globalParameters:
- name: --debug
  summary: Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: Show this help message and exit.
- name: --only-show-errors
  summary: Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, table, tsv"
  summary: Output format.
- name: --query
  summary: JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: Increase logging verbosity. Use --debug for full debug logs.
metadata:
  description: Azure ML compute targets are designated compute resources where you can run your jobs for training or deploy your models for inference.
