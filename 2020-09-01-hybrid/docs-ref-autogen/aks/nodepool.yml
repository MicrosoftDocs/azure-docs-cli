### YamlMime:AzureCLIGroup
uid: az_aks_nodepool
name: az aks nodepool
importantNote: >-
  > [!NOTE]

  > This command group has commands that are defined in both Azure CLI and at least one extension. Install each extension to benefit from its extended capabilities. [Learn more](https://learn.microsoft.com/cli/azure/azure-cli-extensions-overview) about extensions.
summary: |-
  Commands to manage node pools in Kubernetes kubernetes cluster.
status: GA
sourceType: Core and Extension
directCommands:
- uid: az_aks_nodepool_add
  name: az aks nodepool add
  summary: |-
    Add a node pool to the managed Kubernetes cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool add --cluster-name
                        --name
                        --resource-group
                        [--aks-custom-headers]
                        [--allowed-host-ports]
                        [--asg-ids]
                        [--crg-id]
                        [--disable-windows-outbound-nat]
                        [--drain-timeout]
                        [--enable-cluster-autoscaler]
                        [--enable-encryption-at-host]
                        [--enable-fips-image]
                        [--enable-node-public-ip]
                        [--enable-secure-boot]
                        [--enable-ultra-ssd]
                        [--enable-vtpm]
                        [--eviction-policy {Deallocate, Delete}]
                        [--gpu-instance-profile {MIG1g, MIG2g, MIG3g, MIG4g, MIG7g}]
                        [--host-group-id]
                        [--kubelet-config]
                        [--kubernetes-version]
                        [--labels]
                        [--linux-os-config]
                        [--max-count]
                        [--max-pods]
                        [--max-surge]
                        [--min-count]
                        [--mode {System, User}]
                        [--no-wait]
                        [--node-count]
                        [--node-osdisk-size]
                        [--node-osdisk-type {Ephemeral, Managed}]
                        [--node-public-ip-prefix-id]
                        [--node-public-ip-tags]
                        [--node-soak-duration]
                        [--node-taints]
                        [--node-vm-size]
                        [--os-sku {AzureLinux, CBLMariner, Mariner, Ubuntu, Windows2019, Windows2022}]
                        [--os-type]
                        [--pod-subnet-id]
                        [--ppg]
                        [--priority {Regular, Spot}]
                        [--scale-down-mode {Deallocate, Delete}]
                        [--snapshot-id]
                        [--spot-max-price]
                        [--tags]
                        [--vnet-subnet-id]
                        [--zones]
  examples:
  - summary: |-
      Create a nodepool in an existing AKS cluster with ephemeral os enabled.
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --node-osdisk-type Ephemeral --node-osdisk-size 48
  - summary: |-
      Create a nodepool with EncryptionAtHost enabled.
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --enable-encryption-at-host
  - summary: |-
      Create a nodepool with UltraSSD enabled.
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --enable-ultra-ssd
  - summary: |-
      Create a nodepool cluster with a specific OS SKU
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --os-sku Ubuntu
  - summary: |-
      Create a nodepool with FIPS-enabled OS
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --enable-fips-image
  - summary: |-
      create a kubernetes cluster with a snapshot id.
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --kubernetes-version 1.20.9 --snapshot-id "/subscriptions/00000/resourceGroups/AnotherResourceGroup/providers/Microsoft.ContainerService/snapshots/mysnapshot1"
  - summary: |-
      create a nodepool in an existing AKS cluster with host group id
    syntax: az aks nodepool add -g MyResourceGroup -n MyNodePool --cluster-name MyMC --host-group-id /subscriptions/00000/resourceGroups/AnotherResourceGroup/providers/Microsoft.ContainerService/hostGroups/myHostGroup --node-vm-size VMSize
  - summary: |-
      create a nodepool with a Capacity Reservation Group(CRG) ID.
    syntax: az aks nodepool add -g MyResourceGroup -n MyNodePool --cluster-name MyMC --node-vm-size VMSize --crg-id "/subscriptions/SubID/resourceGroups/ResourceGroupName/providers/Microsoft.ContainerService/CapacityReservationGroups/MyCRGID"
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Comma-separated key-value pairs to specify custom headers.
  - name: --allowed-host-ports
    summary: |-
      Expose host ports on the node pool. When specified, format should be a space-separated list of ranges with protocol, eg. `80/TCP 443/TCP 4000-5000/TCP`.
  - name: --asg-ids
    summary: |-
      The IDs of the application security groups to which the node pool's network interface should belong. When specified, format should be a space-separated list of IDs.
  - name: --crg-id
    summary: |-
      The crg id used to associate the new nodepool with the existed Capacity Reservation Group resource.
  - name: --disable-windows-outbound-nat
    defaultValue: "False"
    summary: |-
      Disable Windows OutboundNAT on Windows agent node pool.
  - name: --drain-timeout
    summary: |-
      When nodes are drain how many minutes to wait for all pods to be evicted.
  - name: --enable-cluster-autoscaler -e
    defaultValue: "False"
    summary: |-
      Enable cluster autoscaler.
  - name: --enable-encryption-at-host
    defaultValue: "False"
    summary: |-
      Enable EncryptionAtHost, default value is false.
  - name: --enable-fips-image
    defaultValue: "False"
    summary: |-
      Use FIPS-enabled OS on agent nodes.
  - name: --enable-node-public-ip
    defaultValue: "False"
    summary: |-
      Enable VMSS node public IP.
  - name: --enable-secure-boot
    defaultValue: "False"
    summary: |-
      Enable Secure Boot on agent node pool. Must use VMSS agent pool type.
  - name: --enable-ultra-ssd
    defaultValue: "False"
    summary: |-
      Enable UltraSSD, default value is false.
  - name: --enable-vtpm
    defaultValue: "False"
    summary: |-
      Enable vTPM on agent node pool. Must use VMSS agent pool type.
  - name: --eviction-policy
    defaultValue: "Delete"
    parameterValueGroup: "Deallocate, Delete"
    summary: |-
      The eviction policy of the Spot node pool. It can only be set when --priority is Spot.
  - name: --gpu-instance-profile
    parameterValueGroup: "MIG1g, MIG2g, MIG3g, MIG4g, MIG7g"
    summary: |-
      GPU instance profile to partition multi-gpu Nvidia GPUs.
  - name: --host-group-id
    summary: |-
      The fully qualified dedicated host group id used to provision agent node pool.
  - name: --kubelet-config
    summary: |-
      Path to JSON file containing Kubelet configurations for agent nodes. https://aka.ms/aks/custom-node-config.
  - name: --kubernetes-version -k
    summary: |-
      Version of Kubernetes to use for creating the cluster, such as "1.16.9".
    valueFrom: '`az aks get-versions`'
  - name: --labels
    summary: |-
      The node labels for the node pool. See https://aka.ms/node-labels for syntax of labels.
  - name: --linux-os-config
    summary: |-
      Path to JSON file containing OS configurations for Linux agent nodes. https://aka.ms/aks/custom-node-config.
  - name: --max-count
    summary: |-
      Maximum nodes count used for autoscaler, when "--enable-cluster-autoscaler" specified. Please specify the value in the range of [0, 1000] for user nodepool, and [1,1000] for system nodepool.
  - name: --max-pods -m
    summary: |-
      The maximum number of pods deployable to a node.
    description: |-
      If not specified, defaults based on network-plugin. 30 for "azure", 110 for "kubenet", or 250 for "none".
  - name: --max-surge
    summary: |-
      Extra nodes used to speed upgrade. When specified, it represents the number or percent used, eg. 5 or 33%.
  - name: --min-count
    summary: |-
      Minimum nodes count used for autoscaler, when "--enable-cluster-autoscaler" specified. Please specify the value in the range of [0, 1000] for user nodepool, and [1,1000] for system nodepool.
  - name: --mode
    defaultValue: "User"
    parameterValueGroup: "System, User"
    summary: |-
      The mode for a node pool which defines a node pool's primary function. If set as "System", AKS prefers system pods scheduling to node pools with mode `System`. Learn more at https://aka.ms/aks/nodepool/mode.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --node-count -c
    defaultValue: "3"
    summary: |-
      Number of nodes in the Kubernetes agent pool. After creating a cluster, you can change the size of its node pool with `az aks scale`.
  - name: --node-osdisk-size
    summary: |-
      Size in GiB of the OS disk for each node in the agent pool. Minimum 30 GiB.
  - name: --node-osdisk-type
    parameterValueGroup: "Ephemeral, Managed"
    summary: |-
      OS disk type to be used for machines in a given agent pool. Defaults to 'Ephemeral' when possible in conjunction with VM size and OS disk size. May not be changed for this pool after creation. ('Ephemeral' or 'Managed').
  - name: --node-public-ip-prefix-id
    summary: |-
      Public IP prefix ID used to assign public IPs to VMSS nodes.
  - name: --node-public-ip-tags
    summary: |-
      The ipTags of the node public IPs.
  - name: --node-soak-duration
    summary: |-
      The amount of time (in minutes) to wait after draining a node and before reimaging it and moving on to next node.
  - name: --node-taints
    summary: |-
      The node taints for the node pool.
  - name: --node-vm-size -s
    summary: |-
      Size of Virtual Machines to create as Kubernetes nodes.
  - name: --os-sku
    parameterValueGroup: "AzureLinux, CBLMariner, Mariner, Ubuntu, Windows2019, Windows2022"
    summary: |-
      The OS SKU of the agent node pool. Ubuntu or CBLMariner for Linux. Windows2019 or Windows2022 for Windows.
  - name: --os-type
    summary: |-
      The OS Type. Linux or Windows.
  - name: --pod-subnet-id
    summary: |-
      The Resource Id of a subnet in an existing VNet into which to assign pods in the cluster (requires azure network-plugin).
  - name: --ppg
    summary: |-
      The ID of a PPG.
  - name: --priority
    defaultValue: "Regular"
    parameterValueGroup: "Regular, Spot"
    summary: |-
      The priority of the node pool.
  - name: --scale-down-mode
    defaultValue: "Delete"
    parameterValueGroup: "Deallocate, Delete"
    summary: |-
      Describe how VMs are added to or removed from nodepools.
  - name: --snapshot-id
    summary: |-
      The source snapshot id used to create this nodepool.
  - name: --spot-max-price
    defaultValue: "nan"
    summary: |-
      It can only be set when --priority is Spot. Specify the maximum price you are willing to pay in US Dollars. Possible values are any decimal value greater than zero or -1 which indicates default price to be up-to on-demand. It can only include up to 5 decimal places.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
  - name: --vnet-subnet-id
    summary: |-
      The Resource Id of a subnet in an existing VNet into which to deploy the cluster.
  - name: --zones -z
    summary: |-
      Availability zones where agent nodes will be placed. Also, to install agent nodes to more than one zone you need to pass zone numbers separated by blanks.  For example -  To have all 3 zones, you are expected to enter `--zones 1 2 3`.
- uid: az_aks_nodepool_add(aks-preview)
  name: az aks nodepool add
  extensionSuffix: aks-preview
  summary: |-
    Add a node pool to the managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool add --cluster-name
                        --name
                        --resource-group
                        [--aks-custom-headers]
                        [--allowed-host-ports]
                        [--asg-ids]
                        [--crg-id]
                        [--disable-windows-outbound-nat]
                        [--drain-timeout]
                        [--driver-type {CUDA, GRID}]
                        [--enable-artifact-streaming]
                        [--enable-cluster-autoscaler]
                        [--enable-custom-ca-trust]
                        [--enable-encryption-at-host]
                        [--enable-fips-image]
                        [--enable-node-public-ip]
                        [--enable-secure-boot]
                        [--enable-ultra-ssd]
                        [--enable-vtpm]
                        [--eviction-policy {Deallocate, Delete}]
                        [--gateway-prefix-size]
                        [--gpu-instance-profile {MIG1g, MIG2g, MIG3g, MIG4g, MIG7g}]
                        [--host-group-id]
                        [--if-match]
                        [--if-none-match]
                        [--kubelet-config]
                        [--kubernetes-version]
                        [--labels]
                        [--linux-os-config]
                        [--max-count]
                        [--max-pods]
                        [--max-surge]
                        [--message-of-the-day]
                        [--min-count]
                        [--mode {Gateway, System, User}]
                        [--no-wait]
                        [--node-count]
                        [--node-osdisk-size]
                        [--node-osdisk-type {Ephemeral, Managed}]
                        [--node-public-ip-prefix-id]
                        [--node-public-ip-tags]
                        [--node-soak-duration]
                        [--node-taints]
                        [--node-vm-size]
                        [--os-sku {AzureLinux, CBLMariner, Mariner, Ubuntu, Windows2019, Windows2022, WindowsAnnual}]
                        [--os-type]
                        [--pod-ip-allocation-mode {DynamicIndividual, StaticBlock}]
                        [--pod-subnet-id]
                        [--ppg]
                        [--priority {Regular, Spot}]
                        [--scale-down-mode {Deallocate, Delete}]
                        [--skip-gpu-driver-install]
                        [--snapshot-id]
                        [--spot-max-price]
                        [--ssh-access {disabled, localuser}]
                        [--tags]
                        [--undrainable-node-behavior]
                        [--vm-set-type]
                        [--vm-sizes]
                        [--vnet-subnet-id]
                        [--workload-runtime {KataCcIsolation, KataMshvVmIsolation, OCIContainer, WasmWasi}]
                        [--zones]
  examples:
  - summary: |-
      Create a nodepool in an existing AKS cluster with ephemeral os enabled.
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --node-osdisk-type Ephemeral --node-osdisk-size 48
  - summary: |-
      Create a nodepool with EncryptionAtHost enabled.
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --enable-encryption-at-host
  - summary: |-
      Create a nodepool with a specific os-sku
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster  --os-sku Ubuntu
  - summary: |-
      Create a nodepool which can run wasm workloads.
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster  --workload-runtime WasmWasi
  - summary: |-
      create a kubernetes cluster with a snapshot id.
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --kubernetes-version 1.20.9 --snapshot-id "/subscriptions/00000/resourceGroups/AnotherResourceGroup/providers/Microsoft.ContainerService/snapshots/mysnapshot1"
  - summary: |-
      create a nodepool with a Capacity Reservation Group(CRG) ID.
    syntax: az aks nodepool add -g MyResourceGroup -n MyNodePool --cluster-name MyMC --node-vm-size VMSize --crg-id "/subscriptions/SubID/resourceGroups/ResourceGroupName/providers/Microsoft.ContainerService/CapacityReservationGroups/MyCRGID"
  - summary: |-
      create a nodepool in an existing AKS cluster with host group id
    syntax: az aks nodepool add -g MyResourceGroup -n MyNodePool --cluster-name MyMC --host-group-id /subscriptions/00000/resourceGroups/AnotherResourceGroup/providers/Microsoft.ContainerService/hostGroups/myHostGroup --node-vm-size VMSize
  - summary: |-
      Create a nodepool with ip allocation mode set to "StaticBlock" and using a pod subnet ID
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster  --os-sku Ubuntu --pod-subnet-id /subscriptions/00000/resourceGroups/AnotherResourceGroup/providers/Microsoft.Network/virtualNetworks/MyVnet/subnets/MySubnet --pod-ip-allocation-mode StaticBlock
  - summary: |-
      Create a nodepool of type VirtualMachines
    syntax: az aks nodepool add -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster --vm-set-type VirtualMachines --vm-sizes "Standard_D4s_v3,Standard_D8s_v3" --node-count 3
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --allowed-host-ports
    summary: |-
      Expose host ports on the node pool. When specified, format should be a comma-separated list of ranges with protocol, eg. 80/TCP,443/TCP,4000-5000/TCP. Must use VMSS agent pool type.
    isPreview: true
  - name: --asg-ids
    summary: |-
      The IDs of the application security groups to which the node pool's network interface should belong. When specified, format should be a comma-separated list of IDs. Must use VMSS agent pool type.
    isPreview: true
  - name: --crg-id
    summary: |-
      The crg-id used to associate the new nodepool with the existed Capacity Reservation Group resource. Must use VMSS agent pool type.
    isPreview: true
  - name: --disable-windows-outbound-nat
    defaultValue: "False"
    summary: |-
      Disable Windows OutboundNAT on Windows agent node pool. Must use VMSS agent pool type.
  - name: --drain-timeout
    summary: |-
      When nodes are drain how many minutes to wait for all pods to be evicted.
  - name: --driver-type
    parameterValueGroup: "CUDA, GRID"
    summary: |-
      Specify the type of GPU driver to install when creating Windows agent pools. Valid values are "GRID" and "CUDA". If not provided, AKS selects the driver based on system compatibility. This option cannot be changed once the AgentPool has been created. The default is system selected.
    isPreview: true
  - name: --enable-artifact-streaming
    defaultValue: "False"
    summary: |-
      Enable artifact streaming for VirtualMachineScaleSets managed by a node pool, to speed up the cold-start of containers on a node through on-demand image loading. To use this feature, container images must also enable artifact streaming on ACR. If not specified, the default is false.
    isPreview: true
  - name: --enable-cluster-autoscaler -e
    defaultValue: "False"
    summary: |-
      Enable cluster autoscaler. Must use VMSS agent pool type.
  - name: --enable-custom-ca-trust
    defaultValue: "False"
    summary: |-
      Enable Custom CA Trust on agent node pool.
  - name: --enable-encryption-at-host
    defaultValue: "False"
    summary: |-
      Enable EncryptionAtHost on agent node pool.
  - name: --enable-fips-image
    defaultValue: "False"
    summary: |-
      Use FIPS-enabled OS on agent nodes.
  - name: --enable-node-public-ip
    defaultValue: "False"
    summary: |-
      Enable VMSS node public IP. Must use VMSS agent pool type.
  - name: --enable-secure-boot
    defaultValue: "False"
    summary: |-
      Enable Secure Boot on agent node pool. Must use VMSS agent pool type.
    isPreview: true
  - name: --enable-ultra-ssd
    defaultValue: "False"
    summary: |-
      Enable UltraSSD on agent node pool. Must use VMSS agent pool type.
  - name: --enable-vtpm
    defaultValue: "False"
    summary: |-
      Enable vTPM on agent node pool. Must use VMSS agent pool type.
    isPreview: true
  - name: --eviction-policy
    defaultValue: "Delete"
    parameterValueGroup: "Deallocate, Delete"
    summary: |-
      The eviction policy of the Spot node pool. It can only be set when --priority is Spot.
  - name: --gateway-prefix-size
    summary: |-
      The size of Public IPPrefix attached to the Gateway-mode node pool. The node pool must be in Gateway mode.
    isPreview: true
  - name: --gpu-instance-profile
    parameterValueGroup: "MIG1g, MIG2g, MIG3g, MIG4g, MIG7g"
    summary: |-
      GPU instance profile to partition multi-gpu Nvidia GPUs.
  - name: --host-group-id
    summary: |-
      (PREVIEW) The fully qualified dedicated host group id used to provision agent node pool. Must use VMSS agent pool type.
  - name: --if-match
    summary: |-
      The value provided will be compared to the ETag of the agentpool, if it matches the operation will proceed. If it does not match, the request will be rejected to prevent accidental overwrites. This must not be specified when creating a new agentpool.
  - name: --if-none-match
    summary: |-
      Set to '*' to allow a new agentpool to be created, but to prevent updating an existing agentpool. Other values will be ignored.
  - name: --kubelet-config
    summary: |-
      Kubelet configurations for agent nodes.
  - name: --kubernetes-version -k
    summary: |-
      Version of Kubernetes to use for creating the cluster, such as "1.7.12" or "1.8.7".
    valueFrom: '`az aks get-versions`'
  - name: --labels
    summary: |-
      The node labels for the node pool. See https://aka.ms/node-labels for syntax of labels.
  - name: --linux-os-config
    summary: |-
      OS configurations for Linux agent nodes.
  - name: --max-count
    summary: |-
      Maximum nodes count used for autoscaler, when "--enable-cluster-autoscaler" specified. Please specify the value in the range of [0, 1000] for user nodepool, and [1,1000] for system nodepool.
  - name: --max-pods -m
    defaultValue: "0"
    summary: |-
      The maximum number of pods deployable to a node.
    description: |-
      If not specified, defaults based on network-plugin. 30 for "azure", 110 for "kubenet", or 250 for "none".
  - name: --max-surge
    summary: |-
      Extra nodes used to speed upgrade. When specified, it represents the number or percent used, eg. 5 or 33%.
  - name: --message-of-the-day
    summary: |-
      Path to a file containing the desired message of the day. Only valid for linux nodes. Will be written to /etc/motd.
  - name: --min-count
    summary: |-
      Minimun nodes count used for autoscaler, when "--enable-cluster-autoscaler" specified. Please specify the value in the range of [0, 1000] for user nodepool, and [1,1000] for system nodepool.
  - name: --mode
    defaultValue: "User"
    parameterValueGroup: "Gateway, System, User"
    summary: |-
      The mode for a node pool which defines a node pool's primary function. If set as "System", AKS prefers system pods scheduling to node pools with mode `System`. Learn more at https://aka.ms/aks/nodepool/mode.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --node-count -c
    defaultValue: "3"
    summary: |-
      Number of nodes in the Kubernetes agent pool. After creating a cluster, you can change the size of its node pool with `az aks scale`.
  - name: --node-osdisk-size
    defaultValue: "0"
    summary: |-
      Size in GiB of the OS disk for each node in the agent pool. Minimum 30 GiB.
  - name: --node-osdisk-type
    parameterValueGroup: "Ephemeral, Managed"
    summary: |-
      OS disk type to be used for machines in a given agent pool. Defaults to 'Ephemeral' when possible in conjunction with VM size and OS disk size. May not be changed for this pool after creation. ('Ephemeral' or 'Managed').
  - name: --node-public-ip-prefix-id
    summary: |-
      Public IP prefix ID used to assign public IPs to VMSS nodes. Must use VMSS agent pool type.
  - name: --node-public-ip-tags
    summary: |-
      The ipTags of the node public IPs. Must use VMSS agent pool type.
  - name: --node-soak-duration
    summary: |-
      The amount of time (in minutes) to wait after draining a node and before reimaging it and moving on to next node.
  - name: --node-taints
    summary: |-
      The node taints for the node pool.
  - name: --node-vm-size -s
    summary: |-
      Size of Virtual Machines to create as Kubernetes nodes.
  - name: --os-sku
    parameterValueGroup: "AzureLinux, CBLMariner, Mariner, Ubuntu, Windows2019, Windows2022, WindowsAnnual"
    summary: |-
      The os-sku of the agent node pool. Ubuntu or CBLMariner when os-type is Linux, default is Ubuntu if not set; Windows2019, Windows2022 or WindowsAnnual when os-type is Windows, the current default is Windows2022 if not set.
  - name: --os-type
    summary: |-
      The OS Type. Linux or Windows. Windows not supported yet for "VirtualMachines" VM set type.
  - name: --pod-ip-allocation-mode
    parameterValueGroup: "DynamicIndividual, StaticBlock"
    summary: |-
      Set the ip allocation mode for how Pod IPs from the Azure Pod Subnet are allocated to the nodes in the AKS cluster. The choice is between dynamic batches of individual IPs or static allocation of a set of CIDR blocks. Accepted Values are "DynamicIndividual" or "StaticBlock".
    description: |-
      Used together with the "azure" network plugin.
      Requires --pod-subnet-id.
  - name: --pod-subnet-id
    summary: |-
      The ID of a subnet in an existing VNet into which to assign pods in the cluster (requires azure network-plugin).
  - name: --ppg
    summary: |-
      The ID of a PPG. Must use VMSS agent pool type.
  - name: --priority
    defaultValue: "Regular"
    parameterValueGroup: "Regular, Spot"
    summary: |-
      The priority of the node pool.
  - name: --scale-down-mode
    defaultValue: "Delete"
    parameterValueGroup: "Deallocate, Delete"
    summary: |-
      Describes how VMs are added to or removed from nodepools.
  - name: --skip-gpu-driver-install
    defaultValue: "False"
    summary: |-
      To skip GPU driver auto installation by AKS on a nodepool using GPU vm size if customers want to manage GPU driver installation by their own. If not specified, the default is false.
    isPreview: true
  - name: --snapshot-id
    summary: |-
      The source snapshot id used to create this nodepool. Must use VMSS agent pool type.
  - name: --spot-max-price
    defaultValue: "nan"
    summary: |-
      It can only be set when --priority is Spot. Specify the maximum price you are willing to pay in US Dollars. Possible values are any decimal value greater than zero or -1 which indicates default price to be up-to on-demand. It can only include up to 5 decimal places.
  - name: --ssh-access
    defaultValue: "localuser"
    parameterValueGroup: "disabled, localuser"
    summary: |-
      Configure SSH setting for the node pool. Use "disabled" to disable SSH access, "localuser" to enable SSH access using private key.
    isPreview: true
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
  - name: --undrainable-node-behavior
    summary: |-
      Define the behavior for undrainable nodes during upgrade. The value should be "Cordon" or "Schedule". The default value is "Schedule".
  - name: --vm-set-type
    summary: |-
      Agent pool vm set type. VirtualMachineScaleSets, AvailabilitySet or VirtualMachines(Preview).
  - name: --vm-sizes
    summary: |-
      Comma-separated list of sizes. Must use VirtualMachines agent pool type.
    isPreview: true
  - name: --vnet-subnet-id
    summary: |-
      The ID of a subnet in an existing VNet into which to deploy the cluster.
  - name: --workload-runtime
    defaultValue: "OCIContainer"
    parameterValueGroup: "KataCcIsolation, KataMshvVmIsolation, OCIContainer, WasmWasi"
    summary: |-
      Determines the type of workload a node can run. Defaults to OCIContainer.
  - name: --zones -z
    summary: |-
      Space-separated list of availability zones where agent nodes will be placed. Must use VMSS agent pool type.
- uid: az_aks_nodepool_delete
  name: az aks nodepool delete
  summary: |-
    Delete the agent pool in the managed Kubernetes cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool delete --cluster-name
                           --name
                           --resource-group
                           [--no-wait]
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_delete(aks-preview)
  name: az aks nodepool delete
  extensionSuffix: aks-preview
  summary: |-
    Delete the agent pool in the managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool delete --cluster-name
                           --name
                           --resource-group
                           [--if-match]
                           [--ignore-pod-disruption-budget]
                           [--no-wait]
  examples:
  - summary: |-
      Delete an agent pool with ignore-pod-disruption-budget
    syntax: az aks nodepool delete --resource-group MyResourceGroup --cluster-name MyManagedCluster --name nodepool1 --ignore-pod-disruption-budget=true
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --if-match
    summary: |-
      The value provided will be compared to the ETag of the node pool, if it matches the operation will proceed. If it does not match, the request will be rejected to prevent accidental overwrites. This must not be specified when creating a new agentpool.
  - name: --ignore-pod-disruption-budget -i
    summary: |-
      (PREVIEW) ignore-pod-disruption-budget deletes an existing nodepool without considering Pod Disruption Budget.
    isPreview: true
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_delete-machines
  name: az aks nodepool delete-machines
  summary: |-
    Delete specific machines in an agentpool for a managed cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool delete-machines --cluster-name
                                    --machine-names
                                    --name
                                    --resource-group
                                    [--no-wait]
  examples:
  - summary: |-
      Delete specific machines in an agent pool
    syntax: az aks nodepool delete-machines -g myResourceGroup --nodepool-name nodepool1 --cluster-name myAKSCluster --machine-names machine1
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --machine-names
    summary: |-
      Space-separated list of machine names from the agent pool to be deleted.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_delete-machines(aks-preview)
  name: az aks nodepool delete-machines
  extensionSuffix: aks-preview
  summary: |-
    Delete specific machines in an agentpool for a managed cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool delete-machines --cluster-name
                                    --machine-names
                                    --name
                                    --resource-group
                                    [--no-wait]
  examples:
  - summary: |-
      Delete specific machines in an agent pool
    syntax: az aks nodepool delete-machines -g myResourceGroup --nodepool-name nodepool1 --cluster-name myAKSCluster --machine-names machine1
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --machine-names
    summary: |-
      Space-separated list of machine names from the agent pool to be deleted.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_get-upgrades
  name: az aks nodepool get-upgrades
  summary: |-
    Get the available upgrade versions for an agent pool of the managed Kubernetes cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool get-upgrades --cluster-name
                                 --name
                                 --resource-group
  examples:
  - summary: |-
      Get the available upgrade versions for an agent pool of the managed Kubernetes cluster.
    syntax: az aks nodepool get-upgrades --resource-group MyResourceGroup --cluster-name MyManagedCluster --nodepool-name MyNodePool
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_aks_nodepool_get-upgrades(aks-preview)
  name: az aks nodepool get-upgrades
  extensionSuffix: aks-preview
  summary: |-
    Get the available upgrade versions for an agent pool of the managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool get-upgrades --cluster-name
                                 --name
                                 --resource-group
  examples:
  - summary: |-
      Get the available upgrade versions for an agent pool of the managed Kubernetes cluster.
    syntax: az aks nodepool get-upgrades --resource-group MyResourceGroup --cluster-name MyManagedCluster --nodepool-name MyNodePool
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_aks_nodepool_list
  name: az aks nodepool list
  summary: |-
    List node pools in the managed Kubernetes cluster. To get list of nodes in the cluster run `kubectl get nodes` command.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool list --cluster-name
                         --resource-group
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_aks_nodepool_list(aks-preview)
  name: az aks nodepool list
  extensionSuffix: aks-preview
  summary: |-
    List node pools in the managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool list --cluster-name
                         --resource-group
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_aks_nodepool_operation-abort
  name: az aks nodepool operation-abort
  summary: |-
    Abort last running operation on nodepool.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool operation-abort --cluster-name
                                    --name
                                    --resource-group
                                    [--no-wait]
  examples:
  - summary: |-
      Abort operation on agent pool
    syntax: az aks nodepool operation-abort -g myResourceGroup --nodepool-name nodepool1 --cluster-name myAKSCluster
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_operation-abort(aks-preview)
  name: az aks nodepool operation-abort
  extensionSuffix: aks-preview
  summary: |-
    Abort last running operation on nodepool.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool operation-abort --cluster-name
                                    --name
                                    --resource-group
                                    [--aks-custom-headers]
                                    [--no-wait]
  examples:
  - summary: |-
      Abort operation on agent pool
    syntax: az aks nodepool operation-abort -g myResourceGroup --nodepool-name nodepool1 --cluster-name myAKSCluster
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_scale
  name: az aks nodepool scale
  summary: |-
    Scale the node pool in a managed Kubernetes cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool scale --cluster-name
                          --name
                          --resource-group
                          [--no-wait]
                          [--node-count]
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --node-count -c
    defaultValue: "3"
    summary: |-
      Number of nodes in the Kubernetes node pool.
- uid: az_aks_nodepool_scale(aks-preview)
  name: az aks nodepool scale
  extensionSuffix: aks-preview
  summary: |-
    Scale the node pool in a managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool scale --cluster-name
                          --name
                          --resource-group
                          [--aks-custom-headers]
                          [--no-wait]
                          [--node-count]
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --node-count -c
    defaultValue: "3"
    summary: |-
      Number of nodes in the Kubernetes node pool.
- uid: az_aks_nodepool_show
  name: az aks nodepool show
  summary: |-
    Show the details for a node pool in the managed Kubernetes cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool show --cluster-name
                         --name
                         --resource-group
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_aks_nodepool_show(aks-preview)
  name: az aks nodepool show
  extensionSuffix: aks-preview
  summary: |-
    Show the details for a node pool in the managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool show --cluster-name
                         --name
                         --resource-group
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_aks_nodepool_start
  name: az aks nodepool start
  summary: |-
    Start stopped agent pool in the managed Kubernetes cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool start --cluster-name
                          --name
                          --resource-group
                          [--aks-custom-headers]
                          [--no-wait]
  examples:
  - summary: |-
      Start agent pool in the managed cluster
    syntax: az aks nodepool start --nodepool-name nodepool1 -g MyResourceGroup --cluster-name MyManagedCluster
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_start(aks-preview)
  name: az aks nodepool start
  extensionSuffix: aks-preview
  summary: |-
    Start stopped agent pool in the managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool start --cluster-name
                          --name
                          --resource-group
                          [--aks-custom-headers]
                          [--no-wait]
  examples:
  - summary: |-
      Start agent pool in the managed cluster
    syntax: az aks nodepool start --nodepool-name nodepool1 -g MyResourceGroup --cluster-name MyManagedCluster
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_stop
  name: az aks nodepool stop
  summary: |-
    Stop running agent pool in the managed Kubernetes cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool stop --cluster-name
                         --name
                         --resource-group
                         [--aks-custom-headers]
                         [--no-wait]
  examples:
  - summary: |-
      Stop agent pool in the managed cluster
    syntax: az aks nodepool stop --nodepool-name nodepool1 -g MyResourceGroup --cluster-name MyManagedCluster
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_stop(aks-preview)
  name: az aks nodepool stop
  extensionSuffix: aks-preview
  summary: |-
    Stop running agent pool in the managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool stop --cluster-name
                         --name
                         --resource-group
                         [--aks-custom-headers]
                         [--no-wait]
  examples:
  - summary: |-
      Stop agent pool in the managed cluster
    syntax: az aks nodepool stop --nodepool-name nodepool1 -g MyResourceGroup --cluster-name MyManagedCluster
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_aks_nodepool_update
  name: az aks nodepool update
  summary: |-
    Update a node pool properties.
  description: |-
    Update a node pool to enable/disable cluster-autoscaler or change min-count or max-count. When called with no optional arguments this attempts to move the node pool to its goal state without changing the current node pool configuration. This can be used to move out of a non succeeded state.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool update --cluster-name
                           --name
                           --resource-group
                           [--aks-custom-headers]
                           [--allowed-host-ports]
                           [--asg-ids]
                           [--disable-cluster-autoscaler]
                           [--disable-fips-image]
                           [--disable-secure-boot]
                           [--disable-vtpm]
                           [--drain-timeout]
                           [--enable-cluster-autoscaler]
                           [--enable-fips-image]
                           [--enable-secure-boot]
                           [--enable-vtpm]
                           [--labels]
                           [--max-count]
                           [--max-surge]
                           [--min-count]
                           [--mode {System, User}]
                           [--no-wait]
                           [--node-soak-duration]
                           [--node-taints]
                           [--os-sku {AzureLinux, CBLMariner, Mariner}]
                           [--scale-down-mode {Deallocate, Delete}]
                           [--tags]
                           [--update-cluster-autoscaler]
  examples:
  - summary: |-
      Reconcile the nodepool back to its current state.
    syntax: az aks nodepool update -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  - summary: |-
      Enable cluster-autoscaler within node count range [1,5]
    syntax: az aks nodepool update --enable-cluster-autoscaler --min-count 1 --max-count 5 -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  - summary: |-
      Disable cluster-autoscaler for an existing cluster
    syntax: az aks nodepool update --disable-cluster-autoscaler -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  - summary: |-
      Update min-count or max-count for cluster autoscaler.
    syntax: az aks nodepool update --update-cluster-autoscaler --min-count 1 --max-count 10 -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Comma-separated key-value pairs to specify custom headers.
  - name: --allowed-host-ports
    summary: |-
      Expose host ports on the node pool. When specified, format should be a space-separated list of ranges with protocol, eg. `80/TCP 443/TCP 4000-5000/TCP`.
  - name: --asg-ids
    summary: |-
      The IDs of the application security groups to which the node pool's network interface should belong. When specified, format should be a space-separated list of IDs.
  - name: --disable-cluster-autoscaler -d
    defaultValue: "False"
    summary: |-
      Disable cluster autoscaler.
  - name: --disable-fips-image
    defaultValue: "False"
    summary: |-
      Switch to use non-FIPS-enabled OS on agent nodes.
  - name: --disable-secure-boot
    defaultValue: "False"
    summary: |-
      Disable Secure Boot on on an existing Trusted Launch enabled agent node pool.
  - name: --disable-vtpm
    defaultValue: "False"
    summary: |-
      Disable vTPM on an existing Trusted Launch enabled agent node pool.
  - name: --drain-timeout
    summary: |-
      When nodes are drain how many minutes to wait for all pods to be evicted.
  - name: --enable-cluster-autoscaler -e
    defaultValue: "False"
    summary: |-
      Enable cluster autoscaler.
  - name: --enable-fips-image
    defaultValue: "False"
    summary: |-
      Switch to use FIPS-enabled OS on agent nodes.
  - name: --enable-secure-boot
    defaultValue: "False"
    summary: |-
      Enable Secure Boot on an existing Trusted Launch enabled agent node pool. Must use VMSS agent pool type.
  - name: --enable-vtpm
    defaultValue: "False"
    summary: |-
      Enable vTPM on an existing Trusted Launch enabled agent node pool. Must use VMSS agent pool type.
  - name: --labels
    summary: |-
      The node labels for the node pool. See https://aka.ms/node-labels for syntax of labels.
  - name: --max-count
    summary: |-
      Maximum nodes count used for autoscaler, when "--enable-cluster-autoscaler" specified. Please specify the value in the range of [0, 1000] for user nodepool, and [1,1000] for system nodepool.
  - name: --max-surge
    summary: |-
      Extra nodes used to speed upgrade. When specified, it represents the number or percent used, eg. 5 or 33%.
  - name: --min-count
    summary: |-
      Minimum nodes count used for autoscaler, when "--enable-cluster-autoscaler" specified. Please specify the value in the range of [0, 1000] for user nodepool, and [1,1000] for system nodepool.
  - name: --mode
    parameterValueGroup: "System, User"
    summary: |-
      The mode for a node pool which defines a node pool's primary function. If set as "System", AKS prefers system pods scheduling to node pools with mode `System`. Learn more at https://aka.ms/aks/nodepool/mode.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --node-soak-duration
    summary: |-
      The amount of time (in minutes) to wait after draining a node and before reimaging it and moving on to next node.
  - name: --node-taints
    summary: |-
      The node taints for the node pool. You can update the existing node taint of a nodepool or create a new node taint for a nodepool. Pass the empty string `""` to remove all taints.
  - name: --os-sku
    parameterValueGroup: "AzureLinux, CBLMariner, Mariner"
    summary: |-
      The os-sku of the agent node pool.
  - name: --scale-down-mode
    parameterValueGroup: "Deallocate, Delete"
    summary: |-
      Describe how VMs are added to or removed from nodepools.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
  - name: --update-cluster-autoscaler -u
    defaultValue: "False"
    summary: |-
      Update min-count or max-count for cluster autoscaler.
- uid: az_aks_nodepool_update(aks-preview)
  name: az aks nodepool update
  extensionSuffix: aks-preview
  summary: |-
    Update a node pool properties.
  description: |-
    Update a node pool to enable/disable cluster-autoscaler or change min-count or max-count.  When called with no optional arguments this attempts to move the node pool to its goal state without changing the current node pool configuration. This can be used to move out of a non succeeded state.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool update --cluster-name
                           --name
                           --resource-group
                           [--aks-custom-headers]
                           [--allowed-host-ports]
                           [--asg-ids]
                           [--dcat]
                           [--disable-cluster-autoscaler]
                           [--disable-fips-image]
                           [--disable-secure-boot]
                           [--disable-vtpm]
                           [--drain-timeout]
                           [--enable-artifact-streaming]
                           [--enable-cluster-autoscaler]
                           [--enable-custom-ca-trust]
                           [--enable-fips-image]
                           [--enable-secure-boot]
                           [--enable-vtpm]
                           [--if-match]
                           [--if-none-match]
                           [--labels]
                           [--max-count]
                           [--max-surge]
                           [--min-count]
                           [--mode {Gateway, System, User}]
                           [--no-wait]
                           [--node-soak-duration]
                           [--node-taints]
                           [--os-sku {AzureLinux, Ubuntu}]
                           [--scale-down-mode {Deallocate, Delete}]
                           [--ssh-access {disabled, localuser}]
                           [--tags]
                           [--undrainable-node-behavior]
                           [--update-cluster-autoscaler]
                           [--yes]
  examples:
  - summary: |-
      Reconcile the nodepool back to its current state.
    syntax: az aks nodepool update -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  - summary: |-
      Enable cluster-autoscaler within node count range [1,5]
    syntax: az aks nodepool update --enable-cluster-autoscaler --min-count 1 --max-count 5 -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  - summary: |-
      Disable cluster-autoscaler for an existing cluster
    syntax: az aks nodepool update --disable-cluster-autoscaler -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  - summary: |-
      Update min-count or max-count for cluster autoscaler.
    syntax: az aks nodepool update --update-cluster-autoscaler --min-count 1 --max-count 10 -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  - summary: |-
      Change a node pool to system mode
    syntax: az aks nodepool update --mode System -g MyResourceGroup -n nodepool1 --cluster-name MyManagedCluster
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --allowed-host-ports
    summary: |-
      Expose host ports on the node pool. When specified, format should be a comma-separated list of ranges with protocol, eg. 80/TCP,443/TCP,4000-5000/TCP. Must use VMSS agent pool type.
    isPreview: true
  - name: --asg-ids
    summary: |-
      The IDs of the application security groups to which the node pool's network interface should belong. When specified, format should be a comma-separated list of IDs. Must use VMSS agent pool type.
    isPreview: true
  - name: --dcat --disable-custom-ca-trust
    defaultValue: "False"
    summary: |-
      Disable Custom CA Trust on agent node pool.
  - name: --disable-cluster-autoscaler -d
    defaultValue: "False"
    summary: |-
      Disable cluster autoscaler.
  - name: --disable-fips-image
    defaultValue: "False"
    summary: |-
      Switch to use non-FIPS-enabled OS on agent nodes.
  - name: --disable-secure-boot
    defaultValue: "False"
    summary: |-
      Disable Secure Boot on on an existing Trusted Launch enabled agent node pool.
    isPreview: true
  - name: --disable-vtpm
    defaultValue: "False"
    summary: |-
      Disable vTPM on an existing Trusted Launch enabled agent node pool.
    isPreview: true
  - name: --drain-timeout
    summary: |-
      When nodes are drain how many minutes to wait for all pods to be evicted.
  - name: --enable-artifact-streaming
    defaultValue: "False"
    summary: |-
      Enable artifact streaming for VirtualMachineScaleSets managed by a node pool, to speed up the cold-start of containers on a node through on-demand image loading. To use this feature, container images must also enable artifact streaming on ACR. If not specified, the default is false.
    isPreview: true
  - name: --enable-cluster-autoscaler -e
    defaultValue: "False"
    summary: |-
      Enable cluster autoscaler. Must use VMSS agent pool type.
  - name: --enable-custom-ca-trust
    defaultValue: "False"
    summary: |-
      Enable Custom CA Trust on agent node pool.
  - name: --enable-fips-image
    defaultValue: "False"
    summary: |-
      Switch to use FIPS-enabled OS on agent nodes.
  - name: --enable-secure-boot
    defaultValue: "False"
    summary: |-
      Enable Secure Boot on an existing Trusted Launch enabled agent node pool. Must use VMSS agent pool type.
    isPreview: true
  - name: --enable-vtpm
    defaultValue: "False"
    summary: |-
      Enable vTPM on an existing Trusted Launch enabled agent node pool. Must use VMSS agent pool type.
    isPreview: true
  - name: --if-match
    summary: |-
      The value provided will be compared to the ETag of the node pool, if it matches the operation will proceed. If it does not match, the request will be rejected to prevent accidental overwrites. This must not be specified when creating a new agentpool.
  - name: --if-none-match
    summary: |-
      Set to '*' to allow a new node pool to be created, but to prevent updating an existing node pool. Other values will be ignored.
  - name: --labels
    summary: |-
      The node labels for the node pool. See https://aka.ms/node-labels for syntax of labels.
  - name: --max-count
    summary: |-
      Maximum nodes count used for autoscaler, when "--enable-cluster-autoscaler" specified. Please specify the value in the range of [0, 1000] for user nodepool, and [1,1000] for system nodepool.
  - name: --max-surge
    summary: |-
      Extra nodes used to speed upgrade. When specified, it represents the number or percent used, eg. 5 or 33%.
  - name: --min-count
    summary: |-
      Minimun nodes count used for autoscaler, when "--enable-cluster-autoscaler" specified. Please specify the value in the range of [0, 1000] for user nodepool, and [1,1000] for system nodepool.
  - name: --mode
    parameterValueGroup: "Gateway, System, User"
    summary: |-
      The mode for a node pool which defines a node pool's primary function. If set as "System", AKS prefers system pods scheduling to node pools with mode `System`. Learn more at https://aka.ms/aks/nodepool/mode.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --node-soak-duration
    summary: |-
      The amount of time (in minutes) to wait after draining a node and before reimaging it and moving on to next node.
  - name: --node-taints
    summary: |-
      The node taints for the node pool.
  - name: --os-sku
    parameterValueGroup: "AzureLinux, Ubuntu"
    summary: |-
      The os-sku of the agent node pool.
  - name: --scale-down-mode
    parameterValueGroup: "Deallocate, Delete"
    summary: |-
      Describes how VMs are added to or removed from nodepools.
  - name: --ssh-access
    parameterValueGroup: "disabled, localuser"
    summary: |-
      Update SSH setting for the node pool. Use "disabled" to disable SSH access, "localuser" to enable SSH access using private key.
    isPreview: true
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
  - name: --undrainable-node-behavior
    summary: |-
      Define the behavior for undrainable nodes during upgrade. The value should be "Cordon" or "Schedule". The default value is "Schedule".
  - name: --update-cluster-autoscaler -u
    defaultValue: "False"
    summary: |-
      Update min-count or max-count for cluster autoscaler.
  - name: --yes -y
    defaultValue: "False"
    summary: |-
      Do not prompt for confirmation.
- uid: az_aks_nodepool_upgrade
  name: az aks nodepool upgrade
  summary: |-
    Upgrade the node pool in a managed Kubernetes cluster.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool upgrade --cluster-name
                            --name
                            --resource-group
                            [--aks-custom-headers]
                            [--drain-timeout]
                            [--kubernetes-version]
                            [--max-surge]
                            [--no-wait]
                            [--node-image-only]
                            [--node-soak-duration]
                            [--snapshot-id]
                            [--yes]
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Comma-separated key-value pairs to specify custom headers.
  - name: --drain-timeout
    summary: |-
      When nodes are drain how long to wait for all pods to be evicted.
  - name: --kubernetes-version -k
    summary: |-
      Version of Kubernetes to upgrade the node pool to, such as "1.16.9".
  - name: --max-surge
    summary: |-
      Extra nodes used to speed upgrade. When specified, it represents the number or percent used, eg. 5 or 33% (mutually exclusive with "--node-image-only". See "az aks nodepool update --max-surge" to update max surge before upgrading with "--node-image-only").
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --node-image-only
    defaultValue: "False"
    summary: |-
      Only upgrade agent pool's node image.
  - name: --node-soak-duration
    summary: |-
      The amount of time (in minutes) to wait after draining a node and before reimaging it and moving on to next node.
  - name: --snapshot-id
    summary: |-
      The source snapshot id used to upgrade this nodepool.
  - name: --yes -y
    defaultValue: "False"
    summary: |-
      Do not prompt for confirmation.
- uid: az_aks_nodepool_upgrade(aks-preview)
  name: az aks nodepool upgrade
  extensionSuffix: aks-preview
  summary: |-
    Upgrade the node pool in a managed Kubernetes cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az aks nodepool upgrade --cluster-name
                            --name
                            --resource-group
                            [--aks-custom-headers]
                            [--drain-timeout]
                            [--if-match]
                            [--if-none-match]
                            [--kubernetes-version]
                            [--max-surge]
                            [--no-wait]
                            [--node-image-only]
                            [--node-soak-duration]
                            [--snapshot-id]
                            [--undrainable-node-behavior]
                            [--yes]
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --aks-custom-headers
    summary: |-
      Send custom headers. When specified, format should be Key1=Value1,Key2=Value2.
  - name: --drain-timeout
    summary: |-
      When nodes are drain how many minutes to wait for all pods to be evicted.
  - name: --if-match
    summary: |-
      The value provided will be compared to the ETag of the node pool, if it matches the operation will proceed. If it does not match, the request will be rejected to prevent accidental overwrites. This must not be specified when creating a new agentpool. For upgrade node image version requests this will be ignored.
  - name: --if-none-match
    summary: |-
      Set to '*' to allow a new node pool to be created, but to prevent updating an existing node pool. Other values will be ignored.
  - name: --kubernetes-version -k
    summary: |-
      Version of Kubernetes to upgrade the node pool to, such as "1.11.12".
  - name: --max-surge
    summary: |-
      Extra nodes used to speed upgrade. When specified, it represents the number or percent used, eg. 5 or 33%.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --node-image-only
    defaultValue: "False"
    summary: |-
      Only upgrade agent pool's node image.
  - name: --node-soak-duration
    summary: |-
      The amount of time (in minutes) to wait after draining a node and before reimaging it and moving on to next node.
  - name: --snapshot-id
    summary: |-
      The source snapshot id used to upgrade this nodepool. Must use VMSS agent pool type.
  - name: --undrainable-node-behavior
    summary: |-
      Define the behavior for undrainable nodes during upgrade. The value should be "Cordon" or "Schedule". The default value is "Schedule".
  - name: --yes -y
    defaultValue: "False"
    summary: |-
      Do not prompt for confirmation.
- uid: az_aks_nodepool_wait
  name: az aks nodepool wait
  summary: |-
    Wait for a node pool to reach a desired state.
  description: |-
    If an operation on a node pool was interrupted or was started with `--no-wait`, use this command to wait for it to complete.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/acs/_help.py
  syntax: >-
    az aks nodepool wait --cluster-name
                         --name
                         --resource-group
                         [--created]
                         [--custom]
                         [--deleted]
                         [--exists]
                         [--interval]
                         [--timeout]
                         [--updated]
  examples:
  - summary: |-
      Wait for a node pool to reach a desired state, polling every minute for up to thirty minutes.
    syntax: az aks nodepool wait --created --interval 60 --cluster-name MyManagedCluster --resource-group MyResourceGroup --nodepool-name MyNodePool --timeout 1800
  requiredParameters:
  - isRequired: true
    name: --cluster-name
    summary: |-
      The cluster name.
  - isRequired: true
    name: --name --nodepool-name -n
    summary: |-
      The node pool name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --created
    defaultValue: "False"
    summary: |-
      Wait until created with 'provisioningState' at 'Succeeded'.
  - name: --custom
    summary: |-
      Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
  - name: --deleted
    defaultValue: "False"
    summary: |-
      Wait until deleted.
  - name: --exists
    defaultValue: "False"
    summary: |-
      Wait until the resource exists.
  - name: --interval
    defaultValue: "30"
    summary: |-
      Polling interval in seconds.
  - name: --timeout
    defaultValue: "3600"
    summary: |-
      Maximum wait in seconds.
  - name: --updated
    defaultValue: "False"
    summary: |-
      Wait until updated with provisioningState at 'Succeeded'.
commands:
- az_aks_nodepool_add
- az_aks_nodepool_add(aks-preview)
- az_aks_nodepool_delete
- az_aks_nodepool_delete(aks-preview)
- az_aks_nodepool_delete-machines
- az_aks_nodepool_delete-machines(aks-preview)
- az_aks_nodepool_get-upgrades
- az_aks_nodepool_get-upgrades(aks-preview)
- az_aks_nodepool_list
- az_aks_nodepool_list(aks-preview)
- az_aks_nodepool_manual-scale
- az_aks_nodepool_manual-scale_add
- az_aks_nodepool_manual-scale_delete
- az_aks_nodepool_manual-scale_update
- az_aks_nodepool_operation-abort
- az_aks_nodepool_operation-abort(aks-preview)
- az_aks_nodepool_scale
- az_aks_nodepool_scale(aks-preview)
- az_aks_nodepool_show
- az_aks_nodepool_show(aks-preview)
- az_aks_nodepool_snapshot
- az_aks_nodepool_snapshot_create
- az_aks_nodepool_snapshot_delete
- az_aks_nodepool_snapshot_list
- az_aks_nodepool_snapshot_show
- az_aks_nodepool_snapshot_update
- az_aks_nodepool_start
- az_aks_nodepool_start(aks-preview)
- az_aks_nodepool_stop
- az_aks_nodepool_stop(aks-preview)
- az_aks_nodepool_update
- az_aks_nodepool_update(aks-preview)
- az_aks_nodepool_upgrade
- az_aks_nodepool_upgrade(aks-preview)
- az_aks_nodepool_wait
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, none, table, tsv, yaml, yamlc"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  description: Commands to manage node pools in Kubernetes kubernetes cluster.
