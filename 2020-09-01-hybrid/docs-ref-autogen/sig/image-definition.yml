### YamlMime:AzureCLIGroup
uid: az_sig_image-definition
name: az sig image-definition
importantNote: >-
  > [!NOTE]

  > This command group has commands that are defined in both Azure CLI and at least one extension. Install each extension to benefit from its extended capabilities. [Learn more](https://learn.microsoft.com/cli/azure/azure-cli-extensions-overview) about extensions.
summary: |-
  Manage shared gallery image with VM.
status: GA
sourceType: Core and Extension
directCommands:
- uid: az_sig_image-definition_create
  name: az sig image-definition create
  summary: |-
    Create a gallery image definition.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-definition create --gallery-image-definition
                                   --gallery-name
                                   --offer
                                   --os-type {Linux, Windows}
                                   --publisher
                                   --resource-group
                                   --sku
                                   [--description]
                                   [--disallowed-disk-types]
                                   [--end-of-life-date]
                                   [--eula]
                                   [--features]
                                   [--hyper-v-generation {V1, V2}]
                                   [--location]
                                   [--maximum-cpu-core]
                                   [--maximum-memory]
                                   [--minimum-cpu-core]
                                   [--minimum-memory]
                                   [--os-state {Generalized, Specialized}]
                                   [--plan-name]
                                   [--plan-product]
                                   [--plan-publisher]
                                   [--privacy-statement-uri]
                                   [--release-note-uri]
                                   [--tags]
  examples:
  - summary: |-
      Create an image definition for specialized linux images
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized
  - summary: |-
      Create an image definition for generalized linux images
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Generalized
  - summary: |-
      Create an image definition for specialized windows images
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type windows --os-state Specialized
  - summary: |-
      Create an image definition for generalized windows images
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type windows --os-state Generalized
  - summary: |-
      Create an image definition with plan information
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized --plan-name PlanName \

      --plan-product PlanProduct --plan-publisher PlanPublisher
  - summary: |-
      Create an image definition for images that support hibernate feature
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --features IsHibernateSupported=true
  - summary: |-
      Create an image definition for images that support accelerated networking
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --features IsAcceleratedNetworkSupported=true
  - summary: |-
      Create an image definition for images that can only be used to create Trusted VMs. Only Trusted VMs can be created from this image.
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --features SecurityType=TrustedLaunch
  - summary: |-
      Create an image definition for images that can be used to create Confidential VMs.
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --features SecurityType=ConfidentialVmSupported
  - summary: |-
      Create an image definition for images that can only be used to create Confidential VMs. Only Confidential VMs can be created from this image.
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --features SecurityType=ConfidentialVM
  - summary: |-
      Create an image definition for images that can be used to create Gen2 or TrustedLaunchSupported VMs.
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --features SecurityType=TrustedLaunchSupported
  - summary: |-
      Create an image definition for images that can be used to create Gen2, TrustedLaunch, or Confidential VMs.
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --features SecurityType=TrustedLaunchAndConfidentialVmSupported
  - summary: |-
      Create an image definition and indicate end of life date
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --end-of-life-date YYYY-MM-DDTHH:MM:SS+00:00
  - summary: |-
      Create an image definition and recommend minimum and maximum CPU and memory (GB)
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --minimum-cpu-core myMinCPU --maximum-cpu-core myMaxCPU \

      --minimum-memory myMinMemory --maximum-memory myMaxMemory
  - summary: |-
      Create an image definition and indicate which OS disk types are not recommended for the image
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --disallowed-disk-types Standard_LRS
  - summary: |-
      Create an image definition and provide the EULA, privacy statement URI, and release notes URI
    syntax: >-
      az sig image-definition create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --publisher GreatPublisher --offer GreatOffer --sku GreatSku \

      --os-type linux --os-state Specialized \

      --eula path_to_eula --privacy-statement-uri path_to_statement \

      --release-note-uri path_to_release_notes
  requiredParameters:
  - isRequired: true
    name: --gallery-image-definition -i
    summary: |-
      Gallery image definition.
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      Gallery name.
  - isRequired: true
    name: --offer -f
    summary: |-
      Image offer.
  - isRequired: true
    name: --os-type
    parameterValueGroup: "Linux, Windows"
    summary: |-
      The type of the OS that is included in the disk if creating a VM from user-image or a specialized VHD.
  - isRequired: true
    name: --publisher -p
    summary: |-
      Image publisher.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - isRequired: true
    name: --sku -s
    summary: |-
      Image sku.
  optionalParameters:
  - name: --description
    summary: |-
      The description of the gallery image definition.
  - name: --disallowed-disk-types
    summary: |-
      Disk types which would not work with the image, e.g., Standard_LRS.
  - name: --end-of-life-date
    summary: |-
      The end of life date, e.g. '2020-12-31'.
  - name: --eula
    summary: |-
      The Eula agreement for the gallery image.
  - name: --features
    summary: |-
      A list of gallery image features. E.g. "IsSecureBootSupported=true IsMeasuredBootSupported=false".
  - name: --hyper-v-generation
    defaultValue: "V1"
    parameterValueGroup: "V1, V2"
    summary: |-
      The hypervisor generation of the Virtual Machine. Applicable to OS disks only.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --maximum-cpu-core
    summary: |-
      Maximum cpu cores.
  - name: --maximum-memory
    summary: |-
      Maximum memory in MB.
  - name: --minimum-cpu-core
    summary: |-
      Minimum cpu cores.
  - name: --minimum-memory
    summary: |-
      Minimum memory in MB.
  - name: --os-state
    defaultValue: "Generalized"
    parameterValueGroup: "Generalized, Specialized"
    summary: |-
      This property allows the user to specify whether the virtual machines created under this image are 'Generalized' or 'Specialized'.
  - name: --plan-name
    summary: |-
      Plan name.
  - name: --plan-product
    summary: |-
      Plan product.
  - name: --plan-publisher
    summary: |-
      Plan publisher.
  - name: --privacy-statement-uri
    summary: |-
      The privacy statement uri.
  - name: --release-note-uri
    summary: |-
      The release note uri.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
- uid: az_sig_image-definition_delete
  name: az sig image-definition delete
  summary: |-
    Delete a gallery image.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-definition delete [--gallery-image-definition]
                                   [--gallery-name]
                                   [--ids]
                                   [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                   [--resource-group]
                                   [--subscription]
  optionalParameters:
  - name: --gallery-image-definition --gallery-image-name -i
    summary: |-
      The name of the gallery image definition to be deleted.
  - name: --gallery-name -r
    summary: |-
      The name of the Shared Image Gallery in which the Image Definition is to be deleted.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-definition_list
  name: az sig image-definition list
  summary: |-
    List gallery image definitions in a gallery.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-definition list --gallery-name
                                 --resource-group
  requiredParameters:
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      The name of the Shared Image Gallery from which Image Definitions are to be listed.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_sig_image-definition_list-community
  name: az sig image-definition list-community
  summary: |-
    List VM Image definitions in a gallery community (preview).
  description: |-
    List VM Image definitions in a gallery community (private preview feature, please contact community image gallery team by email sigpmdev@microsoft.com to register for preview if you're interested in using this feature).
  status: Experimental
  isExperimental: true
  previewOrExperimentalInfo: 'This command is experimental and under development. Reference and support levels: https://aka.ms/CLI_refstatus'
  sourceType: Extension
  syntax: >-
    az sig image-definition list-community [--ids]
                                           [--location]
                                           [--marker]
                                           [--public-gallery-name]
                                           [--show-next-marker]
                                           [--subscription]
  examples:
  - summary: |-
      List an image definition in a gallery community.
    syntax: >-
      az sig image-definition list-community --public-gallery-name publicGalleryName \

      --location myLocation
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --marker
    summary: |-
      A string value that identifies the portion of the list of containers to be returned with the next listing operation. The operation returns the NextMarker value within the response body if the listing operation did not return all containers remaining to be listed with the current page. If specified, this generator will begin returning results from the point where the previous generator stopped.
  - name: --public-gallery-name
    summary: |-
      The public name of community gallery.
  - name: --show-next-marker
    summary: |-
      Show nextMarker in result when specified.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-definition_show
  name: az sig image-definition show
  summary: |-
    Get information about a gallery image definition.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-definition show [--gallery-image-definition]
                                 [--gallery-name]
                                 [--ids]
                                 [--resource-group]
                                 [--subscription]
  optionalParameters:
  - name: --gallery-image-definition --gallery-image-name -i
    summary: |-
      The name of the gallery image definition to be retrieved.
  - name: --gallery-name -r
    summary: |-
      The name of the Shared Image Gallery from which the Image Definitions are to be retrieved.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-definition_show-community
  name: az sig image-definition show-community
  summary: |-
    Get an image in a gallery community (preview).
  description: |-
    Get an image in a gallery community (private preview feature, please contact community image gallery team by email sigpmdev@microsoft.com to register for preview if you're interested in using this feature).
  status: Experimental
  isExperimental: true
  previewOrExperimentalInfo: 'This command is experimental and under development. Reference and support levels: https://aka.ms/CLI_refstatus'
  sourceType: Extension
  syntax: >-
    az sig image-definition show-community [--gallery-image-definition]
                                           [--ids]
                                           [--location]
                                           [--public-gallery-name]
                                           [--subscription]
  examples:
  - summary: |-
      Get an image definition in a gallery community in the given location.
    syntax: >-
      az sig image-definition show-community --public-gallery-name publicGalleryName \

      --gallery-image-definition myGalleryImageName --location myLocation
  optionalParameters:
  - name: --gallery-image-definition -i
    summary: |-
      The name of the community gallery image definition from which the image versions are to be listed.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --public-gallery-name
    summary: |-
      The public name of community gallery.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-definition_update
  name: az sig image-definition update
  summary: |-
    Update a VM Image definition.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-definition update --gallery-image-definition
                                   --gallery-name
                                   --resource-group
                                   [--add]
                                   [--force-string]
                                   [--remove]
                                   [--set]
  examples:
  - summary: |-
      Change the shared image definition's recommended configuration
    syntax: >-
      az sig image-definition update --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --resource-group MyResourceGroup --set recommended.vCpUs.min=myNewvCpUsMin \

      recommended.vCpUs.max=myNewvCpUsMax recommended.memory.min=myNewMemoryMin \

      recommended.memory.max=myNewMemoryMax description="newDescription"
  - summary: |-
      Remove a shared image definition's configuration property
    syntax: >-
      az sig image-definition update --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --resource-group MyResourceGroup --remove recommended.vCpUs.min
  requiredParameters:
  - isRequired: true
    name: --gallery-image-definition -i
    summary: |-
      Gallery image definition.
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      Gallery name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --add
    defaultValue: "[]"
    summary: |-
      Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.
  - name: --force-string
    defaultValue: "False"
    summary: |-
      When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
  - name: --remove
    defaultValue: "[]"
    summary: |-
      Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.
  - name: --set
    defaultValue: "[]"
    summary: |-
      Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.
- uid: az_sig_image-definition_wait
  name: az sig image-definition wait
  summary: |-
    Place the CLI in a waiting state until a condition is met.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-definition wait [--created]
                                 [--custom]
                                 [--deleted]
                                 [--exists]
                                 [--gallery-image-definition]
                                 [--gallery-name]
                                 [--ids]
                                 [--interval]
                                 [--resource-group]
                                 [--subscription]
                                 [--timeout]
                                 [--updated]
  optionalParameters:
  - name: --created
    defaultValue: "False"
    summary: |-
      Wait until created with 'provisioningState' at 'Succeeded'.
  - name: --custom
    summary: |-
      Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
  - name: --deleted
    defaultValue: "False"
    summary: |-
      Wait until deleted.
  - name: --exists
    defaultValue: "False"
    summary: |-
      Wait until the resource exists.
  - name: --gallery-image-definition --gallery-image-name -i
    summary: |-
      The name of the gallery image definition to be retrieved.
  - name: --gallery-name -r
    summary: |-
      The name of the Shared Image Gallery from which the Image Definitions are to be retrieved.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --interval
    defaultValue: "30"
    summary: |-
      Polling interval in seconds.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --timeout
    defaultValue: "3600"
    summary: |-
      Maximum wait in seconds.
  - name: --updated
    defaultValue: "False"
    summary: |-
      Wait until updated with provisioningState at 'Succeeded'.
commands:
- az_sig_image-definition_create
- az_sig_image-definition_delete
- az_sig_image-definition_list
- az_sig_image-definition_list-community
- az_sig_image-definition_show
- az_sig_image-definition_show-community
- az_sig_image-definition_update
- az_sig_image-definition_wait
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, table, tsv"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  description: Manage shared gallery image with VM.
