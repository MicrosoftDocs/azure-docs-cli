---
Description: Learn the documentation requirements for publishing a new Azure CLI reference group or command
Intended audience: Azure CLI reference engineering teams publishing new content
ms.author: dbradish
ms.date: 04/15/2023
ms.service: azure-cli
---

> [!README]
> - **Intended outcome:** Create a standard for new reference content.
> - **Intended audience:** Azure CLI reference engineering teams publishing new reference content
> - **Intended repos:** Azure/azure-cli and Azure/azure-cli-extensions
> - **Description:** Learn the documentation requirements for publishing a new Azure CLI reference group or command
> - **Additional impact:** These standards should ideally be shared with Azure PowerShell

# Reference documentation requirements

Before publishing a new reference group or command, meet these minimum reference and conceptual documentation requirements.

## Autogenerated reference content

One purpose of autogenerated reference content is to decrease the number of simple Quickstarts and encourage Microsoft content writers to use their abilities to teach a cross-service scenario or job to be done.  We are **not** trying to eliminate Quickstarts!  We **do want** the Azure CLI autogenerated content to be _Best in Class!_

The _/_help.py_ file within the Python source code for reference content contains the information that becomes the Azure CLI autogenerated reference docs.  For engineering guidance on in-line help, see [need link here]().

#### General guidelines

1. Develop and test all reference examples in both a Bash and PowerShell environment.  When commands have syntax differences between environments, create one example for Bash and another for PowerShell.  For copyability, use different code blocks with a notation.  Here is an example:

```azurecli-interactive
# Bash command syntax
az command
```

```azurelci-interactive
# Windows PowerShell syntax
az command with quoting differences
```

1.  Write all help messages and resulting autogenerated reference content for the entry-level Azure CLI customer.  Assume the customer has no prior knowledge of Bash or PowerShell.

#### Summaries

Summary guidelines apply to command groups (`az account`), reference commands (`az account create`) and parameters (`--group`).

1. Write the `short-summary` in active voice within a single sentence that contains a noun, a verb and a direct object.  Active voice has an understood "you".  Examples:
   - **Poor:** Work with accounts.
   - **Not great:** Manage accounts.
   - **Good:** Manage Azure account information.  (The word "information" does not ad meaning to the sentence.)
   - **Better:** Manage Azure accounts.
   - **Best:** Manage Azure accounts.  Azure accounts are combination of subscription, tenant and user identity.
   - **Good example:** [az eventgrid](https://learn.microsoft.com/cli/azure/eventgrid)

1. Include in the `short-summary` information that _cannot_ be immediately deduced from the reference command name.  Examples:
   - **Poor:** Manage logic apps
   - **Not great:**  Manage Azure Logic Apps
   - **Better:** Manage automated workflows with Azure Logic Apps
   - **Good example:** [az managedapp](https://learn.microsoft.com/cli/azure/managedapp)

1. Include additional tips in the `long-summary`.  
   - Provide information customers should understand about the reference group or command.
   - This section is not the place for Quickstart or How-to guidance.  Keep your `long-summary` focused on information _about_ the command, not how to use it.
   - Use links to conceptual content judiciously.  There isn't an automated process to fix broken links in the Python source code files.
   - **Good Example:** [az network application-gateway rule create](https://learn.microsoft.com/cli/azure/network/application-gateway/rule?view=azure-cli-latest#az-network-application-gateway-rule-create)]

#### Parameters

1. The parameter `help`, usually located in `_params.py`, is an excellent opportunity to provide additional information to customers and avoid formatting errors!  Think of the parameter `help` as a blank canvas and throw on it all the clarity paint you can.  
1. Remember to keep parameter `help` information _about_ the parameter, not a Quickstart on how to use the parameter.
1. Include the following information in the `help` property:
   - **A full sentence description** containing a noun, a verb and a direct object.  Here is an example for `--enrollment-account-name`:
     - _Poor:_ Enrollment account name
     - _Not great:_ The name of the enrollment account used to create a subscription.  
     - _Better:_ The name of the enrollment account used to create a subscription.  An enrollment account is a billing contract, also known as an Enterprise Agreement, that an organization has with Microsoft to use Azure.  To find the name of your enrollment account, go to the Overview page in Azure Active Directory.
     - _Good example:_ [az keyvault create](https://learn.microsoft.com/en-us/cli/azure/keyvault/private-endpoint-connection?view=azure-cli-latest#az-keyvault-private-endpoint-connection-approve-examples)
   - **Accepted values.**  Example: [az account create --offer-type](https://learn.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-create)
   - **Azure CLI default value.**  Example: [az account list --all](https://learn.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-create)
   - **Azure service default value.**  Example: az keyvault **need link here**
   - **Information about parameter pairs.**  Examples:
     - "If p1 is used, you must also supply p2."
     - "If p1 is used, you do not need to supply p2."
     - "If p1 is used, you cannot supply p2."
     - "P1 is optional if p2 has been provided."
     - _Good example:_ [az keyvault network-rule add -- subnet](https://learn.microsoft.com/en-us/cli/azure/account?view=azure-cli-latest#az-account-create)
   - **Data type.**  !TO DO: Discuss with Damien.  azCLI is not like azPS.
   - **Example value.**  This is especially important when example code blocks do not use all available parameters.  Tip:  Give individual parameter examples in the parameter `help`.  Focus code block examples on common scenarios.  Here are parameter example guidelines:
     - When possible, tell customers how to find the value for a parameter.  Example: "Use `az account list-locations` to find available location values."
     - Do not expect the customer to know Bash, or to intuitively figure out parameter formats.
       - If a parameter accepts multiple values, provide a multi-value string example.  Is it comma delimited?  Space delimited?  Are there quotes around each value, the entire string, or no quotes at all?  
       - If a parameter "can be passed in as file or string", how would the contents of the file be formatted?  What information is acceptable?  What would a multi-value string look like?
     - When the string value is complex, give an example of a variable that gets the value from a `--query` command.  You can do this in `help` or in a code block example as seen here: [az keyvault private-endpoint-connection approve](https://learn.microsoft.com/en-us/cli/azure/keyvault/private-endpoint-connection?view=azure-cli-latest#az-keyvault-private-endpoint-connection-approve-examples).
     - Don't repeat values in parameter examples with identical values in example code blocks.  Redundancy does not typically add value.  It's okay to say "See parameter usage in examples."
     - Here is an example of a parameter value for `--kind`
       - _Not great:_ The API name of cognitive services account.
       - _Better:_  The API name of cognitive services account.  Get available values by running `az cognitiveservices account list-kinds`
     - Here is an example of a parameter value for `--encryption`
       - _Not great:_ The encryption proeprties for this resource in JSON format.
       - _Better:_ The encryption proeprties for this resource in JSON format.  See JSON format example in Examples.
       - _Even better if the JSON values aren't identical to an Example code block:_  The encryption proeprties for this resource in JSON format.  Example:
       > '{
       > "keySource": "Microsoft.KeyVault",
       > "keyVaultProperties": {
       > "keyName": "KeyName",
       > "keyVersion": "secretVersion",
       > "keyVaultUri": "https://issue23056kv.vault.azure.net/"
       >    }
       > }'

Many of our GitHub issues and negative HaTS results are come from misunderstood parameter usage or formats.  You may feel you are "over explaining" but take time to build out the parameter `help` especially for `create` commands.

#### Examples

1. Every reference command must have an example code block.  Remember that reference content is translated into many languages and customers have diverse technical skills.  What is intuitive for one customer, is a frustrating roadblock for another.

1. Give special attention to `create` command examples.  These are often revenue-generating and Microsoft loses billable resources when a create command fails.

1. Use line breaks for examples with multiple parameters.  This improves readability.  Engineering is working on a "copy with" and "copy without" line breaks feature of the Azure CLI code block UI which will improve copyability.

1. Use Global Parameters (`--output`, `--query`) in examples when needed for clarity.  Showing customers how to get a value from an Azure resource and store it in a variable is especially helpful when the `--query` syntax required is not intuitive.  Frustrations with `--query` are seen in many customer feedback forums.  Let's work to change this.

1. Avoid parameter abbreviations in examples.  This requires the customer to lookup abbreviations.  Reference examples strive for clarity and readability, not reduced key strokes.  Use a line continuation character if the example uses multiple parameters.

1. Create diverse, not repetitive examples.

   **Poor:**
   ```azurecli
   az some-command -g MyRG -l eastus --p1 00.0.0.0 --p2 "1.0" -- p3 "Gen1"
   ```
   ```azurecli
   az same-command -g MyRG -l eastus --p1 00.0.0.0 --p2 "1.0" --p3 "Gen2"
   ```
   
   **Better:**
   ```azurecli
   az some-command -g MyRG -l eastus --p1 00.0.0.0 --p2 "1.0" -- p3 "Gen1"
   ```
   ```azurecli
   az same-command -g MyRG -l eastus --p4 "SystemAssigned, UserAssigned" --p5 Tag1
   ```

1. Provide real-world parameter values.  The **Helpful** examples do not expect the customer to figure out an actual value and format for the command.
    - **Not very helpful:** az some-command -g MyRG --address-prefix MyAddressPrefix --settings MySettings
    - **Helpful:** az same-command -g MyRG --address-prefix 10.0.1.0/24 --settings '{ "fileUris": ["https://raw.githubusercontent.com/Azure/azure-docs-powershell-samples/master/application-gateway/iis/install_nginx.sh"],"commandToExecute": "./install_nginx.sh" }'
    
    - **Not very helpful:** az some-command -g MyResourceGroup --p1 MyFileName --p2 MyIPaddress --p3 MyTargetURL -- p4 MyTypes
    - **Helpful:** az same-command -g MyResourceGroup --p1 "appgwcert.pfx" --p2 00.000.000.00 --p3 "https://bing.com" --p4 "Microsoft.Resources.ResourceWriteFailure Microsoft.Resources.ResourceWriteSuccess"

   The challenge is that some customers will not replace actual example values.  Here is an option:
   ```azurecli
   # Replace each parameter value
   az some-command -g <MyRG> --address-prefix <MyAddressPrefix> --settings <MySettings>

   # Your syntax may look something like this:
   az some-command -g MyRG --address-prefix 10.0.1.0/24 --settings '{ "fileUris": ["https://raw.githubusercontent.com/Azure/azure-docs-powershell-samples/master/application-gateway/iis/install_nginx.sh"],"commandToExecute": "./install_nginx.sh" }'

   ```
>[!TO DO] Confirm that code blocks with > 1 command reference do not throw a build validation error.  Yes!  See [az vm create](https://learn.microsoft.com/en-us/cli/azure/vm?view=azure-cli-latest#az-vm-create-examples) examples

1. Provide examples for complex parameters or those that require a particular format.  Here are some examples:
   - **--linked-resources id**="/subscriptions/21a9967a-e8a9-4656-a70b-96ff1c4d05a0/resourceGroups/myResourceGroup/providers/Microsoft.Storage/accounts/mystorageacc"
   - **--start-timestamp** 100000
   - **--force-end-timestamp**=False
   - **--tracks** @C:\tracks.json
   - **--query** [?starts_with(name,'Something')]
   - **--action webhook** MyActionName \https://alerts.contoso.com apiKey={APIKey}


1. Provide examples for parameters that should be used in groups.

   When there are a significant number of parameters for a single reference command, it is confusing for customers to understand what parameters should be used together.  See the [az vm](https://learn.microsoft.com/cli/azure/vm#az-vm-create) reference documentation for an example of a command with many parameters.  Enter `az vm create -h` in a terminal and notice the groupings provided in the in-line help:
      - Authentication Arguments
      - Dedicated Host Arguments
      - Managed Service Identity Arguments
      - Marketplace Image Plan Arguments
      - Monitor Arguments
      - Network Arguments
      - Storage Arguments
      - Global Arguments

>[!TO DO] Need example code blocks of parameter group usage.  

## Conceptual articles

Minimum viable conceptual content for the Azure CLI is one Quickstart or How-to guide for every command _group_ that contains at least one `create` command.  Easily meet this requirement using one of the these solutions:

- Copy an existing Azure portal article replacing Azure portal instructions with Azure CLI reference commands.
- Add a [conceptual tab](https://review.learn.microsoft.com/help/platform/validation-ref/tabbed-conceptual?branch=main) to an existing H2.  This a good solution when there aren't enough reference commands to replicate an entire portal article.
- This solution is **not preferred**, but add an H2 to the bottom of an existing article with links to related Azure CLI reference content.  This does not qualify as "conceptual content", but it's a start when you are pressed for time.

## Related content

- [Current Azure CLI reference documentation](https://learn.microsoft.com/cli/azure/reference-index)


