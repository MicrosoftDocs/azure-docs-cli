### YamlMime:AzureCLIGroup
uid: az_vm_unmanaged-disk
name: az vm unmanaged-disk
summary: Manage the unmanaged data disks attached to a VM.
description: >-
  Azure Virtual Machines use disks as a place to store an operating system, applications, and data. All Azure virtual machines have at least two disks: An operating system disk, and a temporary disk. The operating system disk is created from an image, and both the operating system disk and the image are actually virtual hard disks (VHDs) stored in an Azure storage account. Virtual machines also can have one or more data disks, that are also stored as VHDs.


  Azure Managed and Unmanaged Data Disks have a maximum size of 4095 GB (with the exception of larger disks in preview). Azure Unmanaged Disks also have a maximum capacity of 4095 GB.


  For more information, see:

  - Azure Disks - https://docs.microsoft.com/azure/virtual-machines/linux/about-disks-and-vhds and https://docs.microsoft.com/azure/virtual-machines/windows/about-disks-and-vhds.

  - Larger Managed Disks in Public Preview - https://azure.microsoft.com/blog/introducing-the-public-preview-of-larger-managed-disks-sizes/

  - Ultra SSD Managed Disks in Public Preview - https://docs.microsoft.com/azure/virtual-machines/windows/disks-ultra-ssd.
directCommands:
- uid: az_vm_unmanaged-disk_attach
  name: az vm unmanaged-disk attach
  summary: Attach an unmanaged persistent disk to a VM.
  description: This allows for the preservation of data, even if the VM is reprovisioned due to maintenance or resizing.
  syntax: >-
    az vm unmanaged-disk attach --resource-group
                                --vm-name
                                [--caching {None, ReadOnly, ReadWrite}]
                                [--lun]
                                [--name]
                                [--new]
                                [--size-gb]
                                [--subscription]
                                [--vhd-uri]
  examples:
  - summary: Attach a new default sized (1023 GB) unmanaged data disk to a VM.
    syntax: az vm unmanaged-disk attach -g MyResourceGroup --vm-name MyVm --new
  - summary: Attach an existing data disk to a VM as unmanaged.
    syntax: >-
      az vm unmanaged-disk attach -g MyResourceGroup --vm-name MyVm --name MyDataDisk \
          --vhd-uri https://mystorage.blob.core.windows.net/vhds/d1.vhd
  - summary: Attach an unmanaged persistent disk to a VM. (autogenerated)
    syntax: az vm unmanaged-disk attach --name MyDataDisk --new --resource-group MyResourceGroup --size-gb 50 --vm-name MyVm
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --vm-name
    summary: The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
    description: ''
  optionalParameters:
  - name: --caching
    parameterValueGroup: None, ReadOnly, ReadWrite
    summary: Disk caching policy.
    description: ''
  - name: --lun
    summary: 0-based logical unit number (LUN). Max value depends on the Virtual Machine size.
    description: ''
  - name: --name -n
    summary: The data disk name.
    description: ''
  - name: --new
    summary: Create a new disk.
    description: ''
  - name: --size-gb -z
    defaultValue: "1023"
    summary: 'Size in GB. Max size: 4095 GB (certain preview disks can be larger).'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vhd-uri
    summary: 'Virtual hard disk URI. For example: https://mystorage.blob.core.windows.net/vhds/d1.vhd.'
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
- uid: az_vm_unmanaged-disk_detach
  name: az vm unmanaged-disk detach
  summary: Detach an unmanaged disk from a VM.
  description: ''
  syntax: >-
    az vm unmanaged-disk detach --name
                                --resource-group
                                --vm-name
                                [--subscription]
  examples:
  - summary: Detach a data disk from a VM.
    syntax: az vm unmanaged-disk detach -g MyResourceGroup --vm-name MyVm -n disk_name
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The data disk name.
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --vm-name
    summary: The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
    description: ''
  optionalParameters:
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
- uid: az_vm_unmanaged-disk_list
  name: az vm unmanaged-disk list
  summary: List unmanaged disks of a VM.
  description: ''
  syntax: >-
    az vm unmanaged-disk list --name
                              --resource-group
                              [--query-examples]
                              [--subscription]
  examples:
  - summary: List the unmanaged disks attached to a VM.
    syntax: az vm unmanaged-disk list -g MyResourceGroup --vm-name MyVm
  - summary: List unmanaged disks with names containing the string "data_disk".
    syntax: >-
      az vm unmanaged-disk list -g MyResourceGroup --vm-name MyVm \
          --query "[?contains(name, 'data_disk')]" --output table
  requiredParameters:
  - isRequired: true
    name: --name --vm-name -n
    summary: The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  optionalParameters:
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
commands:
- az_vm_unmanaged-disk_attach
- az_vm_unmanaged-disk_detach
- az_vm_unmanaged-disk_list
globalParameters:
- name: --debug
  summary: Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: Show this help message and exit.
- name: --only-show-errors
  summary: Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: json
  parameterValueGroup: json, jsonc, table, tsv
  summary: Output format.
- name: --query
  summary: JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --verbose
  summary: Increase logging verbosity. Use --debug for full debug logs.
metadata:
  doc_source_url_repo: https://github.com/Azure/azure-cli/blob/dev/
  ms.date: 06/23/2021
  description: >-
    Azure Virtual Machines use disks as a place to store an operating system, applications, and data. All Azure virtual machines have at least two disks: An operating system disk, and a temporary disk. The operating system disk is created from an image, and both the operating system disk and the image are actually virtual hard disks (VHDs) stored in an Azure storage account. Virtual machines also can have one or more data disks, that are also stored as VHDs.


    Azure Managed and Unmanaged Data Disks have a maximum size of 4095 GB (with the exception of larger disks in preview). Azure Unmanaged Disks also have a maximum capacity of 4095 GB.


    For more information, see:

    - Azure Disks - https://docs.microsoft.com/azure/virtual-machines/linux/about-disks-and-vhds and https://docs.microsoft.com/azure/virtual-machines/windows/about-disks-and-vhds.

    - Larger Managed Disks in Public Preview - https://azure.microsoft.com/blog/introducing-the-public-preview-of-larger-managed-disks-sizes/

    - Ultra SSD Managed Disks in Public Preview - https://docs.microsoft.com/azure/virtual-machines/windows/disks-ultra-ssd.
