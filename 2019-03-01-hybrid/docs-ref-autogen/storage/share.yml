### YamlMime:AzureCLIGroup
uid: az_storage_share
name: az storage share
summary: Manage file shares.
description: ''
directCommands:
- uid: az_storage_share_create
  name: az storage share create
  summary: Creates a new share under the specified account.
  description: ''
  syntax: >-
    az storage share create --name
                            [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--fail-on-exist]
                            [--metadata]
                            [--quota]
                            [--sas-token]
                            [--subscription]
                            [--timeout]
  examples:
  - summary: Creates a new share under the specified account. (autogenerated)
    syntax: az storage share create --account-name MyAccount --name MyFileShare
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --fail-on-exist
    summary: Specify whether to throw an exception when the share exists. False by default.
    description: ''
  - name: --metadata
    summary: Metadata in space-separated key=value pairs. This overwrites any existing metadata.
    description: ''
  - name: --quota
    summary: Specifies the maximum size of the share, in gigabytes. Must be greater than 0, and less than or equal to 5TB (5120).
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    summary: Request timeout in seconds. Applies to each call to the service.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_delete
  name: az storage share delete
  summary: Marks the specified share for deletion.
  description: If the share does not exist, the operation fails on the service. By  default, the exception is swallowed by the client. To expose the exception, specify True for fail_not_exist.
  syntax: >-
    az storage share delete --name
                            [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--delete-snapshots {include}]
                            [--fail-not-exist]
                            [--sas-token]
                            [--snapshot]
                            [--subscription]
                            [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --delete-snapshots
    parameterValueGroup: include
    summary: Specify the deletion strategy when the share has snapshots.
    description: ''
  - name: --fail-not-exist
    summary: Specify whether to throw an exception when the share doesn't exist. False by default.
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --snapshot
    summary: A string that represents the snapshot version, if applicable. Specify this argument to delete a specific snapshot only. delete_snapshots must be None if this is specified.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    summary: Request timeout in seconds. Applies to each call to the service.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_exists
  name: az storage share exists
  summary: Check for the existence of a file share.
  description: ''
  syntax: >-
    az storage share exists --name
                            [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--sas-token]
                            [--snapshot]
                            [--subscription]
                            [--timeout]
  examples:
  - summary: Check for the existence of a file share. (autogenerated)
    syntax: az storage share exists --account-key 00000000 --account-name MyAccount --name MyFileShare
  - summary: Check for the existence of a file share (autogenerated)
    syntax: az storage share exists --connection-string $connectionString --name MyFileShare
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --snapshot
    summary: A string that represents the snapshot version, if applicable.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    summary: Request timeout in seconds. Applies to each call to the service.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_generate-sas
  name: az storage share generate-sas
  summary: Generates a shared access signature for the share.
  description: ''
  syntax: >-
    az storage share generate-sas --name
                                  [--account-key]
                                  [--account-name]
                                  [--cache-control]
                                  [--connection-string]
                                  [--content-disposition]
                                  [--content-encoding]
                                  [--content-language]
                                  [--content-type]
                                  [--expiry]
                                  [--https-only]
                                  [--ip]
                                  [--permissions]
                                  [--policy-name]
                                  [--sas-token]
                                  [--start]
                                  [--subscription]
  examples:
  - summary: Generate a sas token for a fileshare and use it to upload a file.
    syntax: >-
      end=`date -u -d "30 minutes" '+%Y-%m-%dT%H:%MZ'`

      sas=`az storage share generate-sas -n MyShare --account-name MyStorageAccount --https-only --permissions dlrw --expiry $end -o tsv`

      az storage file upload -s MyShare --account-name MyStorageAccount --source file.txt  --sas-token $sas
  - summary: Generate a shared access signature for the share. (autogenerated)
    syntax: az storage share generate-sas --account-key 00000000 --account-name MyStorageAccount --expiry 2037-12-31T23:59:00Z --name MyShare --permissions dlrw
  - summary: Generate a shared access signature for the share. (autogenerated)
    syntax: az storage share generate-sas --connection-string $connectionString --expiry 2019-02-01T12:20Z --name MyShare --permissions dlrw
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --cache-control
    summary: Response header value for Cache-Control when resource is accessed using this shared access signature.
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --content-disposition
    summary: Response header value for Content-Disposition when resource is accessed using this shared access signature.
    description: ''
  - name: --content-encoding
    summary: Response header value for Content-Encoding when resource is accessed using this shared access signature.
    description: ''
  - name: --content-language
    summary: Response header value for Content-Language when resource is accessed using this shared access signature.
    description: ''
  - name: --content-type
    summary: Response header value for Content-Type when resource is accessed using this shared access signature.
    description: ''
  - name: --expiry
    summary: Specifies the UTC datetime (Y-m-d'T'H:M'Z') at which the SAS becomes invalid. Do not use if a stored access policy is referenced with --id that specifies this value.
    description: ''
  - name: --https-only
    summary: Only permit requests made with the HTTPS protocol. If omitted, requests from both the HTTP and HTTPS protocol are permitted.
    description: ''
  - name: --ip
    summary: Specifies the IP address or range of IP addresses from which to accept requests. Supports only IPv4 style addresses.
    description: ''
  - name: --permissions
    summary: 'The permissions the SAS grants. Allowed values: (d)elete (l)ist (r)ead (w)rite. Do not use if a stored access policy is referenced with --id that specifies this value. Can be combined.'
    description: ''
  - name: --policy-name
    summary: The name of a stored access policy within the share's ACL.
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --start
    summary: Specifies the UTC datetime (Y-m-d'T'H:M'Z') at which the SAS becomes valid. Do not use if a stored access policy is referenced with --id that specifies this value. Defaults to the time of the request.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_list
  name: az storage share list
  summary: List the file shares in a storage account.
  description: ''
  syntax: >-
    az storage share list [--account-key]
                          [--account-name]
                          [--connection-string]
                          [--include-metadata]
                          [--include-snapshots]
                          [--marker]
                          [--num-results]
                          [--prefix]
                          [--query-examples]
                          [--sas-token]
                          [--subscription]
                          [--timeout]
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --include-metadata
    summary: Specifies that share metadata be returned in the response.
    description: ''
  - name: --include-snapshots
    summary: Specifies that share snapshots be returned in the response.
    description: ''
  - name: --marker
    summary: An opaque continuation token. This value can be retrieved from the next_marker field of a previous generator object if num_results was specified and that generator has finished enumerating results. If specified, this generator will begin returning results from the point where the previous generator stopped.
    description: ''
  - name: --num-results
    defaultValue: "5000"
    summary: Specifies the maximum number of results to return. Provide "\*" to return all.
    description: ''
  - name: --prefix
    summary: Filters the results to return only shares whose names begin with the specified prefix.
    description: ''
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    summary: Request timeout in seconds. Applies to each call to the service.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_show
  name: az storage share show
  summary: Returns all user-defined metadata and system properties for the specified share.
  description: The data returned does not include the shares's list of files or directories.
  syntax: >-
    az storage share show --name
                          [--account-key]
                          [--account-name]
                          [--connection-string]
                          [--query-examples]
                          [--sas-token]
                          [--snapshot]
                          [--subscription]
                          [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --snapshot
    summary: A string that represents the snapshot version, if applicable.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    summary: Request timeout in seconds. Applies to each call to the service.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_snapshot
  name: az storage share snapshot
  summary: Creates a snapshot of an existing share under the specified account.
  description: ''
  syntax: >-
    az storage share snapshot --name
                              [--account-key]
                              [--account-name]
                              [--connection-string]
                              [--metadata]
                              [--quota]
                              [--sas-token]
                              [--subscription]
                              [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --metadata
    summary: Metadata in space-separated key=value pairs. This overwrites any existing metadata.
    description: ''
  - name: --quota
    summary: Specifies the maximum size of the share, in gigabytes. Must be greater than 0, and less than or equal to 5TB (5120).
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    summary: Request timeout in seconds. Applies to each call to the service.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_stats
  name: az storage share stats
  summary: Gets the approximate size of the data stored on the share, rounded up to the nearest gigabyte.
  description: Note that this value may not include all recently created or recently resized files.
  syntax: >-
    az storage share stats --name
                           [--account-key]
                           [--account-name]
                           [--connection-string]
                           [--sas-token]
                           [--subscription]
                           [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    summary: Request timeout in seconds. Applies to each call to the service.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_update
  name: az storage share update
  summary: Sets service-defined properties for the specified share.
  description: ''
  syntax: >-
    az storage share update --name
                            --quota
                            [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--sas-token]
                            [--subscription]
                            [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  - isRequired: true
    name: --quota
    summary: Specifies the maximum size of the share, in gigabytes. Must be greater than 0, and less than or equal to 5 TB (5120 GB).
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    summary: Request timeout in seconds. Applies to each call to the service.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
- uid: az_storage_share_url
  name: az storage share url
  summary: Create a URI to access a file share.
  description: ''
  syntax: >-
    az storage share url --name
                         [--account-key]
                         [--account-name]
                         [--connection-string]
                         [--protocol {http, https}]
                         [--sas-token]
                         [--subscription]
                         [--unc]
  examples:
  - summary: Create a URI to access a file share. (autogenerated)
    syntax: az storage share url --account-key 00000000 --account-name MyAccount --name MyFileShare
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: The file share name.
    description: ''
  optionalParameters:
  - name: --account-key
    summary: 'Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.'
    description: ''
  - name: --account-name
    summary: 'Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.'
    description: ''
  - name: --connection-string
    summary: 'Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.'
    description: ''
  - name: --protocol
    defaultValue: https
    parameterValueGroup: http, https
    summary: Protocol to use.
    description: ''
  - name: --sas-token
    summary: 'A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --unc
    summary: Output UNC network path.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
commands:
- az_storage_share_create
- az_storage_share_delete
- az_storage_share_exists
- az_storage_share_generate-sas
- az_storage_share_list
- az_storage_share_metadata
- az_storage_share_metadata_show
- az_storage_share_metadata_update
- az_storage_share_policy
- az_storage_share_policy_create
- az_storage_share_policy_delete
- az_storage_share_policy_list
- az_storage_share_policy_show
- az_storage_share_policy_update
- az_storage_share_show
- az_storage_share_snapshot
- az_storage_share_stats
- az_storage_share_update
- az_storage_share_url
globalParameters:
- name: --debug
  summary: Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: Show this help message and exit.
- name: --only-show-errors
  summary: Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: json
  parameterValueGroup: json, jsonc, table, tsv
  summary: Output format.
- name: --query
  summary: JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --verbose
  summary: Increase logging verbosity. Use --debug for full debug logs.
metadata:
  doc_source_url_repo: https://github.com/Azure/azure-cli/blob/dev/
  ms.date: 07/01/2021
  description: Manage file shares.
