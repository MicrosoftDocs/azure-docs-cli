### YamlMime:AzureCLIGroup
uid: az_dataprotection_backup-instance
name: az dataprotection backup-instance
extensionInformation: >-
  > [!Note]

  > This reference is part of the **dataprotection** extension for the Azure CLI  (version 2.49.0 or higher).  The extension will automatically install the first time you run an **az dataprotection backup-instance** command.  [Learn more](https://docs.microsoft.com/en-us/cli/azure/azure-cli-extensions-overview) about extensions.
summary: Manage backup instance with dataprotection.
description: ''
directCommands:
- uid: az_dataprotection_backup-instance_adhoc-backup
  name: az dataprotection backup-instance adhoc-backup
  summary: Trigger adhoc backup.
  description: ''
  syntax: >-
    az dataprotection backup-instance adhoc-backup --rule-name
                                                   [--backup-instance-name]
                                                   [--ids]
                                                   [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                                   [--resource-group]
                                                   [--retention-tag-override]
                                                   [--subscription]
                                                   [--vault-name]
  examples:
  - summary: Trigger Adhoc Backup
    syntax: az dataprotection backup-instance adhoc-backup --name "testInstance1" --rule-name "BackupWeekly" --retention-tag-override "yearly" --resource-group "000pikumar" --vault-name "PratikPrivatePreviewVault1"
  requiredParameters:
  - isRequired: true
    name: --rule-name
    summary: Specify backup policy rule name.
    description: ''
  optionalParameters:
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --retention-tag-override
    summary: Specify retention override tag.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_create
  name: az dataprotection backup-instance create
  summary: Configure backup for a resource in a backup vault.
  description: ''
  syntax: >-
    az dataprotection backup-instance create --backup-instance
                                             --resource-group
                                             --vault-name
                                             [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
  examples:
  - summary: create a backup instance in a backup vault
    syntax: az dataprotection backup-instance create -g MyResourceGroup --vault-name MyVault --backup-instance backupinstance.json
  requiredParameters:
  - isRequired: true
    name: --backup-instance
    summary: Request backup instance object for operation.  Support json-file and yaml-file.
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --vault-name
    summary: The name of the backup vault.
    description: ''
  optionalParameters:
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: Do not wait for the long-running operation to finish.
    description: ''
- uid: az_dataprotection_backup-instance_delete
  name: az dataprotection backup-instance delete
  summary: Delete a backup instance in a backup vault.
  description: ''
  syntax: >-
    az dataprotection backup-instance delete [--backup-instance-name]
                                             [--ids]
                                             [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                             [--resource-group]
                                             [--subscription]
                                             [--vault-name]
                                             [--yes]
  examples:
  - summary: Delete BackupInstance
    syntax: az dataprotection backup-instance delete --name "testInstance1" --resource-group "000pikumar" --vault-name "PratikPrivatePreviewVault1"
  optionalParameters:
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
  - name: --yes -y
    defaultValue: "False"
    summary: Do not prompt for confirmation.
    description: ''
- uid: az_dataprotection_backup-instance_initialize
  name: az dataprotection backup-instance initialize
  summary: Initialize JSON request body for configuring backup of a resource.
  description: ''
  syntax: >-
    az dataprotection backup-instance initialize --datasource-id
                                                 --datasource-location
                                                 --datasource-type {AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService}
                                                 --policy-id
                                                 [--backup-configuration]
                                                 [--friendly-name]
                                                 [--secret-store-type {AzureKeyVault}]
                                                 [--secret-store-uri]
                                                 [--snapshot-resource-group-name]
                                                 [--tags]
  examples:
  - summary: Initialize backup instance request for Azure Disk
    syntax: az dataprotection backup-instance initialize --datasource-type AzureDisk -l southeastasia --policy-id {disk_policy_id} --datasource-id {disk_id}
  requiredParameters:
  - isRequired: true
    name: --datasource-id
    summary: ARM Id of the resource to be backed up.
    description: ''
  - isRequired: true
    name: --datasource-location -l
    summary: 'Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.'
    description: ''
  - isRequired: true
    name: --datasource-type
    parameterValueGroup: "AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService"
    summary: Specify the datasource type of the resource to be backed up.
    description: ''
  - isRequired: true
    name: --policy-id
    summary: Id of the backup policy the datasource will be associated.
    description: ''
  optionalParameters:
  - name: --backup-configuration
    summary: Backup configuration for backup. Use this parameter to configure protection for AzureKubernetesService.
    description: ''
  - name: --friendly-name
    summary: User-defined friendly name for the backup instance.
    description: ''
  - name: --secret-store-type
    parameterValueGroup: "AzureKeyVault"
    summary: Specify the secret store type to use for authentication.
    description: ''
  - name: --secret-store-uri
    summary: Specify the secret store uri to use for authentication.
    description: ''
  - name: --snapshot-resource-group-name --snapshot-rg
    summary: Name of the resource group in which the backup snapshots should be stored.
    description: ''
  - name: --tags
    summary: 'Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.'
    description: ''
- uid: az_dataprotection_backup-instance_initialize-backupconfig
  name: az dataprotection backup-instance initialize-backupconfig
  summary: Initialize JSON request body for initializing and configuring backup of an AzureKubernetesService resource.
  description: ''
  syntax: >-
    az dataprotection backup-instance initialize-backupconfig --datasource-type {AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService}
                                                              [--excluded-namespaces]
                                                              [--excluded-resource-type]
                                                              [--include-cluster-scope {false, true}]
                                                              [--included-namespaces]
                                                              [--included-resource-type]
                                                              [--label-selectors]
                                                              [--snapshot-volumes {false, true}]
  examples:
  - summary: Initialize backup configuration
    syntax: az dataprotection backup-instance initialize-backupconfig --datasource-type AzureKubernetesService --label-selectors key=val foo=bar --excluded-namespaces excludeNS1 excludeNS2
  requiredParameters:
  - isRequired: true
    name: --datasource-type
    parameterValueGroup: "AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService"
    summary: Specify the datasource type of the resource to be backed up.
    description: ''
  optionalParameters:
  - name: --excluded-namespaces
    summary: List of namespaces to be excluded for backup.
    description: ''
  - name: --excluded-resource-type --excluded-resource-types
    summary: List of resource types to be excluded for backup.
    description: ''
  - name: --include-cluster-scope --include-cluster-scope-resources
    parameterValueGroup: "false, true"
    summary: Boolean parameter to decide whether cluster scope resources are included for restore. By default this is taken as true.
    description: ''
  - name: --included-namespaces
    summary: List of namespaces to be included for backup.
    description: ''
  - name: --included-resource-type --included-resource-types
    summary: List of resource types to be included for backup.
    description: ''
  - name: --label-selectors
    summary: List of labels for internal filtering for backup.
    description: ''
  - name: --snapshot-volumes
    parameterValueGroup: "false, true"
    summary: Boolean parameter to decide whether snapshot volumes are included for backup. By default this is taken as true.
    description: ''
- uid: az_dataprotection_backup-instance_initialize-restoreconfig
  name: az dataprotection backup-instance initialize-restoreconfig
  summary: Initialize JSON request body for initializing and configuring restore of an AzureKubernetesService resource.
  description: ''
  syntax: >-
    az dataprotection backup-instance initialize-restoreconfig --datasource-type {AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService}
                                                               [--conflict-policy {Patch, Skip}]
                                                               [--excluded-namespaces]
                                                               [--excluded-resource-type]
                                                               [--include-cluster-scope {false, true}]
                                                               [--included-namespaces]
                                                               [--included-resource-type]
                                                               [--label-selectors]
                                                               [--namespace-mappings]
                                                               [--persistent-restoremode {RestoreWithVolumeData, RestoreWithoutVolumeData}]
  examples:
  - summary: Initialize restore configuration
    syntax: az dataprotection backup-instance initialize-restoreconfig --datasource-type AzureKubernetesService
  requiredParameters:
  - isRequired: true
    name: --datasource-type
    parameterValueGroup: "AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService"
    summary: Specify the datasource type of the resource to be backed up.
    description: ''
  optionalParameters:
  - name: --conflict-policy
    parameterValueGroup: "Patch, Skip"
    summary: Conflict policy for restore. Allowed values are Skip, Patch. Default value is Skip.
    description: ''
  - name: --excluded-namespaces
    summary: List of namespaces to be excluded for restore.
    description: ''
  - name: --excluded-resource-type --excluded-resource-types
    summary: List of resource types to be excluded for restore.
    description: ''
  - name: --include-cluster-scope --include-cluster-scope-resources
    parameterValueGroup: "false, true"
    summary: Boolean parameter to decide whether cluster scope resources are included for restore. By default this is taken as true.
    description: ''
  - name: --included-namespaces
    summary: List of namespaces to be included for restore.
    description: ''
  - name: --included-resource-type --included-resource-types
    summary: List of resource types to be included for restore.
    description: ''
  - name: --label-selectors
    summary: List of labels for internal filtering for restore.
    description: ''
  - name: --namespace-mappings
    summary: Namespaces mapping from source namespaces to target namespaces to resolve namespace naming conflicts in the target cluster.
    description: ''
  - name: --persistent-restoremode --persistent-volume-restore-mode
    parameterValueGroup: "RestoreWithVolumeData, RestoreWithoutVolumeData"
    summary: Restore mode for persistent volumes. Allowed values are RestoreWithVolumeData, RestoreWithoutVolumeData. Default value is RestoreWithVolumeData.
    description: ''
- uid: az_dataprotection_backup-instance_list
  name: az dataprotection backup-instance list
  summary: Gets backup instances belonging to a backup vault.
  description: ''
  syntax: >-
    az dataprotection backup-instance list --resource-group
                                           --vault-name
  examples:
  - summary: List backup instances in a vault
    syntax: az dataprotection backup-instance list --resource-group "000pikumar" --vault-name "PratikPrivatePreviewVault1"
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_list-from-resourcegraph
  name: az dataprotection backup-instance list-from-resourcegraph
  summary: List backup instances across subscriptions, resource groups and vaults.
  description: ''
  syntax: >-
    az dataprotection backup-instance list-from-resourcegraph --datasource-type {AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService}
                                                              [--datasource-id]
                                                              [--protection-status {ProtectionConfigured, ProtectionError}]
                                                              [--resource-groups]
                                                              [--subscriptions]
                                                              [--vaults]
  examples:
  - summary: list backup instances across multiple vaults across multiple resource groups
    syntax: az dataprotection backup-instance list-from-resourcegraph --resource-groups resourceGroup1 resourceGroup2 --vaults vault1 vault2 --datasource-type AzureBlob
  - summary: list backup instances in a vault which are in a protection error state.
    syntax: az dataprotection backup-instance list-from-resourcegraph --resource-groups resourceGroup --vaults vault --protection-status ProtectionError --datasource-type AzureDisk
  requiredParameters:
  - isRequired: true
    name: --datasource-type
    parameterValueGroup: "AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService"
    summary: Specify the datasource type.
    description: ''
  optionalParameters:
  - name: --datasource-id
    summary: Specify datasource id filter to apply.
    description: ''
  - name: --protection-status
    parameterValueGroup: "ProtectionConfigured, ProtectionError"
    summary: Specify protection status.
    description: ''
  - name: --resource-groups
    summary: List of resource groups.
    description: ''
  - name: --subscriptions
    summary: List of subscription Ids.
    description: ''
  - name: --vaults
    summary: List of vault names.
    description: ''
- uid: az_dataprotection_backup-instance_resume-protection
  name: az dataprotection backup-instance resume-protection
  summary: This operation will resume protection for a stopped backup instance.
  description: ''
  syntax: >-
    az dataprotection backup-instance resume-protection [--backup-instance-name]
                                                        [--ids]
                                                        [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                                        [--resource-group]
                                                        [--subscription]
                                                        [--vault-name]
  examples:
  - summary: Resume protection
    syntax: az dataprotection backup-instance resume-protection --name "testbi" --resource-group "testrg" --vault-name "testvault"
  optionalParameters:
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_show
  name: az dataprotection backup-instance show
  summary: Get a backup instance with name in a backup vault.
  description: ''
  syntax: >-
    az dataprotection backup-instance show [--backup-instance-name]
                                           [--ids]
                                           [--resource-group]
                                           [--subscription]
                                           [--vault-name]
  examples:
  - summary: Get BackupInstance
    syntax: az dataprotection backup-instance show --name "testInstance1" --resource-group "000pikumar" --vault-name "PratikPrivatePreviewVault1"
  optionalParameters:
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_stop-protection
  name: az dataprotection backup-instance stop-protection
  summary: This operation will stop protection of a backup instance and data will be held forever.
  description: ''
  syntax: >-
    az dataprotection backup-instance stop-protection [--backup-instance-name]
                                                      [--ids]
                                                      [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                                      [--resource-group]
                                                      [--subscription]
                                                      [--vault-name]
  examples:
  - summary: Stop protection
    syntax: az dataprotection backup-instance stop-protection --name "testbi" --resource-group "testrg" --vault-name "testvault"
  optionalParameters:
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_suspend-backup
  name: az dataprotection backup-instance suspend-backup
  summary: This operation will stop backup for a backup instance and retains the backup data as per the policy (except latest Recovery point, which will be retained forever).
  description: ''
  syntax: >-
    az dataprotection backup-instance suspend-backup [--backup-instance-name]
                                                     [--ids]
                                                     [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                                     [--resource-group]
                                                     [--subscription]
                                                     [--vault-name]
  examples:
  - summary: Suspend backups
    syntax: az dataprotection backup-instance suspend-backup --name "testbi" --resource-group "testrg" --vault-name "testvault"
  optionalParameters:
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_update
  name: az dataprotection backup-instance update
  summary: Update a backup instance in a backup vault.
  description: ''
  syntax: >-
    az dataprotection backup-instance update [--add]
                                             [--backup-instance-name]
                                             [--data-source-info]
                                             [--data-source-set-info]
                                             [--datasource-auth-credentials]
                                             [--force-string {0, 1, f, false, n, no, t, true, y, yes}]
                                             [--friendly-name]
                                             [--ids]
                                             [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                             [--object-type]
                                             [--policy-info]
                                             [--remove]
                                             [--resource-group]
                                             [--set]
                                             [--subscription]
                                             [--tags]
                                             [--validation-type {DeepValidation, ShallowValidation}]
                                             [--vault-name]
  optionalParameters:
  - name: --add
    summary: 'Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.'
    description: ''
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --data-source-info
    summary: Gets or sets the data source information.  Support shorthand-syntax, json-file and yaml-file. Try `??` to show more.
    description: ''
  - name: --data-source-set-info
    summary: Gets or sets the data source set information.  Support shorthand-syntax, json-file and yaml-file. Try `??` to show more.
    description: ''
  - name: --datasource-auth-credentials --datasource-auth-creds
    summary: Credentials to use to authenticate with data source provider.  Support shorthand-syntax, json-file and yaml-file. Try `??` to show more.
    description: ''
  - name: --force-string
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
    description: ''
  - name: --friendly-name
    summary: Gets or sets the Backup Instance friendly name.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --object-type
    summary: Type of Backup or Restore Instance for request body.
    description: ''
  - name: --policy-info
    summary: Gets or sets the policy information.  Support shorthand-syntax, json-file and yaml-file. Try `??` to show more.
    description: ''
  - name: --remove
    summary: 'Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.'
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --set
    summary: 'Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --tags
    summary: Proxy Resource tags.  Support shorthand-syntax, json-file and yaml-file. Try `??` to show more.
    description: ''
  - name: --validation-type
    parameterValueGroup: "DeepValidation, ShallowValidation"
    summary: Specifies the type of validation. In case of DeepValidation, all validations from /validateForBackup API will run again.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_update-msi-permissions
  name: az dataprotection backup-instance update-msi-permissions
  summary: Assign the required permissions needed to successfully enable backup for the datasource.
  description: ''
  syntax: >-
    az dataprotection backup-instance update-msi-permissions --datasource-type {AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService}
                                                             --operation {Backup, Restore}
                                                             --permissions-scope {Resource, ResourceGroup, Subscription}
                                                             --resource-group
                                                             --vault-name
                                                             [--backup-instance]
                                                             [--keyvault-id]
                                                             [--restore-request-object]
                                                             [--snapshot-resource-group-id]
                                                             [--yes]
  examples:
  - summary: Assign the required permissions needed to successfully enable backup for the datasource.
    syntax: az dataprotection backup-instance update-msi-permissions --backup-instance backup_inst.json --resource-group samarth_resource_group --vault-name samarthbackupvault --datasource-type AzureDisk --operation Backup --permissions-scope ResourceGroup
  - summary: Assign the required permissions needed to successfully enable restore for the datasource.
    syntax: az dataprotection backup-instance update-msi-permissions --datasource-type AzureKubernetesService --operation Restore --permissions-scope Resource --resource-group sampleRG --vault-name samplevault --restore-request-object aksrestore.json --snapshot-resource-group-id /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/sampleRG
  requiredParameters:
  - isRequired: true
    name: --datasource-type
    parameterValueGroup: "AzureBlob, AzureDatabaseForPostgreSQL, AzureDisk, AzureKubernetesService"
    summary: Specify the datasource type of the resource to be backed up.
    description: ''
  - isRequired: true
    name: --operation
    parameterValueGroup: "Backup, Restore"
    summary: List of possible operations.
    description: ''
  - isRequired: true
    name: --permissions-scope
    parameterValueGroup: "Resource, ResourceGroup, Subscription"
    summary: Scope for assigning permissions to the backup vault.
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --vault-name
    summary: Name of the vault.
    description: ''
  optionalParameters:
  - name: --backup-instance
    summary: 'Request body for operation "Backup" Expected value: json-string/@json-file. Required when --operation is Backup.'
    description: ''
  - name: --keyvault-id
    summary: ARM id of the key vault. Required when --datasource-type is AzureDatabaseForPostgreSQL.
    description: ''
  - name: --restore-request-object
    summary: 'Request body for operation "Restore" Expected value: json-string/@json-file. Required when --operation is Restore.'
    description: ''
  - name: --snapshot-resource-group-id --snapshot-rg-id
    summary: ARM id of the snapshot resource group. Required when assigning permissions over snapshot resource group and the --operation is Restore.
    description: ''
  - name: --yes -y
    defaultValue: "False"
    summary: Do not prompt for confirmation.
    description: ''
- uid: az_dataprotection_backup-instance_update-policy
  name: az dataprotection backup-instance update-policy
  summary: Update backup policy associated with backup instance.
  description: ''
  syntax: >-
    az dataprotection backup-instance update-policy --backup-instance-name
                                                    --policy-id
                                                    --resource-group
                                                    --vault-name
                                                    [--no-wait]
  examples:
  - summary: Update backup policy associated with backup instance
    syntax: az dataprotection backup-instance update-policy --backup-instance-name MyDisk1 --policy-id {policy_id} -g MyResourceGroup --vault-name MyVault
  requiredParameters:
  - isRequired: true
    name: --backup-instance-name
    summary: Backup instance name.
    description: ''
  - isRequired: true
    name: --policy-id
    summary: Specify the ID of the new policy with which backup instance will be associated with.
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - isRequired: true
    name: --vault-name
    summary: Name of the vault.
    description: ''
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running operation to finish.
    description: ''
- uid: az_dataprotection_backup-instance_validate-for-backup
  name: az dataprotection backup-instance validate-for-backup
  summary: Validate whether configure backup will be successful or not.
  description: ''
  syntax: >-
    az dataprotection backup-instance validate-for-backup --backup-instance
                                                          [--ids]
                                                          [--no-wait]
                                                          [--resource-group]
                                                          [--subscription]
                                                          [--vault-name]
  examples:
  - summary: Validate for backup
    syntax: az dataprotection backup-instance validate-for-backup -g sarath-rg --vault-name sarath-vault --backup-instance backup_instance.json
  requiredParameters:
  - isRequired: true
    name: --backup-instance
    summary: 'Request body for operation Expected value: json-string/@json-file.'
    description: ''
  optionalParameters:
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --no-wait
    defaultValue: "False"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_validate-for-restore
  name: az dataprotection backup-instance validate-for-restore
  summary: Validates if restore can be triggered for a datasource.
  description: ''
  syntax: >-
    az dataprotection backup-instance validate-for-restore --restore-request-object
                                                           [--backup-instance-name]
                                                           [--ids]
                                                           [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                                           [--resource-group]
                                                           [--subscription]
                                                           [--vault-name]
  examples:
  - summary: Validate Restore
    syntax: az az dataprotection backup-instance validate-for-restore --name "testInstance1" --restore-request-object "restoreRequest.json" --resource-group "000pikumar" --vault-name "PratikPrivatePreviewVault1"
  requiredParameters:
  - isRequired: true
    name: --restore-request-object
    summary: Gets or sets the restore request object.  Support json-file and yaml-file.
    description: ''
  optionalParameters:
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
- uid: az_dataprotection_backup-instance_wait
  name: az dataprotection backup-instance wait
  summary: Place the CLI in a waiting state until a condition is met.
  description: ''
  syntax: >-
    az dataprotection backup-instance wait [--backup-instance-name]
                                           [--created]
                                           [--custom]
                                           [--deleted]
                                           [--exists]
                                           [--ids]
                                           [--interval]
                                           [--resource-group]
                                           [--subscription]
                                           [--timeout]
                                           [--updated]
                                           [--vault-name]
  optionalParameters:
  - name: --backup-instance-name --name -n
    summary: The name of the backup instance.
    description: ''
  - name: --created
    defaultValue: "False"
    summary: Wait until created with 'provisioningState' at 'Succeeded'.
    description: ''
  - name: --custom
    summary: Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
    description: ''
  - name: --deleted
    defaultValue: "False"
    summary: Wait until deleted.
    description: ''
  - name: --exists
    defaultValue: "False"
    summary: Wait until the resource exists.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --interval
    defaultValue: "30"
    summary: Polling interval in seconds.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    defaultValue: "3600"
    summary: Maximum wait in seconds.
    description: ''
  - name: --updated
    defaultValue: "False"
    summary: Wait until updated with provisioningState at 'Succeeded'.
    description: ''
  - name: --vault-name
    summary: The name of the backup vault.
    description: ''
commands:
- az_dataprotection_backup-instance_adhoc-backup
- az_dataprotection_backup-instance_create
- az_dataprotection_backup-instance_delete
- az_dataprotection_backup-instance_initialize
- az_dataprotection_backup-instance_initialize-backupconfig
- az_dataprotection_backup-instance_initialize-restoreconfig
- az_dataprotection_backup-instance_list
- az_dataprotection_backup-instance_list-from-resourcegraph
- az_dataprotection_backup-instance_restore
- az_dataprotection_backup-instance_restore_initialize-for-data-recovery
- az_dataprotection_backup-instance_restore_initialize-for-data-recovery-as-files
- az_dataprotection_backup-instance_restore_initialize-for-item-recovery
- az_dataprotection_backup-instance_restore_trigger
- az_dataprotection_backup-instance_resume-protection
- az_dataprotection_backup-instance_show
- az_dataprotection_backup-instance_stop-protection
- az_dataprotection_backup-instance_suspend-backup
- az_dataprotection_backup-instance_update
- az_dataprotection_backup-instance_update-msi-permissions
- az_dataprotection_backup-instance_update-policy
- az_dataprotection_backup-instance_validate-for-backup
- az_dataprotection_backup-instance_validate-for-restore
- az_dataprotection_backup-instance_wait
globalParameters:
- name: --debug
  summary: Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: Show this help message and exit.
- name: --only-show-errors
  summary: Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, table, tsv"
  summary: Output format.
- name: --query
  summary: JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: Increase logging verbosity. Use --debug for full debug logs.
metadata:
  description: Manage backup instance with dataprotection.
