### YamlMime:AzureCLIGroup
uid: az_networkcloud_cluster
name: az networkcloud cluster
extensionInformation: >-
  > [!NOTE]

  > This reference is part of the **networkcloud** extension for the Azure CLI (version 2.49.0 or higher). The extension will automatically install the first time you run an **az networkcloud cluster** command. [Learn more](https://learn.microsoft.com/cli/azure/azure-cli-extensions-overview) about extensions.
summary: |-
  Manage cluster.
status: GA
sourceType: Extension
directCommands:
- uid: az_networkcloud_cluster_create
  name: az networkcloud cluster create
  summary: |-
    Create a new cluster or update the properties of the cluster if it exists.
  status: GA
  sourceType: Extension
  syntax: >-
    az networkcloud cluster create --aggregator-or-single-rack-definition
                                   --cluster-name
                                   --cluster-type {MultiRack, SingleRack}
                                   --cluster-version
                                   --extended-location
                                   --network-fabric-id
                                   --resource-group
                                   [--analytics-workspace-id]
                                   [--cluster-location]
                                   [--cluster-service-principal]
                                   [--compute-deployment-threshold]
                                   [--compute-rack-definitions]
                                   [--location]
                                   [--managed-resource-group-configuration]
                                   [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                   [--tags]
  examples:
  - summary: |-
      Create or update single rack cluster
    syntax: az networkcloud cluster create --name "clusterName" -g "resourceGroupName" --extended-location name="/subscriptions/subscriptionId/resourceGroups/resourceGroupName/providers/Microsoft.ExtendedLocation/customLocations/clusterManagerExtendedLocationName" type="CustomLocation" --location "eastus" --analytics-workspace-id "/subscriptions/subscriptionId/resourceGroups/resourceGroupName/providers/microsoft.operationalInsights/workspaces/logAnalyticsWorkspaceName" --cluster-location "Foo Street, 3rd Floor, row 9" --cluster-service-principal application-id="12345678-1234-1234-1234-123456789012" password="password" principal-id="00000008-0004-0004-0004-000000000012" tenant-id="80000000-4000-4000-4000-120000000000" --cluster-type "SingleRack" --cluster-version "3.0.0" --compute-deployment-threshold type="PercentSuccess" grouping="PerCluster" value=90  --network-fabric-id "/subscriptions/subscriptionId/resourceGroups/resourceGroupName/providers/Microsoft.Network/virtualNetworks/test-vnet/subnets/default" --aggregator-or-single-rack-definition network-rack-id="/subscriptions/subscriptionId/resourceGroups/rgName/providers/Microsoft.Network/virtualNetworks/cmName/subnets/ClusterManagerSubnet" rack-sku-id="/subscriptions/subscriptionId/providers/Microsoft.NetworkCloud/rackSkus/VLab_Single_DellR750_8C2M_x70r3_9" rack-serial-number=b99m99r1 rack-location='b99m99r1' availability-zone=1 storage-appliance-configuration-data="[{rackSlot:1,adminCredentials:{username:'adminuser',password:'password'},storageApplianceName:name,serialNumber:serial}]" bare-metal-machine-configuration-data="[{bmcCredentials:{password:'bmcPassword',username:'root'},bmcMacAddress:'AA:BB:CC:DD:E7:08',bootMacAddress:'AA:BB:CC:F8:71:2E',machineName:lab00r750wkr1,rackSlot:2,serialNumber:5HS7PK3},{bmcCredentials:{password:'bmcPassword',username:'root'},bmcMacAddress:'AA:BB:CC:FD:DC:76',bootMacAddress:'AA:BB:CC:F8:50:CA',machineName:lab00r750wkr8,rackSlot:11,serialNumber:9M56PK3}]" --tags key1="myvalue1" key2="myvalue2"
  - summary: |-
      Create or update single rack cluster using json file input
    syntax: az networkcloud cluster create --name "clusterName" -g "resourceGroupName" --extended-location name="/subscriptions/subscriptionId/resourceGroups/resourceGroupName/providers/Microsoft.ExtendedLocation/customLocations/clusterManagerExtendedLocationName" type="CustomLocation" --location "eastus" --analytics-workspace-id "/subscriptions/subscriptionId/resourceGroups/resourceGroupName/providers/microsoft.operationalInsights/workspaces/logAnalyticsWorkspaceName" --cluster-location "Foo Street, 3rd Floor, row 9" --cluster-service-principal application-id="12345678-1234-1234-1234-123456789012" password="password" principal-id="00000008-0004-0004-0004-000000000012" tenant-id="80000000-4000-4000-4000-120000000000" --cluster-type "SingleRack" --cluster-version "3.0.0" --compute-deployment-threshold type="PercentSuccess" grouping="PerCluster" value=90  --network-fabric-id "/subscriptions/subscriptionId/resourceGroups/resourceGroupName/providers/Microsoft.Network/virtualNetworks/test-vnet/subnets/default" --aggregator-or-single-rack-definition ./aggregator-or-single-rack-definition.json --tags key1="myvalue1" key2="myvalue2
  requiredParameters:
  - isRequired: true
    name: --aggregator-or-single-rack-definition
    summary: |-
      The rack definition that is intended to reflect only a single rack in a single rack cluster, or an aggregator rack in a multi-rack cluster.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - isRequired: true
    name: --cluster-name --name -n
    summary: |-
      The name of the cluster.
  - isRequired: true
    name: --cluster-type
    parameterValueGroup: "MultiRack, SingleRack"
    summary: |-
      The type of rack configuration for the cluster.
  - isRequired: true
    name: --cluster-version
    summary: |-
      The current runtime version of the cluster.
  - isRequired: true
    name: --extended-location
    summary: |-
      The extended location of the cluster manager associated with the cluster.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - isRequired: true
    name: --network-fabric-id
    summary: |-
      The resource ID of the Network Fabric associated with the cluster.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --analytics-workspace-id
    summary: |-
      The resource ID of the Log Analytics Workspace that will be used for storing relevant logs.
  - name: --cluster-location
    summary: |-
      The customer-provided location information to identify where the cluster resides.
  - name: --cluster-service-principal
    summary: |-
      The service principal to be used by the cluster during Arc Appliance installation.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --compute-deployment-threshold
    summary: |-
      The validation threshold indicating the allowable failures of compute machines during environment validation and deployment.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --compute-rack-definitions
    summary: |-
      The list of rack definitions for the compute racks in a multi-rack cluster, or an empty list in a single-rack cluster.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --location -l
    summary: |-
      The geo-location where the resource lives  When not specified, the location of the resource group will be used.
  - name: --managed-resource-group-configuration
    summary: |-
      The configuration of the managed resource group associated with the resource.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --tags
    summary: |-
      Resource tags.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
- uid: az_networkcloud_cluster_delete
  name: az networkcloud cluster delete
  summary: |-
    Delete the provided cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az networkcloud cluster delete [--cluster-name]
                                   [--ids]
                                   [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                   [--resource-group]
                                   [--subscription]
                                   [--yes]
  examples:
  - summary: |-
      Delete cluster
    syntax: az networkcloud cluster delete --name "clusterName" --resource-group "resourceGroupName"
  optionalParameters:
  - name: --cluster-name --name -n
    summary: |-
      The name of the cluster.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --yes -y
    defaultValue: "False"
    summary: |-
      Do not prompt for confirmation.
- uid: az_networkcloud_cluster_deploy
  name: az networkcloud cluster deploy
  summary: |-
    Deploy the cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az networkcloud cluster deploy [--cluster-name]
                                   [--ids]
                                   [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                   [--resource-group]
                                   [--skip-validations-for-machines]
                                   [--subscription]
  examples:
  - summary: |-
      Deploy cluster
    syntax: az networkcloud cluster deploy --name "clusterName" --resource-group "resourceGroupName"
  optionalParameters:
  - name: --cluster-name --name -n
    summary: |-
      The name of the cluster.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --skip-validations-for-machines
    summary: |-
      The names of bare metal machines in the cluster that should be skipped during environment validation.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_networkcloud_cluster_list
  name: az networkcloud cluster list
  summary: |-
    List clusters in the provided resource group or subscription.
  status: GA
  sourceType: Extension
  syntax: az networkcloud cluster list [--resource-group]
  examples:
  - summary: |-
      List clusters for resource group
    syntax: az networkcloud cluster list --resource-group "resourceGroupName"
  - summary: |-
      List clusters for subscription
    syntax: az networkcloud cluster list
  optionalParameters:
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_networkcloud_cluster_show
  name: az networkcloud cluster show
  summary: |-
    Get properties of the provided cluster.
  status: GA
  sourceType: Extension
  syntax: >-
    az networkcloud cluster show [--cluster-name]
                                 [--ids]
                                 [--resource-group]
                                 [--subscription]
  examples:
  - summary: |-
      Get cluster
    syntax: az networkcloud cluster show --name "clusterName" --resource-group "resourceGroupName"
  optionalParameters:
  - name: --cluster-name --name -n
    summary: |-
      The name of the cluster.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_networkcloud_cluster_update
  name: az networkcloud cluster update
  summary: |-
    Update the properties of the provided cluster, or update the tags associated with the cluster. Properties and tag updates can be done independently.
  status: GA
  sourceType: Extension
  syntax: >-
    az networkcloud cluster update [--aggregator-or-single-rack-definition]
                                   [--cluster-location]
                                   [--cluster-name]
                                   [--cluster-service-principal]
                                   [--compute-deployment-threshold]
                                   [--compute-rack-definitions]
                                   [--ids]
                                   [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                   [--resource-group]
                                   [--subscription]
                                   [--tags]
  examples:
  - summary: |-
      Patch cluster location
    syntax: az networkcloud cluster update --name "clusterName" --cluster-location "Foo Street, 3rd Floor, row 9" --tags key1="myvalue1" key2="myvalue2" --resource-group "resourceGroupName"
  - summary: |-
      Patch cluster aggregatorOrSingleRackDefinition
    syntax: az networkcloud cluster update --name "clusterName" --aggregator-or-single-rack-definition "{networkRackId:'/subscriptions/subscriptionId/resourceGroups/rgName/providers/Microsoft.Network/virtualNetworks/cmName/subnets/ClusterManagerSubnet',rackSkuId:'/subscriptions/subscriptionId/providers/Microsoft.NetworkCloud/rackSkus/VLab_Single_DellR750_8C2M_x70r3_9',rackSerialNumber:b99m99r1,rackLocation:b99m99r1,availabilityZone:1,storageApplianceConfigurationData:[{rackSlot:1,adminCredentials:{username:'adminuser',password:'password'},storageApplianceName:name,serialNumber:serial}],bareMetalMachineConfigurationData:[{bmcCredentials:{password:'bmcPassword',username:'root'},bmcMacAddress:'AA:BB:CC:DD:E7:08',bootMacAddress:'AA:BB:CC:F8:71:2E',machineName:lab00r750wkr1,rackSlot:2,serialNumber:5HS7PK3},{bmcCredentials:{password:'bmcPassword',username:'root'},bmcMacAddress:'AA:BB:CC:FD:DC:76',bootMacAddress:'AA:BB:CC:F8:50:CA',machineName:lab00r750wkr8,rackSlot:11,serialNumber:9M56PK3}]}" --compute-deployment-threshold type="PercentSuccess" grouping="PerCluster" value=90 --tags key1="myvalue1" key2="myvalue2" --resource-group "resourceGroupName
  - summary: |-
      Patch cluster aggregatorOrSingleRackDefinition using json file input
    syntax: az networkcloud cluster update --name "clusterName" --aggregator-or-single-rack-definition ./aggregator-or-single-rack-definition.json --compute-deployment-threshold type="PercentSuccess" grouping="PerCluster" value=90 --tags key1="myvalue1" key2="myvalue2" --resource-group "resourceGroupName"
  optionalParameters:
  - name: --aggregator-or-single-rack-definition
    summary: |-
      The rack definition that is intended to reflect only a single rack in a single rack cluster, or an aggregator rack in a multi-rack cluster.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --cluster-location
    summary: |-
      The customer-provided location information to identify where the cluster resides.
  - name: --cluster-name --name -n
    summary: |-
      The name of the cluster.
  - name: --cluster-service-principal
    summary: |-
      The service principal to be used by the cluster during Arc Appliance installation.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --compute-deployment-threshold
    summary: |-
      The validation threshold indicating the allowable failures of compute machines during environment validation and deployment.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --compute-rack-definitions
    summary: |-
      The list of rack definitions for the compute racks in a multi-rack cluster, or an empty list in a single-rack cluster.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --tags
    summary: |-
      The Azure resource tags that will replace the existing ones.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
- uid: az_networkcloud_cluster_update-version
  name: az networkcloud cluster update-version
  summary: |-
    Update the version of the provided cluster to one of the available supported versions.
  status: GA
  sourceType: Extension
  syntax: >-
    az networkcloud cluster update-version --target-cluster-version
                                           [--cluster-name]
                                           [--ids]
                                           [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                           [--resource-group]
                                           [--subscription]
  examples:
  - summary: |-
      Update cluster version
    syntax: az networkcloud cluster update-version --cluster-name "clusterName" --target-cluster-version "2.0" --resource-group "resourceGroupName"
  requiredParameters:
  - isRequired: true
    name: --target-cluster-version
    summary: |-
      The version to be applied to the cluster during update.
  optionalParameters:
  - name: --cluster-name --name -n
    summary: |-
      The name of the cluster.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_networkcloud_cluster_wait
  name: az networkcloud cluster wait
  summary: |-
    Place the CLI in a waiting state until a condition is met.
  status: GA
  sourceType: Extension
  syntax: >-
    az networkcloud cluster wait [--cluster-name]
                                 [--created]
                                 [--custom]
                                 [--deleted]
                                 [--exists]
                                 [--ids]
                                 [--interval]
                                 [--resource-group]
                                 [--subscription]
                                 [--timeout]
                                 [--updated]
  optionalParameters:
  - name: --cluster-name --name -n
    summary: |-
      The name of the cluster.
  - name: --created
    defaultValue: "False"
    summary: |-
      Wait until created with 'provisioningState' at 'Succeeded'.
  - name: --custom
    summary: |-
      Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
  - name: --deleted
    defaultValue: "False"
    summary: |-
      Wait until deleted.
  - name: --exists
    defaultValue: "False"
    summary: |-
      Wait until the resource exists.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --interval
    defaultValue: "30"
    summary: |-
      Polling interval in seconds.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --timeout
    defaultValue: "3600"
    summary: |-
      Maximum wait in seconds.
  - name: --updated
    defaultValue: "False"
    summary: |-
      Wait until updated with provisioningState at 'Succeeded'.
commands:
- az_networkcloud_cluster_baremetalmachinekeyset
- az_networkcloud_cluster_baremetalmachinekeyset_create
- az_networkcloud_cluster_baremetalmachinekeyset_delete
- az_networkcloud_cluster_baremetalmachinekeyset_list
- az_networkcloud_cluster_baremetalmachinekeyset_show
- az_networkcloud_cluster_baremetalmachinekeyset_update
- az_networkcloud_cluster_baremetalmachinekeyset_wait
- az_networkcloud_cluster_bmckeyset
- az_networkcloud_cluster_bmckeyset_create
- az_networkcloud_cluster_bmckeyset_delete
- az_networkcloud_cluster_bmckeyset_list
- az_networkcloud_cluster_bmckeyset_show
- az_networkcloud_cluster_bmckeyset_update
- az_networkcloud_cluster_bmckeyset_wait
- az_networkcloud_cluster_create
- az_networkcloud_cluster_delete
- az_networkcloud_cluster_deploy
- az_networkcloud_cluster_list
- az_networkcloud_cluster_metricsconfiguration
- az_networkcloud_cluster_metricsconfiguration_create
- az_networkcloud_cluster_metricsconfiguration_delete
- az_networkcloud_cluster_metricsconfiguration_list
- az_networkcloud_cluster_metricsconfiguration_show
- az_networkcloud_cluster_metricsconfiguration_update
- az_networkcloud_cluster_metricsconfiguration_wait
- az_networkcloud_cluster_show
- az_networkcloud_cluster_update
- az_networkcloud_cluster_update-version
- az_networkcloud_cluster_wait
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, table, tsv"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  description: Manage cluster.
