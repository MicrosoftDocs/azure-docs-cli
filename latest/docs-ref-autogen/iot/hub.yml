### YamlMime:AzureCLIGroup
uid: az_iot_hub
name: az iot hub
summary: Manage Azure IoT hubs.
description: ''
directCommands:
- uid: az_iot_hub_create
  name: az iot hub create
  summary: Create an Azure IoT hub.
  description: For an introduction to Azure IoT Hub, see <a href="https://docs.microsoft.com/azure/iot-hub/">https://docs.microsoft.com/azure/iot-hub/</a>.
  syntax: >-
    az iot hub create --name
                      --resource-group
                      [--c2d-max-delivery-count]
                      [--c2d-ttl]
                      [--fc]
                      [--fcs]
                      [--fcu]
                      [--fd]
                      [--feedback-lock-duration]
                      [--feedback-ttl]
                      [--fileupload-notification-max-delivery-count]
                      [--fileupload-notification-ttl]
                      [--fileupload-notifications {false, true}]
                      [--fileupload-sas-ttl]
                      [--fileupload-storage-auth-type]
                      [--location]
                      [--min-tls-version]
                      [--partition-count]
                      [--rd]
                      [--sku {B1, B2, B3, F1, S1, S2, S3}]
                      [--subscription]
                      [--unit]
  examples:
  - summary: Create an IoT Hub with the free pricing tier F1, in the region of the resource group.
    syntax: az iot hub create --resource-group MyResourceGroup --name MyIotHub --sku F1 --partition-count 2
  - summary: Create an IoT Hub with the standard pricing tier S1 and 4 partitions, in the 'westus' region.
    syntax: az iot hub create --resource-group MyResourceGroup --name MyIotHub --location westus
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: IoT Hub name.
    description: ''
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  optionalParameters:
  - name: --c2d-max-delivery-count --cdd
    defaultValue: "10"
    summary: The number of times the IoT hub will attempt to deliver a cloud-to-device message to a device, between 1 and 100.
    description: ''
  - name: --c2d-ttl --ct
    defaultValue: "1"
    summary: The amount of time a message is available for the device to consume before it is expired by IoT Hub, between 1 and 48 hours.
    description: ''
  - name: --fc --fileupload-storage-container-name
    summary: The name of the root container where you upload files. The container need not exist but should be creatable using the connectionString specified.
    description: ''
  - name: --fcs --fileupload-storage-connectionstring
    summary: The connection string for the Azure Storage account to which files are uploaded.
    description: ''
  - name: --fcu --fileupload-storage-container-uri
    summary: The container URI for the Azure Storage account to which files are uploaded.
    description: ''
  - name: --fd --feedback-max-delivery-count
    defaultValue: "10"
    summary: The number of times the IoT hub attempts to deliver a message on the feedback queue, between 1 and 100.
    description: ''
  - name: --feedback-lock-duration --fld
    defaultValue: "5"
    summary: The lock duration for the feedback queue, between 5 and 300 seconds.
    description: ''
  - name: --feedback-ttl --ft
    defaultValue: "1"
    summary: The period of time for which the IoT hub will maintain the feedback for expiration or delivery of cloud-to-device messages, between 1 and 48 hours.
    description: ''
  - name: --fileupload-notification-max-delivery-count --fnd
    defaultValue: "10"
    summary: The number of times the IoT hub will attempt to deliver a file notification message, between 1 and 100.
    description: ''
  - name: --fileupload-notification-ttl --fnt
    defaultValue: "1"
    summary: The amount of time a file upload notification is available for the service to consume before it is expired by IoT Hub, between 1 and 48 hours.
    description: ''
  - name: --fileupload-notifications --fn
    parameterValueGroup: false, true
    summary: A boolean indicating whether to log information about uploaded files to the messages/servicebound/filenotifications IoT Hub endpoint.
    description: ''
  - name: --fileupload-sas-ttl --fst
    defaultValue: "1"
    summary: The amount of time a SAS URI generated by IoT Hub is valid before it expires, between 1 and 24 hours.
    description: ''
  - name: --fileupload-storage-auth-type --fsa
    summary: The authentication type for the Azure Storage account to which files are uploaded.Possible values are keyBased and identityBased.
    description: ''
  - name: --location -l
    summary: Location of your IoT Hub. Default is the location of target resource group.
    description: ''
  - name: --min-tls-version --mintls
    summary: Specify the minimum TLS version to support for this hub. Can be set to "1.2" to have clients that use a TLS version below 1.2 to be rejected.
    description: ''
  - name: --partition-count
    defaultValue: "4"
    summary: The number of partitions of the backing Event Hub for device-to-cloud messages.
    description: ''
  - name: --rd --retention-day
    defaultValue: "1"
    summary: Specifies how long this IoT hub will maintain device-to-cloud events, between 1 and 7 days.
    description: ''
  - name: --sku
    defaultValue: S1
    parameterValueGroup: B1, B2, B3, F1, S1, S2, S3
    summary: Pricing tier for Azure IoT Hub. Note that only one free IoT hub instance (F1) is allowed in each subscription. Exception will be thrown if free instances exceed one.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --unit
    defaultValue: "1"
    summary: Units in your IoT Hub.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_delete
  name: az iot hub delete
  summary: Delete an IoT hub.
  description: ''
  syntax: >-
    az iot hub delete [--ids]
                      [--name]
                      [--resource-group]
                      [--subscription]
  examples:
  - summary: Delete an IoT hub. (autogenerated)
    syntax: az iot hub delete --name MyIoTHub --resource-group MyResourceGroup
  optionalParameters:
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --name -n
    summary: IoT Hub name.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_list
  name: az iot hub list
  summary: List IoT hubs.
  description: ''
  syntax: >-
    az iot hub list [--query-examples]
                    [--resource-group]
                    [--subscription]
  examples:
  - summary: List all IoT hubs in a subscription.
    syntax: az iot hub list
  - summary: List all IoT hubs in the resource group 'MyGroup'
    syntax: az iot hub list --resource-group MyGroup
  optionalParameters:
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_list_skus
  name: az iot hub list-skus
  summary: List available pricing tiers.
  description: ''
  syntax: >-
    az iot hub list-skus [--ids]
                         [--name]
                         [--resource-group]
                         [--subscription]
  examples:
  - summary: List available pricing tiers. (autogenerated)
    syntax: az iot hub list-skus --name MyIoTHub
  optionalParameters:
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --name -n
    summary: IoT Hub name.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_manual_failover
  name: az iot hub manual-failover
  summary: Initiate a manual failover for the IoT Hub to the geo-paired disaster recovery region.
  description: ''
  syntax: >-
    az iot hub manual-failover [--ids]
                               [--name]
                               [--no-wait]
                               [--resource-group]
                               [--subscription]
  examples:
  - summary: Initiate failover “myhub” from primary to secondary region.
    syntax: az iot hub manual-failover -n myhub
  optionalParameters:
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --name -n
    summary: IoT Hub name.
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_show
  name: az iot hub show
  summary: Get the details of an IoT hub.
  description: ''
  syntax: >-
    az iot hub show [--ids]
                    [--name]
                    [--query-examples]
                    [--resource-group]
                    [--subscription]
  examples:
  - summary: Get the details of an IoT hub. (autogenerated)
    syntax: az iot hub show --name MyIoTHub
  optionalParameters:
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --name -n
    summary: IoT Hub name.
    description: ''
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_show_connection_string
  name: az iot hub show-connection-string
  summary: Show the connection strings for an IoT hub.
  description: ''
  syntax: >-
    az iot hub show-connection-string [--all]
                                      [--hub-name]
                                      [--ids]
                                      [--key {primary, secondary}]
                                      [--policy-name]
                                      [--resource-group]
                                      [--subscription]
  examples:
  - summary: Show the connection string of an IoT hub using default policy and primary key.
    syntax: az iot hub show-connection-string --name MyIotHub
  - summary: Show the connection string of an IoT Hub using policy 'service' and secondary key.
    syntax: az iot hub show-connection-string --name MyIotHub --policy-name service --key secondary
  - summary: Show the connection strings for all IoT hubs in a resource group.
    syntax: az iot hub show-connection-string --resource-group MyResourceGroup
  - summary: Show the connection strings for all IoT hubs in a subscription.
    syntax: az iot hub show-connection-string
  - summary: Show the connection strings for an IoT hub. (autogenerated)
    syntax: az iot hub show-connection-string --key primary --policy-name MyPolicy
  optionalParameters:
  - name: --all
    summary: Allow to show all shared access policies.
    description: ''
  - name: --hub-name --name -n
    summary: IoT Hub name.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --key
    defaultValue: primary
    parameterValueGroup: primary, secondary
    summary: The key to use.
    description: ''
  - name: --policy-name
    defaultValue: iothubowner
    summary: Shared access policy to use.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_show_quota_metrics
  name: az iot hub show-quota-metrics
  summary: Get the quota metrics for an IoT hub.
  description: ''
  syntax: >-
    az iot hub show-quota-metrics [--ids]
                                  [--name]
                                  [--resource-group]
                                  [--subscription]
  examples:
  - summary: Get the quota metrics for an IoT hub. (autogenerated)
    syntax: az iot hub show-quota-metrics --ids {ids}
  - summary: Get the quota metrics for an IoT hub. (autogenerated)
    syntax: az iot hub show-quota-metrics --name MyIoTHub
  optionalParameters:
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --name -n
    summary: IoT Hub name.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_show_stats
  name: az iot hub show-stats
  summary: Get the statistics for an IoT hub.
  description: ''
  syntax: >-
    az iot hub show-stats [--ids]
                          [--name]
                          [--resource-group]
                          [--subscription]
  examples:
  - summary: Get the statistics for an IoT hub. (autogenerated)
    syntax: az iot hub show-stats --name MyIoTHub
  optionalParameters:
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --name -n
    summary: IoT Hub name.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
- uid: az_iot_hub_update
  name: az iot hub update
  summary: Update metadata for an IoT hub.
  description: ''
  syntax: >-
    az iot hub update [--add]
                      [--c2d-max-delivery-count]
                      [--c2d-ttl]
                      [--fc]
                      [--fcs]
                      [--fcu]
                      [--fd]
                      [--feedback-lock-duration]
                      [--feedback-ttl]
                      [--fileupload-notification-max-delivery-count]
                      [--fileupload-notification-ttl]
                      [--fileupload-notifications {false, true}]
                      [--fileupload-sas-ttl]
                      [--fileupload-storage-auth-type]
                      [--force-string]
                      [--ids]
                      [--name]
                      [--rd]
                      [--remove]
                      [--resource-group]
                      [--set]
                      [--sku {B1, B2, B3, F1, S1, S2, S3}]
                      [--subscription]
                      [--unit]
  examples:
  - summary: Add a storage container settings
    syntax: az iot hub update --name MyIotHub --fileupload-storage-connectionstring "connection-string" \ --fileupload-storage-container-name "container_name"
  - summary: Add a firewall filter rule to accept traffic from the IP mask 127.0.0.0/31.
    syntax: az iot hub update --name MyIotHub --add properties.ipFilterRules filter_name=test-rule action=Accept ip_mask=127.0.0.0/31
  - summary: Update metadata for an IoT hub. (autogenerated)
    syntax: az iot hub update --name MyIotHub --set properties.allocationPolicy="GeoLatency"
  - summary: Update units of an IoT Hub to 2
    syntax: az iot hub update -n MyIotHub --unit 2
  - summary: Update pricing tier for an IoT Hub as S2
    syntax: az iot hub update -n MyIotHub --sku S2
  - summary: Update the retention days of IoT Hub device-to-cloud events as 3 days
    syntax: az iot hub update -n MyIotHub --retention-day 3
  - summary: Update the IoT Hub cloud-to-device messaging settings
    syntax: az iot hub update --name MyIotHub --c2d-max-delivery-count 30 --c2d-ttl 5
  - summary: Update the IoT Hub feedback queue settings
    syntax: az iot hub update --name MyIoTHub --feedback-max-delivery-count 20 --feedback-lock-duration 100 --feedback-ttl 4
  - summary: Update the IoT Hub file upload settings
    syntax: az iot hub update -n MyIoTHub --fileupload-sas-ttl 5 --fileupload-storage-auth-type identityBased
  - summary: Update the IoT Hub file upload notification settings
    syntax: az iot hub update -n MyIoTHub --fileupload-notification-max-delivery-count 50 --fileupload-notification-ttl 48 --fileupload-notifications
  optionalParameters:
  - name: --add
    summary: 'Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.'
    description: ''
  - name: --c2d-max-delivery-count --cdd
    summary: The number of times the IoT hub will attempt to deliver a cloud-to-device message to a device, between 1 and 100.
    description: ''
  - name: --c2d-ttl --ct
    summary: The amount of time a message is available for the device to consume before it is expired by IoT Hub, between 1 and 48 hours.
    description: ''
  - name: --fc --fileupload-storage-container-name
    summary: The name of the root container where you upload files. The container need not exist but should be creatable using the connectionString specified.
    description: ''
  - name: --fcs --fileupload-storage-connectionstring
    summary: The connection string for the Azure Storage account to which files are uploaded.
    description: ''
  - name: --fcu --fileupload-storage-container-uri
    summary: The container URI for the Azure Storage account to which files are uploaded.
    description: ''
  - name: --fd --feedback-max-delivery-count
    summary: The number of times the IoT hub attempts to deliver a message on the feedback queue, between 1 and 100.
    description: ''
  - name: --feedback-lock-duration --fld
    summary: The lock duration for the feedback queue, between 5 and 300 seconds.
    description: ''
  - name: --feedback-ttl --ft
    summary: The period of time for which the IoT hub will maintain the feedback for expiration or delivery of cloud-to-device messages, between 1 and 48 hours.
    description: ''
  - name: --fileupload-notification-max-delivery-count --fnd
    summary: The number of times the IoT hub will attempt to deliver a file notification message, between 1 and 100.
    description: ''
  - name: --fileupload-notification-ttl --fnt
    summary: The amount of time a file upload notification is available for the service to consume before it is expired by IoT Hub, between 1 and 48 hours.
    description: ''
  - name: --fileupload-notifications --fn
    parameterValueGroup: false, true
    summary: A boolean indicating whether to log information about uploaded files to the messages/servicebound/filenotifications IoT Hub endpoint.
    description: ''
  - name: --fileupload-sas-ttl --fst
    summary: The amount of time a SAS URI generated by IoT Hub is valid before it expires, between 1 and 24 hours.
    description: ''
  - name: --fileupload-storage-auth-type --fsa
    summary: The authentication type for the Azure Storage account to which files are uploaded.Possible values are keyBased and identityBased.
    description: ''
  - name: --force-string
    summary: When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
    description: ''
  - name: --ids
    summary: One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    description: ''
  - name: --name -n
    summary: IoT Hub name.
    description: ''
  - name: --rd --retention-day
    summary: Specifies how long this IoT hub will maintain device-to-cloud events, between 1 and 7 days.
    description: ''
  - name: --remove
    summary: 'Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.'
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --set
    summary: 'Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.'
    description: ''
  - name: --sku
    parameterValueGroup: B1, B2, B3, F1, S1, S2, S3
    summary: Pricing tier for Azure IoT Hub. Note that only one free IoT hub instance (F1) is allowed in each subscription. Exception will be thrown if free instances exceed one.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --unit
    summary: Units in your IoT Hub.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/iot/_help.py
commands:
- az_iot_hub_certificate
- az_iot_hub_certificate_create
- az_iot_hub_certificate_delete
- az_iot_hub_certificate_generate_verification_code
- az_iot_hub_certificate_list
- az_iot_hub_certificate_show
- az_iot_hub_certificate_update
- az_iot_hub_certificate_verify
- az_iot_hub_consumer_group
- az_iot_hub_consumer_group_create
- az_iot_hub_consumer_group_delete
- az_iot_hub_consumer_group_list
- az_iot_hub_consumer_group_show
- az_iot_hub_create
- az_iot_hub_delete
- az_iot_hub_devicestream
- az_iot_hub_devicestream_show
- az_iot_hub_list
- az_iot_hub_list_skus
- az_iot_hub_manual_failover
- az_iot_hub_message_enrichment
- az_iot_hub_message_enrichment_create
- az_iot_hub_message_enrichment_delete
- az_iot_hub_message_enrichment_list
- az_iot_hub_message_enrichment_update
- az_iot_hub_policy
- az_iot_hub_policy_create
- az_iot_hub_policy_delete
- az_iot_hub_policy_list
- az_iot_hub_policy_renew_key
- az_iot_hub_policy_show
- az_iot_hub_route
- az_iot_hub_route_create
- az_iot_hub_route_delete
- az_iot_hub_route_list
- az_iot_hub_route_show
- az_iot_hub_route_test
- az_iot_hub_route_update
- az_iot_hub_routing_endpoint
- az_iot_hub_routing_endpoint_create
- az_iot_hub_routing_endpoint_delete
- az_iot_hub_routing_endpoint_list
- az_iot_hub_routing_endpoint_show
- az_iot_hub_show
- az_iot_hub_show_connection_string
- az_iot_hub_show_quota_metrics
- az_iot_hub_show_stats
- az_iot_hub_update
globalParameters:
- name: --debug
  summary: Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: Show this help message and exit.
- name: --only-show-errors
  summary: Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: json
  parameterValueGroup: json, jsonc, table, tsv
  summary: Output format.
- name: --query
  summary: JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --verbose
  summary: Increase logging verbosity. Use --debug for full debug logs.
metadata:
  doc_source_url_repo: https://github.com/Azure/azure-cli/blob/dev/
  ms.date: 10/15/2020
  description: Manage Azure IoT hubs.
