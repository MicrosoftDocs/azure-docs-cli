### YamlMime:AzureCLIGroup
uid: az_sig_image-version
name: az sig image-version
importantNote: >-
  > [!NOTE]

  > This command group has commands that are defined in both Azure CLI and at least one extension. Install each extension to benefit from its extended capabilities. [Learn more](https://learn.microsoft.com/cli/azure/azure-cli-extensions-overview) about extensions.
summary: |-
  Manage shared gallery image version with VM.
status: GA
sourceType: Core and Extension
directCommands:
- uid: az_sig_image-version_create
  name: az sig image-version create
  summary: |-
    Create a new image version.
  description: |-
    This operation might take a long time depending on the replicate region number. Use "--no-wait" is advised.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version create --gallery-image-definition
                                --gallery-image-version
                                --gallery-name
                                --resource-group
                                [--allow-replicated-location-deletion {false, true}]
                                [--data-snapshot-luns]
                                [--data-snapshots]
                                [--data-vhds-luns]
                                [--data-vhds-sa]
                                [--data-vhds-uris]
                                [--end-of-life-date]
                                [--exclude-from-latest {false, true}]
                                [--image-version]
                                [--location]
                                [--managed-image]
                                [--no-wait]
                                [--os-snapshot]
                                [--os-vhd-storage-account]
                                [--os-vhd-uri]
                                [--replica-count]
                                [--replication-mode {Full, Shallow}]
                                [--storage-account-type {Premium_LRS, Standard_LRS, Standard_ZRS}]
                                [--tags]
                                [--target-edge-zone-encryption]
                                [--target-edge-zones]
                                [--target-region-cvm-encryption]
                                [--target-region-encryption]
                                [--target-regions]
                                [--virtual-machine]
  examples:
  - summary: |-
      Add a new image version from a virtual machine
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --virtual-machine /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/virtualMachines/MyVM
  - summary: |-
      Add a new image version from a managed image
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --managed-image /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/images/MyManagedImage
  - summary: |-
      Add a new image version from another image version
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --image-version /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/galleries/MyGallery/images/MyImageDefinition/versions/1.0.0
  - summary: |-
      Add a new image version from a managed disk
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --os-snapshot /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/disks/MyOSDisk
  - summary: |-
      Add a new image version from a managed disk and add additional data disks
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --os-snapshot /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/disks/MyOSDisk \

      --data-snapshots /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/disks/MyDataDisk \

      --data-snapshot-luns 0
  - summary: |-
      Add a new image version from a snapshot of an OS disk.
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --os-snapshot /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/snapshots/MyOsDiskSnapshot
  - summary: |-
      Add a new image version from a snapshot of an OS disk and add additional snapshots as data disks
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --os-snapshot /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/snapshots/MyOsDiskSnapshot \

      --data-snapshots /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/snapshots/MyDiskSnapshot \

      --data-snapshot-luns 0
  - summary: |-
      Add a new image version from a VHD of an OS disk.
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --os-vhd-storage-account /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Storage/storageAccounts/mystorageaccount \

      --os-vhd-uri https://mystorageaccount.blob.core.windows.net/container/path_to_vhd_file
  - summary: |-
      Add a new image version from a VHD of an OS disk and add additional VHDs as data disks
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --os-vhd-storage-account /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Storage/storageAccounts/mystorageaccount \

      --os-vhd-uri https://mystorageaccount.blob.core.windows.net/container/path_to_vhd_file \

      --data-vhds-sa /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Storage/storageAccounts/myotherstorageaccount \

      --data-vhds-uris https://myotherstorageaccount.blob.core.windows.net/container/path_to_vhd_file \

      --data-vhds-luns 0
  - summary: |-
      You can combine snapshots, managed disks, and VHDs to create a new image version. Add a new image version using a VHD as the OS disk and a managed disk and a snapshot as data disks.
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --os-vhd-storage-account /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Storage/storageAccounts/mystorageaccount \

      --os-vhd-uri https://mystorageaccount.blob.core.windows.net/container/path_to_vhd_file \

      --data-snapshots /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/disks/MyDataDisk subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/snapshots/MyDiskSnapshot \

      --data-snapshot-luns 0 1
  - summary: |-
      Add a new image version and copy it to additional regions. The home location for the source of the image version must be included in the list of target regions. For each additional region, you can specify a different replica count and storage account type. Otherwise, the region will inherit from the global. The default replica count is 1 and the default storage account type is Standard LRS. In this example, eastus2 will have one replica stored on Standard ZRS storage, ukwest will have 3 replicas stored on Standard ZRS storage, southindia will have one replica stored on Standard LRS storage, and brazilsouth will have 2 replicas stored on Standard LRS storage.
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 --replica-count 1 \

      --storage-account-type Standard_ZRS --managed-image image-name \

      --target-regions eastus2 ukwest=3 southindia=standard_lrs \

      brazilsouth=2=standard_lrs
  - summary: |-
      Add a new image version with encryption using a disk encryption set. Encryption is applied to each disk that is a part of the image version.
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --virtual-machine /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/virtualMachines/MyVM \

      --target-regions westus=2=standard eastus \

      --target-region-encryption WestUSDiskEncryptionSet1,0,WestUSDiskEncryptionSet2 \

      EastUSDiskEncryptionSet1,0,EastUSDiskEncryptionSet2
  - summary: |-
      Add a new image version and copy it to extended locations.
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 --replica-count 1 \

      --storage-account-type Standard_ZRS --managed-image image-name \

      --target-edge-zones westus=microsoftlosangeles1 eastus=microsoftlosangeles2=1 \

      brazilsouth=2=standard_lrs
  - summary: |-
      Add a new image version and copy it to extended locations with encryption using a disk encryption set.
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --virtual-machine /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/virtualMachines/MyVM \

      --target-edge-zones westus=microsoftlosangeles1 \

      --target-edge-zone-encryption microsoftlosangeles1,WestUSDiskEncryptionSet1,0,WestUSDiskEncryptionSet2
  - summary: |-
      Add a new image version and don't wait on it. Later you can invoke "az sig image-version wait" command when ready to create a vm from the gallery image version
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --virtual-machine /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/virtualMachines/MyVM \

      --no-wait
  - summary: |-
      Add a new image version but remove it from consideration as latest version in its image definition
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --virtual-machine /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/virtualMachines/MyVM \

      --exclude-from-latest true
  - summary: |-
      Add a new image version and set its end-of-life date. The image version can still be used to create a virtual machine after its end-of-life date.
    syntax: >-
      az sig image-version create --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --virtual-machine /subscriptions/00000000-0000-0000-0000-00000000xxxx/resourceGroups/imageGroups/providers/Microsoft.Compute/virtualMachines/MyVM \

      --end-of-life-date 2024-08-02T00:00:00+00:00
  requiredParameters:
  - isRequired: true
    name: --gallery-image-definition -i
    summary: |-
      Gallery image definition.
  - isRequired: true
    name: --gallery-image-version -e
    summary: |-
      Gallery image version in semantic version pattern. The allowed characters are digit and period. Digits must be within the range of a 32-bit integer, e.g. `<MajorVersion>.<MinorVersion>.<Patch>`.
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      Gallery name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --allow-replicated-location-deletion
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether or not removing this gallery image version from replicated regions is allowed.
  - name: --data-snapshot-luns
    summary: |-
      Logical unit numbers (space-delimited) of data disk snapshots.
  - name: --data-snapshots
    summary: |-
      Names or IDs (space-delimited) of data disk snapshots.
  - name: --data-vhds-luns
    summary: |-
      Logical unit numbers (space-delimited) of source VHD URIs of data disks.
  - name: --data-vhds-sa --data-vhds-storage-accounts
    summary: |-
      Names or IDs (space-delimited) of storage accounts of source VHD URIs of data disks.
  - name: --data-vhds-uris
    summary: |-
      Source VHD URIs (space-delimited) of data disks.
  - name: --end-of-life-date
    summary: |-
      The end of life date, e.g. '2020-12-31'.
  - name: --exclude-from-latest
    parameterValueGroup: "false, true"
    summary: |-
      The flag means that if it is set to true, people deploying VMs with version omitted will not use this version.
  - name: --image-version
    summary: |-
      Resource id of gallery image version source.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --managed-image
    summary: |-
      Image name(if in the same resource group) or resource id.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --os-snapshot
    summary: |-
      Name or ID of OS disk snapshot.
  - name: --os-vhd-storage-account
    summary: |-
      Name or ID of storage account of source VHD URI of OS disk.
  - name: --os-vhd-uri
    summary: |-
      Source VHD URI of OS disk.
  - name: --replica-count
    summary: |-
      The default number of replicas to be created per region. To set regional replication counts, use --target-regions.
  - name: --replication-mode
    parameterValueGroup: "Full, Shallow"
    summary: |-
      Optional parameter which specifies the mode to be used for replication. This property is not updatable.
  - name: --storage-account-type
    parameterValueGroup: "Premium_LRS, Standard_LRS, Standard_ZRS"
    summary: |-
      The default storage account type to be used per region. To set regional storage account types, use --target-regions.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
  - name: --target-edge-zone-encryption --zone-encryption
    summary: |-
      Space-separated list of customer managed keys for encrypting the OS and data disks in the gallery artifact for each region. Format for each edge zone: <edge zone>,<os_des>,<lun1>,<lun1_des>,<lun2>,<lun2_des>.
  - name: --target-edge-zones
    summary: |-
      Space-separated list of regions, edge zones, replica counts and storage types. Use <region>=<edge zone>[=<replica count>][=<storage account type>] to optionally set the replica count and/or storage account type for each region. If a replica count is not specified, the default replica count will be used. If a storage account type is not specified, the default storage account type will be used. If "--target-edge-zones None" is specified, the target extended locations will be cleared.
  - name: --target-region-cvm-encryption
    summary: |-
      Space-separated list of customer managed key for Confidential VM encrypting the OS disk in the gallery artifact for each region. Format for each region: `<os_cvm_encryption_type>,<os_cvm_des>`. The valid values for os_cvm_encryption_type are EncryptedVMGuestStateOnlyWithPmk, EncryptedWithPmk, EncryptedWithCmk.
  - name: --target-region-encryption
    summary: |-
      Space-separated list of customer managed keys for encrypting the OS and data disks in the gallery artifact for each region. Format for each region: `<os_des>,<lun1>,<lun1_des>,<lun2>,<lun2_des>`. Use "null" as a placeholder.
  - name: --target-regions
    summary: |-
      Space-separated list of regions and their replica counts. Use `<region>[=<replica count>][=<storage account type>]` to optionally set the replica count and/or storage account type for each region. If a replica count is not specified, the default replica count will be used. If a storage account type is not specified, the default storage account type will be used.
  - name: --virtual-machine
    summary: |-
      Resource id of VM source.
- uid: az_sig_image-version_delete
  name: az sig image-version delete
  summary: |-
    Delete a gallery image version.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version delete [--gallery-image-definition]
                                [--gallery-image-version]
                                [--gallery-name]
                                [--ids]
                                [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                [--resource-group]
                                [--subscription]
  optionalParameters:
  - name: --gallery-image-definition --gallery-image-name -i
    summary: |-
      The name of the gallery image definition in which the Image Version resides.
  - name: --gallery-image-version --gallery-image-version-name -e
    summary: |-
      The name of the gallery image version to be deleted.
  - name: --gallery-name -r
    summary: |-
      The name of the Shared Image Gallery in which the Image Definition resides.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-version_list
  name: az sig image-version list
  summary: |-
    List gallery image versions in a gallery image definition.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version list --gallery-image-definition
                              --gallery-name
                              --resource-group
                              [--max-items]
                              [--next-token]
  requiredParameters:
  - isRequired: true
    name: --gallery-image-definition --gallery-image-name -i
    summary: |-
      Gallery image definition.
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      Gallery name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --max-items
    summary: |-
      Total number of items to return in the command's output. If the total number of items available is more than the value specified, a token is provided in the command's output. To resume pagination, provide the token value in `--next-token` argument of a subsequent command.
  - name: --next-token
    summary: |-
      Token to specify where to start paginating. This is the token value from a previously truncated response.
- uid: az_sig_image-version_list-community
  name: az sig image-version list-community
  summary: |-
    List VM Image Versions in a gallery community.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version list-community [--gallery-image-definition]
                                        [--ids]
                                        [--location]
                                        [--marker]
                                        [--public-gallery-name]
                                        [--show-next-marker]
                                        [--subscription]
  examples:
  - summary: |-
      List an image versions in a gallery community.
    syntax: >-
      az sig image-version list-community --public-gallery-name publicGalleryName \

      --gallery-image-definition MyImage --location myLocation
  optionalParameters:
  - name: --gallery-image-definition -i
    summary: |-
      The name of the community gallery image definition from which the image versions are to be listed.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --marker
    summary: |-
      A string value that identifies the portion of the list of containers to be returned with the next listing operation. The operation returns the NextMarker value within the response body if the listing operation did not return all containers remaining to be listed with the current page. If specified, this generator will begin returning results from the point where the previous generator stopped.
  - name: --public-gallery-name
    summary: |-
      The public name of community gallery.
  - name: --show-next-marker
    summary: |-
      Show nextMarker in result when specified.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-version_list-community(image-gallery)
  name: az sig image-version list-community
  extensionSuffix: image-gallery
  summary: |-
    List VM Image Versions in a gallery community (preview).
  description: |-
    List VM Image Versions in a gallery community (private preview feature, please contact community image gallery team by email sigpmdev@microsoft.com to register for preview if you're interested in using this feature).
  status: Experimental
  isExperimental: true
  previewOrExperimentalInfo: 'This command is experimental and under development. Reference and support levels: https://aka.ms/CLI_refstatus'
  sourceType: Extension
  syntax: >-
    az sig image-version list-community [--gallery-image-definition]
                                        [--ids]
                                        [--location]
                                        [--marker]
                                        [--public-gallery-name]
                                        [--show-next-marker]
                                        [--subscription]
  examples:
  - summary: |-
      List an image versions in a gallery community.
    syntax: >-
      az sig image-version list-community --public-gallery-name publicGalleryName \

      --gallery-image-definition MyImage --location myLocation
  optionalParameters:
  - name: --gallery-image-definition -i
    summary: |-
      The name of the community gallery image definition from which the image versions are to be listed.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --marker
    summary: |-
      A string value that identifies the portion of the list of containers to be returned with the next listing operation. The operation returns the NextMarker value within the response body if the listing operation did not return all containers remaining to be listed with the current page. If specified, this generator will begin returning results from the point where the previous generator stopped.
  - name: --public-gallery-name
    summary: |-
      The public name of community gallery.
  - name: --show-next-marker
    summary: |-
      Show nextMarker in result when specified.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-version_list-shared
  name: az sig image-version list-shared
  summary: |-
    List VM Image Versions in a gallery shared directly to your subscription or tenant.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version list-shared [--gallery-image-definition]
                                     [--gallery-unique-name]
                                     [--ids]
                                     [--location]
                                     [--marker]
                                     [--shared-to {tenant}]
                                     [--show-next-marker]
                                     [--subscription]
  examples:
  - summary: |-
      List image versions in a gallery shared directly to your subscription in the given location and image definition.
    syntax: >-
      az sig image-version list-shared --gallery-unique-name galleryUniqueName \

      --gallery-image-definition MyImage --location myLocation
  - summary: |-
      List image versions in a gallery shared directly to your tenant in the given location and image definition.
    syntax: >-
      az sig image-version list-shared --gallery-unique-name galleryUniqueName \

      --gallery-image-definition MyImage --location myLocation --shared-to tenant
  optionalParameters:
  - name: --gallery-image-definition -i
    summary: |-
      The name of the Shared Gallery Image Definition from which the Image Versions are to be listed.
  - name: --gallery-unique-name
    summary: |-
      The unique name of the Shared Gallery.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --marker
    summary: |-
      A string value that identifies the portion of the list of containers to be returned with the next listing operation. The operation returns the NextMarker value within the response body if the listing operation did not return all containers remaining to be listed with the current page. If specified, this generator will begin returning results from the point where the previous generator stopped.
  - name: --shared-to
    parameterValueGroup: "tenant"
    summary: |-
      The query parameter to decide what shared galleries to fetch when doing listing operations. If not specified, list by subscription id.
  - name: --show-next-marker
    summary: |-
      Show nextMarker in result when specified.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-version_show
  name: az sig image-version show
  summary: |-
    Retrieves information about a gallery image version.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version show --gallery-image-definition
                              --gallery-image-version
                              --gallery-name
                              --resource-group
                              [--expand]
  requiredParameters:
  - isRequired: true
    name: --gallery-image-definition -i
    summary: |-
      Gallery image definition.
  - isRequired: true
    name: --gallery-image-version -e
    summary: |-
      Gallery image version in semantic version pattern. The allowed characters are digit and period. Digits must be within the range of a 32-bit integer, e.g. `<MajorVersion>.<MinorVersion>.<Patch>`.
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      Gallery name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --expand
    summary: |-
      The expand expression to apply on the operation, e.g. 'ReplicationStatus'.
- uid: az_sig_image-version_show-community
  name: az sig image-version show-community
  summary: |-
    Get a community gallery image version.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version show-community [--gallery-image-definition]
                                        [--gallery-image-version]
                                        [--ids]
                                        [--location]
                                        [--public-gallery-name]
                                        [--subscription]
  optionalParameters:
  - name: --gallery-image-definition --gallery-image-name -i
    summary: |-
      The name of the community gallery image definition from which the image versions are to be listed.
  - name: --gallery-image-version --gallery-image-version-name -e
    summary: |-
      Gallery image version in semantic version pattern. The allowed characters are digit and period. Digits must be within the range of a 32-bit integer, e.g. `<MajorVersion>.<MinorVersion>.<Patch>`.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --public-gallery-name
    summary: |-
      The public name of the community gallery.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-version_show-community(image-gallery)
  name: az sig image-version show-community
  extensionSuffix: image-gallery
  summary: |-
    Get an image version in a gallery community (preview).
  description: |-
    Get an image version in a gallery community (private preview feature, please contact community image gallery team by email sigpmdev@microsoft.com to register for preview if you're interested in using this feature).
  status: Experimental
  isExperimental: true
  previewOrExperimentalInfo: 'This command is experimental and under development. Reference and support levels: https://aka.ms/CLI_refstatus'
  sourceType: Extension
  syntax: >-
    az sig image-version show-community [--gallery-image-definition]
                                        [--gallery-image-version]
                                        [--ids]
                                        [--location]
                                        [--public-gallery-name]
                                        [--subscription]
  examples:
  - summary: |-
      Get an image version in a gallery community in the given location.
    syntax: >-
      az sig image-version show-community --public-gallery-name publicGalleryName \

      --gallery-image-definition MyImage --gallery-image-version 1.0.0 --location myLocation
  optionalParameters:
  - name: --gallery-image-definition -i
    summary: |-
      The name of the community gallery image definition from which the image versions are to be listed.
  - name: --gallery-image-version -e
    summary: |-
      The name of the gallery image version to be created. Needs to follow semantic version name pattern: The allowed characters are digit and period. Digits must be within the range of a 32-bit integer. Format: <MajorVersion>.<MinorVersion>.<Patch>.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --public-gallery-name
    summary: |-
      The public name of community gallery.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-version_show-shared
  name: az sig image-version show-shared
  summary: |-
    Get an image version in a gallery shared directly to your subscription or tenant.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version show-shared [--gallery-image-definition]
                                     [--gallery-image-version]
                                     [--gallery-unique-name]
                                     [--ids]
                                     [--location]
                                     [--subscription]
  examples:
  - summary: |-
      Get an image version in a gallery shared directly to your subscription or tenant in the given location.
    syntax: az sig image-version show-shared --gallery-unique-name galleryUniqueName --gallery-image-definition MyImage --gallery-image-version 1.0.0 --location myLocation
  optionalParameters:
  - name: --gallery-image-definition --gallery-image-name -i
    summary: |-
      The name of the Shared Gallery Image Definition from which the Image Versions are to be listed.
  - name: --gallery-image-version --gallery-image-version-name -e
    summary: |-
      The name of the gallery image version to be created. Needs to follow semantic version name pattern: The allowed characters are digit and period. Digits must be within the range of a 32-bit integer. Format: <MajorVersion>.<MinorVersion>.<Patch>.
  - name: --gallery-unique-name
    summary: |-
      The unique name of the Shared Gallery.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sig_image-version_undelete
  name: az sig image-version undelete
  summary: |-
    Restore soft deleted Image Version.
  description: |-
    Operation will only be successful if used within a Gallery with soft-deletion on.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: 'This command is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus'
  sourceType: Core
  syntax: >-
    az sig image-version undelete --gallery-image-definition
                                  --gallery-image-version
                                  --gallery-name
                                  --resource-group
                                  [--allow-replicated-location-deletion {false, true}]
                                  [--location]
                                  [--no-wait]
                                  [--tags]
  examples:
  - summary: |-
      Restore a soft deleted Image Version
    syntax: >-
      az sig image-version undelete --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.1.1
  requiredParameters:
  - isRequired: true
    name: --gallery-image-definition -i
    summary: |-
      Gallery image definition.
  - isRequired: true
    name: --gallery-image-version -e
    summary: |-
      Gallery image version in semantic version pattern. The allowed characters are digit and period. Digits must be within the range of a 32-bit integer, e.g. `<MajorVersion>.<MinorVersion>.<Patch>`.
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      Gallery name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --allow-replicated-location-deletion
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether or not removing this gallery image version from replicated regions is allowed.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
- uid: az_sig_image-version_update
  name: az sig image-version update
  summary: |-
    Update a share image version.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version update --gallery-image-definition
                                --gallery-image-version
                                --gallery-name
                                --resource-group
                                [--add]
                                [--allow-replicated-location-deletion {false, true}]
                                [--force-string]
                                [--no-wait]
                                [--remove]
                                [--replica-count]
                                [--set]
                                [--target-edge-zones]
                                [--target-regions]
  examples:
  - summary: |-
      Change the replication regions and replica count
    syntax: >-
      az sig image-version update --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --target-regions westcentralus=2 eastus2
  - summary: |-
      Change the replication extended locations
    syntax: >-
      az sig image-version update --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --target-edge-zones westus=microsoftlosangeles1 eastus=microsoftlosangeles2=1
  - summary: |-
      Clear the replication extended locations
    syntax: >-
      az sig image-version update --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --target-edge-zones None
  - summary: |-
      Replicate to an additional region. Optional, you can set the replica count for the region and exclude this image when using the latest version of the image definition.
    syntax: >-
      az sig image-version update --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0 \

      --add publishingProfile.targetRegions name=westcentralus \

      regionalReplicaCount=3 excludeFromLatest=true
  - summary: |-
      Change whether an image should be included in consideration for latest version in the image definition. Setting this value to true excludes the image from consideration and setting this value to false includes the image for consideration.
    syntax: >-
      az sig image-version update -g MyResourceGroup --gallery-name MyGallery \

      --gallery-image-definition MyImage --gallery-image-version 1.0.0 \

      --set publishingProfile.excludeFromLatest=true
  - summary: |-
      Change the end of life date for an image version. The image can still be used to create virtual machines after the end of life date.
    syntax: >-
      az sig image-version update -g MyResourceGroup --gallery-name MyGallery \

      --gallery-image-definition MyImage --gallery-image-version 1.0.0 \

      --set publishingProfile.endOfLifeDate=2024-08-02T00:00:00+00:00
  - summary: |-
      Allow to remove the gallery image version from replicated regions.
    syntax: >-
      az sig image-version update -g MyResourceGroup --gallery-name MyGallery \

      --gallery-image-definition MyImage --gallery-image-version 1.0.0 \

      --set safetyProfile.allowDeletionOfReplicatedLocations=true
  requiredParameters:
  - isRequired: true
    name: --gallery-image-definition -i
    summary: |-
      Gallery image definition.
  - isRequired: true
    name: --gallery-image-version -e
    summary: |-
      Gallery image version in semantic version pattern. The allowed characters are digit and period. Digits must be within the range of a 32-bit integer, e.g. `<MajorVersion>.<MinorVersion>.<Patch>`.
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      Gallery name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --add
    defaultValue: "[]"
    summary: |-
      Add an object to a list of objects by specifying a path and key value pairs.  Example: `--add property.listProperty <key=value, string or JSON string>`.
  - name: --allow-replicated-location-deletion
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether or not removing this gallery image version from replicated regions is allowed.
  - name: --force-string
    defaultValue: "False"
    summary: |-
      When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --remove
    defaultValue: "[]"
    summary: |-
      Remove a property or an element from a list.  Example: `--remove property.list <indexToRemove>` OR `--remove propertyToRemove`.
  - name: --replica-count
    summary: |-
      The default number of replicas to be created per region. To set regional replication counts, use --target-regions.
  - name: --set
    defaultValue: "[]"
    summary: |-
      Update an object by specifying a property path and value to set.  Example: `--set property1.property2=<value>`.
  - name: --target-edge-zones
    summary: |-
      Space-separated list of regions, edge zones, replica counts and storage types. Use <region>=<edge zone>[=<replica count>][=<storage account type>] to optionally set the replica count and/or storage account type for each region. If a replica count is not specified, the default replica count will be used. If a storage account type is not specified, the default storage account type will be used. If "--target-edge-zones None" is specified, the target extended locations will be cleared.
  - name: --target-regions
    summary: |-
      Space-separated list of regions and their replica counts. Use `<region>[=<replica count>][=<storage account type>]` to optionally set the replica count and/or storage account type for each region. If a replica count is not specified, the default replica count will be used. If a storage account type is not specified, the default storage account type will be used.
- uid: az_sig_image-version_wait
  name: az sig image-version wait
  summary: |-
    Wait for image version related operation.
  status: GA
  sourceType: Core
  syntax: >-
    az sig image-version wait --gallery-image-definition
                              --gallery-image-version
                              --gallery-name
                              --resource-group
                              [--created]
                              [--custom]
                              [--deleted]
                              [--exists]
                              [--expand]
                              [--interval]
                              [--timeout]
                              [--updated]
  examples:
  - summary: |-
      wait for an image version gets updated
    syntax: >-
      az sig image-version wait --updated --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0
  - summary: |-
      wait for image version related operation. (autogenerated)
    syntax: >-
      az sig image-version wait --created --resource-group MyResourceGroup \

      --gallery-name MyGallery --gallery-image-definition MyImage \

      --gallery-image-version 1.0.0
  requiredParameters:
  - isRequired: true
    name: --gallery-image-definition -i
    summary: |-
      Gallery image definition.
  - isRequired: true
    name: --gallery-image-version -e
    summary: |-
      Gallery image version in semantic version pattern. The allowed characters are digit and period. Digits must be within the range of a 32-bit integer, e.g. `<MajorVersion>.<MinorVersion>.<Patch>`.
  - isRequired: true
    name: --gallery-name -r
    summary: |-
      Gallery name.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --created
    defaultValue: "False"
    summary: |-
      Wait until created with 'provisioningState' at 'Succeeded'.
  - name: --custom
    summary: |-
      Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
  - name: --deleted
    defaultValue: "False"
    summary: |-
      Wait until deleted.
  - name: --exists
    defaultValue: "False"
    summary: |-
      Wait until the resource exists.
  - name: --expand
    summary: |-
      The expand expression to apply on the operation. 'ReplicationStatus' Default value is None.
  - name: --interval
    defaultValue: "30"
    summary: |-
      Polling interval in seconds.
  - name: --timeout
    defaultValue: "3600"
    summary: |-
      Maximum wait in seconds.
  - name: --updated
    defaultValue: "False"
    summary: |-
      Wait until updated with provisioningState at 'Succeeded'.
commands:
- az_sig_image-version_create
- az_sig_image-version_delete
- az_sig_image-version_list
- az_sig_image-version_list-community
- az_sig_image-version_list-community(image-gallery)
- az_sig_image-version_list-shared
- az_sig_image-version_show
- az_sig_image-version_show-community
- az_sig_image-version_show-community(image-gallery)
- az_sig_image-version_show-shared
- az_sig_image-version_undelete
- az_sig_image-version_update
- az_sig_image-version_wait
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, none, table, tsv, yaml, yamlc"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  description: Manage shared gallery image version with VM.
