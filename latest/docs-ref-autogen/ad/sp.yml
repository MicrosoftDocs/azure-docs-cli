### YamlMime:AzureCLIGroup
uid: az_ad_sp
name: az ad sp
summary: Manage Azure Active Directory service principals for automation authentication.
description: ''
directCommands:
- uid: az_ad_sp_create
  name: az ad sp create
  summary: Create a service principal.
  description: ''
  syntax: az ad sp create --id
  examples:
  - summary: Create a service principal. (autogenerated)
    syntax: az ad sp create --id 00000000-0000-0000-0000-000000000000
  requiredParameters:
  - isRequired: true
    name: --id
    summary: Identifier uri, application id, or object id of the associated application.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
- uid: az_ad_sp_create_for_rbac
  name: az ad sp create-for-rbac
  summary: Create a service principal and configure its access to Azure resources.
  description: >-
    The output includes credentials that you must protect. Be sure that you do not include these credentials in your code or check the credentials into your source control. As an alternative, consider using [managed identities](<a href="https://aka.ms/azadsp-managed-identities">https://aka.ms/azadsp-managed-identities</a>) if available to avoid the need to use credentials.


    By default, this command assigns the 'Contributor' role to the service principal at the subscription scope. To reduce your risk of a compromised service principal, use --skip-assignment to avoid creating a role assignment, then assign a more specific role and narrow the scope to a resource or resource group. See [steps to add a role assignment](<a href="https://aka.ms/azadsp-more">https://aka.ms/azadsp-more</a>) for more information.


    WARNING: In a future release, this command will NOT create a 'Contributor' role assignment by default. If needed, use the --role argument to explicitly create a role assignment.
  syntax: >-
    az ad sp create-for-rbac [--cert]
                             [--create-cert]
                             [--keyvault]
                             [--name]
                             [--role]
                             [--scopes]
                             [--sdk-auth {false, true}]
                             [--skip-assignment {false, true}]
                             [--years]
  examples:
  - summary: Create with a default role assignment.
    syntax: az ad sp create-for-rbac
  - summary: Create using a custom name, and with a default assignment.
    syntax: az ad sp create-for-rbac -n "MyApp"
  - summary: Create without a default assignment.
    syntax: az ad sp create-for-rbac --skip-assignment
  - summary: Create with a Contributor role assignments on specified scope.
    syntax: az ad sp create-for-rbac -n "MyApp" --role Contributor --scopes /subscriptions/{SubID}/resourceGroups/{ResourceGroup1} /subscriptions/{SubID}/resourceGroups/{ResourceGroup2}
  - summary: Create using a self-signed certificate.
    syntax: az ad sp create-for-rbac --create-cert
  - summary: Create using a self-signed certificate, and store it within KeyVault.
    syntax: az ad sp create-for-rbac --keyvault MyVault --cert CertName --create-cert
  - summary: Create using existing certificate in KeyVault.
    syntax: az ad sp create-for-rbac --keyvault MyVault --cert CertName
  optionalParameters:
  - name: --cert
    summary: Certificate to use for credentials.
    description: When used with `--keyvault,` indicates the name of the cert to use or create. Otherwise, supply a PEM or DER formatted public certificate string. Use `@{path}` to load from a file. Do not include private key info.
  - name: --create-cert
    summary: Create a self-signed certificate to use for the credential. Only the current OS user has read/write permission to this certificate.
    description: Use with `--keyvault` to create the certificate in Key Vault. Otherwise, a certificate will be created locally.
  - name: --keyvault
    summary: Name or ID of a KeyVault to use for creating or retrieving certificates.
    description: ''
  - name: --name -n
    summary: A URI to use as the logic name. It doesn't need to exist. If not present, CLI will generate one.
    description: ''
  - name: --role
    summary: Role of the service principal.
    description: ''
  - name: --scopes
    summary: Space-separated list of scopes the service principal's role assignment applies to. Defaults to the root of the current subscription. e.g., /subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333, /subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup, or /subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup/providers/Microsoft.Compute/virtualMachines/myVM.
    description: ''
  - name: --sdk-auth
    parameterValueGroup: false, true
    summary: Output result in compatible with Azure SDK auth file.
    description: ''
  - name: --skip-assignment
    parameterValueGroup: false, true
    summary: Skip creating the default assignment, which allows the service principal to access resources under the current subscription. When specified, --scopes will be ignored. You may use `az role assignment create` to create role assignments for this service principal later.
    description: ''
  - name: --years
    summary: 'Number of years for which the credentials will be valid. Default: 1 year.'
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
- uid: az_ad_sp_delete
  name: az ad sp delete
  summary: Delete a service principal and its role assignments.
  description: ''
  syntax: az ad sp delete --id
  examples:
  - summary: Delete a service principal and its role assignments. (autogenerated)
    syntax: az ad sp delete --id 00000000-0000-0000-0000-000000000000
  requiredParameters:
  - isRequired: true
    name: --id
    summary: Service principal name, or object id.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
- uid: az_ad_sp_list
  name: az ad sp list
  summary: List service principals.
  description: For low latency, by default, only the first 100 will be returned unless you provide filter arguments or use "--all".
  syntax: >-
    az ad sp list [--all]
                  [--display-name]
                  [--filter]
                  [--query-examples]
                  [--show-mine]
                  [--spn]
  optionalParameters:
  - name: --all
    summary: List all entities, expect long delay if under a big organization.
    description: ''
  - name: --display-name
    summary: Object's display name or its prefix.
    description: ''
  - name: --filter
    summary: OData filter, e.g. --filter "displayname eq 'test' and servicePrincipalType eq 'Application'".
    description: ''
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  - name: --show-mine
    summary: List entities owned by the current user.
    description: ''
  - name: --spn
    summary: Service principal name.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
- uid: az_ad_sp_show
  name: az ad sp show
  summary: Get the details of a service principal.
  description: ''
  syntax: >-
    az ad sp show --id
                  [--query-examples]
  examples:
  - summary: Get the details of a service principal. (autogenerated)
    syntax: az ad sp show --id 00000000-0000-0000-0000-000000000000
  requiredParameters:
  - isRequired: true
    name: --id
    summary: Service principal name, or object id.
    description: ''
  optionalParameters:
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
- uid: az_ad_sp_update
  name: az ad sp update
  summary: Update a service principal.
  description: ''
  syntax: >-
    az ad sp update --id
                    [--add]
                    [--force-string]
                    [--remove]
                    [--set]
  examples:
  - summary: update a service principal (autogenerated)
    syntax: az ad sp update --id 00000000-0000-0000-0000-000000000000 --set groupMembershipClaims=All
  requiredParameters:
  - isRequired: true
    name: --id
    summary: Service principal name, or object id.
    description: ''
  optionalParameters:
  - name: --add
    summary: 'Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.'
    description: ''
  - name: --force-string
    summary: When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
    description: ''
  - name: --remove
    summary: 'Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.'
    description: ''
  - name: --set
    summary: 'Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.'
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
commands:
- az_ad_sp_create
- az_ad_sp_create_for_rbac
- az_ad_sp_credential
- az_ad_sp_credential_delete
- az_ad_sp_credential_list
- az_ad_sp_credential_reset
- az_ad_sp_delete
- az_ad_sp_list
- az_ad_sp_owner
- az_ad_sp_owner_list
- az_ad_sp_show
- az_ad_sp_update
globalParameters:
- name: --debug
  summary: Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: Show this help message and exit.
- name: --only-show-errors
  summary: Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: json
  parameterValueGroup: json, jsonc, table, tsv
  summary: Output format.
- name: --query
  summary: JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --verbose
  summary: Increase logging verbosity. Use --debug for full debug logs.
metadata:
  doc_source_url_repo: https://github.com/Azure/azure-cli/blob/dev/
  ms.date: 12/22/2020
  description: Manage Azure Active Directory service principals for automation authentication.
