### YamlMime:AzureCLIGroup
uid: az_sql_vm
name: az sql vm
summary: |-
  Manage SQL virtual machines.
status: GA
sourceType: Core
directCommands:
- uid: az_sql_vm_add-to-group
  name: az sql vm add-to-group
  summary: |-
    Adds SQL virtual machine to a SQL virtual machine group.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm add-to-group --sqlvm-group
                           [--bootstrap-acc-pwd]
                           [--ids]
                           [--name]
                           [--operator-acc-pwd]
                           [--resource-group]
                           [--service-acc-pwd]
                           [--subscription]
  examples:
  - summary: |-
      Add SQL virtual machine to a group.
    syntax: az sql vm add-to-group -n sqlvm -g myresourcegroup --sqlvm-group sqlvmgroup --bootstrap-acc-pwd {bootstrappassword} --operator-acc-pwd {operatorpassword} --service-acc-pwd {servicepassword}
  requiredParameters:
  - isRequired: true
    name: --sqlvm-group -r
    summary: |-
      Name or resource ID of the SQL virtual machine group. If only name provided, SQL virtual machine group should be in the same resource group of the SQL virtual machine.
  optionalParameters:
  - name: --bootstrap-acc-pwd -b
    summary: |-
      Password for the cluster bootstrap account if provided in the SQL virtual machine group.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Name of the SQL virtual machine.
  - name: --operator-acc-pwd -p
    summary: |-
      Password for the cluster operator account provided in the SQL virtual machine group.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --service-acc-pwd -s
    summary: |-
      Password for the SQL service account provided in the SQL virtual machine group.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sql_vm_create
  name: az sql vm create
  summary: |-
    Creates a SQL virtual machine.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm create --name
                     --resource-group
                     [--backup-pwd]
                     [--backup-schedule-type {Automated, Manual}]
                     [--backup-system-dbs {false, true}]
                     [--connectivity-type {LOCAL, PRIVATE, PUBLIC}]
                     [--credential-name]
                     [--day-of-week {Everyday, Friday, Monday, Saturday, Sunday, Thursday, Tuesday, Wednesday}]
                     [--enable-auto-backup {false, true}]
                     [--enable-auto-patching {false, true}]
                     [--enable-encryption {false, true}]
                     [--enable-key-vault-credential {false, true}]
                     [--enable-r-services {false, true}]
                     [--full-backup-duration]
                     [--full-backup-frequency {Daily, Weekly}]
                     [--full-backup-start-hour]
                     [--image-offer]
                     [--image-sku {Developer, Enterprise, Express, Standard, Web}]
                     [--key-vault]
                     [--least-privilege-mode {Enabled, NotSet}]
                     [--license-type {AHUB, DR, PAYG}]
                     [--location]
                     [--log-backup-frequency]
                     [--maintenance-window-duration]
                     [--maintenance-window-start-hour]
                     [--port]
                     [--retention-period]
                     [--sa-key]
                     [--sp-name]
                     [--sp-secret]
                     [--sql-auth-update-pwd]
                     [--sql-auth-update-username]
                     [--sql-mgmt-type {Full, LightWeight, NoAgent}]
                     [--sql-workload-type {DW, GENERAL, OLTP}]
                     [--storage-account]
                     [--tags]
  examples:
  - summary: |-
      Create a SQL virtual machine with AHUB billing tag.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --license-type AHUB
  - summary: |-
      Create a SQL virtual machine with DR billing tag.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --license-type DR
  - summary: |-
      Create a SQL virtual machine with specific sku type and license type.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --image-sku Enterprise --license-type AHUB
  - summary: |-
      Create a SQL virtual machine with least privilege mode enabled.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --least-privilege-mode Enabled --sql-mgmt-type Full
  - summary: |-
      Create a SQL virtual machine with NoAgent type, only valid for EOS SQL 2008 and SQL 2008 R2.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --license-type AHUB --sql-mgmt-type NoAgent --image-sku Enterprise --image-offer SQL2008-WS2008R2
  - summary: |-
      Enable R services in SQL2016 onwards.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --license-type PAYG --sql-mgmt-type Full --enable-r-services true
  - summary: |-
      Create SQL virtual machine and configure auto backup settings.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --license-type PAYG --sql-mgmt-type Full --backup-schedule-type manual --full-backup-frequency Weekly --full-backup-start-hour 2 --full-backup-duration 2 --sa-key {storageKey} --storage-account 'https://storageacc.blob.core.windows.net/' --retention-period 30 --log-backup-frequency 60
  - summary: |-
      Create SQL virtual machine and configure auto patching settings.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --license-type PAYG --sql-mgmt-type Full --day-of-week sunday --maintenance-window-duration 60 --maintenance-window-start-hour 2
  - summary: |-
      Create SQL virtual machine and configure SQL connectivity settings.
    syntax: az sql vm create -n sqlvm -g myresourcegroup -l eastus --license-type PAYG --sql-mgmt-type Full --connectivity-type private --port 1433 --sql-auth-update-username {newlogin} --sql-auth-update-pwd {sqlpassword}
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      Name of the SQL virtual machine. The name of the new SQL virtual machine must be equal to the underlying virtual machine created from SQL marketplace image.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --backup-pwd
    summary: |-
      Password for encryption on backup.
  - name: --backup-schedule-type
    parameterValueGroup: "Automated, Manual"
    summary: |-
      Backup schedule type.
  - name: --backup-system-dbs
    defaultValue: "False"
    parameterValueGroup: "false, true"
    summary: |-
      Include system databases on backup.
  - name: --connectivity-type
    parameterValueGroup: "LOCAL, PRIVATE, PUBLIC"
    summary: |-
      SQL Server connectivity option.
  - name: --credential-name
    summary: |-
      Credential name.
  - name: --day-of-week
    parameterValueGroup: "Everyday, Friday, Monday, Saturday, Sunday, Thursday, Tuesday, Wednesday"
    summary: |-
      Day of week to apply the patch on.
  - name: --enable-auto-backup
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable autobackup on SQL virtual machine. If any backup settings provided, parameter automatically sets to true.
  - name: --enable-auto-patching
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable autopatching on SQL virtual machine. If any autopatching settings provided, parameter automatically sets to true.
  - name: --enable-encryption
    defaultValue: "False"
    parameterValueGroup: "false, true"
    summary: |-
      Enable encryption for backup on SQL virtual machine.
  - name: --enable-key-vault-credential
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable key vault credential setting. If any key vault settings provided, parameter automatically sets to true.
  - name: --enable-r-services
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable R services (SQL 2016 onwards).
  - name: --full-backup-duration
    summary: |-
      Duration of the time window of a given day during which full backups can take place. 1-23 hours.
  - name: --full-backup-frequency
    parameterValueGroup: "Daily, Weekly"
    summary: |-
      Frequency of full backups. In both cases, full backups begin during the next scheduled time window.
  - name: --full-backup-start-hour
    summary: |-
      Start time of a given day during which full backups can take place. 0-23 hours.
  - name: --image-offer
    summary: |-
      SQL image offer. Examples include SQL2008R2-WS2008, SQL2008-WS2008.
  - name: --image-sku
    parameterValueGroup: "Developer, Enterprise, Express, Standard, Web"
    summary: |-
      SQL image sku.
  - name: --key-vault
    summary: |-
      Azure Key Vault url.
  - name: --least-privilege-mode
    parameterValueGroup: "Enabled, NotSet"
    summary: |-
      SQL IaaS Agent Least Privilege Mode. Updates from sysadmin to specific permissions used per feature.
  - name: --license-type -i
    parameterValueGroup: "AHUB, DR, PAYG"
    summary: |-
      SQL Server license type.
  - name: --location -l
    summary: |-
      Location. If not provided, virtual machine should be in the same region of resource group.You can configure the default location using `az configure --defaults location=<location>`.
  - name: --log-backup-frequency
    summary: |-
      Frequency of log backups. 5-60 minutes.
  - name: --maintenance-window-duration
    summary: |-
      Duration of patching. 30-180 minutes.
  - name: --maintenance-window-start-hour
    summary: |-
      Hour of the day when patching is initiated. Local VM time 0-23 hours.
  - name: --port
    summary: |-
      SQL Server port.
  - name: --retention-period
    summary: |-
      Retention period of backup. 1-30 days.
  - name: --sa-key
    summary: |-
      Storage account key where backup will be taken to.
  - name: --sp-name
    summary: |-
      Service principal name to access key vault.
  - name: --sp-secret
    summary: |-
      Service principal name secret to access key vault.
  - name: --sql-auth-update-pwd
    summary: |-
      SQL Server sysadmin login password.
  - name: --sql-auth-update-username
    summary: |-
      SQL Server sysadmin login to create.
  - name: --sql-mgmt-type
    defaultValue: "LightWeight"
    parameterValueGroup: "Full, LightWeight, NoAgent"
    summary: |-
      SQL Server management type. If NoAgent selected, please provide --image-sku and --offer-type.
    isDeprecated: true
    deprecateInfo: Argument 'sql_management_mode' has been deprecated and will be removed in a future release.
  - name: --sql-workload-type
    parameterValueGroup: "DW, GENERAL, OLTP"
    summary: |-
      SQL Server workload type.
  - name: --storage-account
    summary: |-
      Storage account url where backup will be taken to.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
- uid: az_sql_vm_delete
  name: az sql vm delete
  summary: |-
    Deletes a SQL virtual machine.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm delete [--ids]
                     [--name]
                     [--resource-group]
                     [--subscription]
                     [--yes]
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Name of the SQL virtual machine.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --yes -y
    defaultValue: "False"
    summary: |-
      Do not prompt for confirmation.
- uid: az_sql_vm_enable-azure-ad-auth
  name: az sql vm enable-azure-ad-auth
  summary: |-
    Enable Azure AD authentication of a SQL virtual machine.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm enable-azure-ad-auth [--ids]
                                   [--msi-client-id]
                                   [--name]
                                   [--resource-group]
                                   [--skip-client-validation]
                                   [--subscription]
  examples:
  - summary: |-
      Enable Azure AD authentication with system-assigned managed identity with client side validation.
    syntax: az sql vm enable-azure-ad-auth -n sqlvm -g myresourcegroup
  - summary: |-
      Enable Azure AD authentication with user-assigned managed identity with client side validation.
    syntax: az sql vm enable-azure-ad-auth -n sqlvm -g myresourcegroup --msi-client-id 12345678
  - summary: |-
      Enable Azure AD authentication with system-assigned managed identity skipping client side validation. The server side validation always happens.
    syntax: az sql vm enable-azure-ad-auth -n sqlvm -g myresourcegroup --skip-client-validation
  - summary: |-
      Enable Azure AD authentication with user-assigned managed identity skipping client side validation. The server side validation always happens.
    syntax: az sql vm enable-azure-ad-auth -n sqlvm -g myresourcegroup --msi-client-id 12345678 --skip-client-validation
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --msi-client-id
    summary: |-
      Virutal Machine Managed Identity Client ID.
  - name: --name -n
    summary: |-
      Name of the SQL virtual machine.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --skip-client-validation
    summary: |-
      Skip client side Azure AD authentication validation, the server side validation will still happen.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sql_vm_list
  name: az sql vm list
  summary: |-
    Lists all SQL virtual machines in a resource group or subscription.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: az sql vm list [--resource-group]
  optionalParameters:
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_sql_vm_remove-from-group
  name: az sql vm remove-from-group
  summary: |-
    Remove SQL virtual machine from its current SQL virtual machine group.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm remove-from-group [--ids]
                                [--name]
                                [--resource-group]
                                [--subscription]
  examples:
  - summary: |-
      Remove SQL virtual machine from a group.
    syntax: az sql vm remove-from-group -n sqlvm -g myresourcegroup
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Name of the SQL virtual machine.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sql_vm_show
  name: az sql vm show
  summary: |-
    Gets a SQL virtual machine.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm show [--expand {*, AssessmentSettings, AutoBackupSettings, AutoPatchingSettings, KeyVaultCredentialSettings, ServerConfigurationsManagementSettings}]
                   [--ids]
                   [--name]
                   [--resource-group]
                   [--subscription]
  optionalParameters:
  - name: --expand
    parameterValueGroup: "*, AssessmentSettings, AutoBackupSettings, AutoPatchingSettings, KeyVaultCredentialSettings, ServerConfigurationsManagementSettings"
    summary: |-
      Get the SQLIaaSExtension configuration settings. To view all settings, use *. To select only a few, the settings must be space-separated.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Name of the SQL virtual machine.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sql_vm_start-assessment
  name: az sql vm start-assessment
  summary: |-
    Starts SQL best practice assessment on SQL virtual machine.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm start-assessment [--ids]
                               [--name]
                               [--resource-group]
                               [--subscription]
  examples:
  - summary: |-
      Starts SQL best practice assessment.
    syntax: az sql vm start-assessment -n sqlvm -g myresourcegroup
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Name of the SQL virtual machine.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_sql_vm_update
  name: az sql vm update
  summary: |-
    Updates the properties of a SQL virtual machine.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm update [--add]
                     [--agent-rg]
                     [--am-day {Friday, Monday, Saturday, Sunday, Thursday, Tuesday, Wednesday}]
                     [--am-month-occ {-1, 1, 2, 3, 4}]
                     [--am-schedule {false, true}]
                     [--am-time]
                     [--am-week-int {1, 2, 3, 4, 5, 6}]
                     [--backup-pwd]
                     [--backup-schedule-type {Automated, Manual}]
                     [--backup-system-dbs {false, true}]
                     [--connectivity-type {LOCAL, PRIVATE, PUBLIC}]
                     [--credential-name]
                     [--day-of-week {Everyday, Friday, Monday, Saturday, Sunday, Thursday, Tuesday, Wednesday}]
                     [--enable-assessment {false, true}]
                     [--enable-auto-backup {false, true}]
                     [--enable-auto-patching {false, true}]
                     [--enable-encryption {false, true}]
                     [--enable-key-vault-credential {false, true}]
                     [--enable-r-services {false, true}]
                     [--force-string]
                     [--full-backup-duration]
                     [--full-backup-frequency {Daily, Weekly}]
                     [--full-backup-start-hour]
                     [--ids]
                     [--image-sku {Developer, Enterprise, Express, Standard, Web}]
                     [--key-vault]
                     [--least-privilege-mode {Enabled, NotSet}]
                     [--license-type {AHUB, DR, PAYG}]
                     [--log-backup-frequency]
                     [--maintenance-window-duration]
                     [--maintenance-window-start-hour]
                     [--name]
                     [--port]
                     [--remove]
                     [--resource-group]
                     [--retention-period]
                     [--sa-key]
                     [--set]
                     [--sp-name]
                     [--sp-secret]
                     [--sql-mgmt-type {Full, LightWeight, NoAgent}]
                     [--sql-workload-type {DW, GENERAL, OLTP}]
                     [--storage-account]
                     [--subscription]
                     [--tags]
                     [--workspace-name]
                     [--workspace-rg]
                     [--workspace-sub]
                     [--yes]
  examples:
  - summary: |-
      Add or update a tag.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --set tags.tagName=tagValue
  - summary: |-
      Remove a tag.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --remove tags.tagName
  - summary: |-
      Update a SQL virtual machine with specific sku type.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --image-sku Enterprise
  - summary: |-
      Update a SQL virtual machine manageability from LightWeight to Full.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --sql-mgmt-type Full
  - summary: |-
      Update a SQL virtual machine to least privilege mode.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --least-privilege-mode Enabled --sql-mgmt-type Full
  - summary: |-
      Update SQL virtual machine auto backup settings.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --backup-schedule-type manual --full-backup-frequency Weekly --full-backup-start-hour 2 --full-backup-duration 2 --sa-key {storageKey} --storage-account 'https://storageacc.blob.core.windows.net/' --retention-period 30 --log-backup-frequency 60
  - summary: |-
      Disable SQL virtual machine auto backup settings.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --enable-auto-backup false
  - summary: |-
      Update SQL virtual machine auto patching settings.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --day-of-week sunday --maintenance-window-duration 60 --maintenance-window-start-hour 2
  - summary: |-
      Disable SQL virtual machine auto patching settings.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --enable-auto-patching false
  - summary: |-
      Update a SQL virtual machine billing tag to AHUB.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --license-type AHUB
  - summary: |-
      Update a SQL virtual machine billing tag to DR.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --license-type DR
  - summary: |-
      Update a SQL virtual machine to disable SQL best practice assessment.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --enable-assessment false
  - summary: |-
      Update a SQL virtual machine to disable schedule for SQL best practice assessment.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --enable-assessment-schedule false
  - summary: |-
      Update a SQL virtual machine to enable schedule with weekly interval for SQL best practice assessment when VM is already associated with a Log Analytics workspace.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --assessment-weekly-interval 1 --assessment-day-of-week monday --assessment-start-time-local '19:30'
  - summary: |-
      Update a SQL virtual machine to enable schedule with monthly occurrence for SQL best practice assessment while associating with a Log Analytics workspace and assigning a Resource group for the Agent resources.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --workspace-name myLogAnalyticsWorkspace --workspace-rg myRg --agent-rg myRg2 --assessment-monthly-occurrence 1 --assessment-day-of-week monday --assessment-start-time-local '19:30'
  - summary: |-
      Update a SQL virtual machine to enable SQL best practices assessment without setting a schedule for running assessment on-demand. Must provide Log Analytics workspace and a Resource group for deploying the Agent resources.
    syntax: az sql vm update -n sqlvm -g myresourcegroup --enable-assessment true --workspace-name myLogAnalyticsWorkspace --workspace-rg myRg --agent-rg myRg2
  - summary: |-
      Update a SQL virtual machine to enable SQL best practices assessment while associating with a Log Analytics Workspace in a different subscription
    syntax: az sql vm update -n sqlvm -g myresourcegroup --enable-assessment true --workspace-name myLogAnalyticsWorkspace --workspace-rg myRg --workspace-sub myLogAnalyticsWorkspaceSubName --agent-rg myRg2
  optionalParameters:
  - name: --add
    defaultValue: "[]"
    summary: |-
      Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.
  - name: --agent-rg
    summary: |-
      Resource group containing the AMA resources DCE and DCR.
  - name: --am-day --assessment-day-of-week
    parameterValueGroup: "Friday, Monday, Saturday, Sunday, Thursday, Tuesday, Wednesday"
    summary: |-
      Day of the week to run assessment.
  - name: --am-month-occ --assessment-monthly-occurrence
    parameterValueGroup: "-1, 1, 2, 3, 4"
    summary: |-
      Occurrence of the DayOfWeek day within a month to schedule assessment. Supports values 1,2,3,4 and -1. Use -1 for last DayOfWeek day of the month (for example - last Tuesday of the month).
  - name: --am-schedule --enable-assessment-schedule
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable assessment Schedule. If any assessment schedule settings provided, parameter automatically sets to true.
  - name: --am-time --assessment-start-time-local
    summary: |-
      Time of the day in HH:mm format. Examples include 17:30, 05:13.
  - name: --am-week-int --assessment-weekly-interval
    parameterValueGroup: "1, 2, 3, 4, 5, 6"
    summary: |-
      Number of weeks to schedule between 2 assessment runs. Supports value from 1-6.
  - name: --backup-pwd
    summary: |-
      Password for encryption on backup.
  - name: --backup-schedule-type
    parameterValueGroup: "Automated, Manual"
    summary: |-
      Backup schedule type.
  - name: --backup-system-dbs
    defaultValue: "False"
    parameterValueGroup: "false, true"
    summary: |-
      Include system databases on backup.
  - name: --connectivity-type
    parameterValueGroup: "LOCAL, PRIVATE, PUBLIC"
    summary: |-
      SQL Server connectivity option.
  - name: --credential-name
    summary: |-
      Credential name.
  - name: --day-of-week
    parameterValueGroup: "Everyday, Friday, Monday, Saturday, Sunday, Thursday, Tuesday, Wednesday"
    summary: |-
      Day of week to apply the patch on.
  - name: --enable-assessment
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable assessment feature. If any assessment settings provided, parameter automatically sets to true.
  - name: --enable-auto-backup
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable autobackup on SQL virtual machine. If any backup settings provided, parameter automatically sets to true.
  - name: --enable-auto-patching
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable autopatching on SQL virtual machine. If any autopatching settings provided, parameter automatically sets to true.
  - name: --enable-encryption
    defaultValue: "False"
    parameterValueGroup: "false, true"
    summary: |-
      Enable encryption for backup on SQL virtual machine.
  - name: --enable-key-vault-credential
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable key vault credential setting. If any key vault settings provided, parameter automatically sets to true.
  - name: --enable-r-services
    parameterValueGroup: "false, true"
    summary: |-
      Enable or disable R services (SQL 2016 onwards).
  - name: --force-string
    defaultValue: "False"
    summary: |-
      When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
  - name: --full-backup-duration
    summary: |-
      Duration of the time window of a given day during which full backups can take place. 1-23 hours.
  - name: --full-backup-frequency
    parameterValueGroup: "Daily, Weekly"
    summary: |-
      Frequency of full backups. In both cases, full backups begin during the next scheduled time window.
  - name: --full-backup-start-hour
    summary: |-
      Start time of a given day during which full backups can take place. 0-23 hours.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --image-sku
    parameterValueGroup: "Developer, Enterprise, Express, Standard, Web"
    summary: |-
      SQL image sku.
  - name: --key-vault
    summary: |-
      Azure Key Vault url.
  - name: --least-privilege-mode
    parameterValueGroup: "Enabled, NotSet"
    summary: |-
      SQL IaaS Agent Least Privilege Mode. Updates from sysadmin to specific permissions used per feature.
  - name: --license-type -i
    parameterValueGroup: "AHUB, DR, PAYG"
    summary: |-
      SQL Server license type.
  - name: --log-backup-frequency
    summary: |-
      Frequency of log backups. 5-60 minutes.
  - name: --maintenance-window-duration
    summary: |-
      Duration of patching. 30-180 minutes.
  - name: --maintenance-window-start-hour
    summary: |-
      Hour of the day when patching is initiated. Local VM time 0-23 hours.
  - name: --name -n
    summary: |-
      Name of the SQL virtual machine.
  - name: --port
    summary: |-
      SQL Server port.
  - name: --remove
    defaultValue: "[]"
    summary: |-
      Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --retention-period
    summary: |-
      Retention period of backup. 1-30 days.
  - name: --sa-key
    summary: |-
      Storage account key where backup will be taken to.
  - name: --set
    defaultValue: "[]"
    summary: |-
      Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.
  - name: --sp-name
    summary: |-
      Service principal name to access key vault.
  - name: --sp-secret
    summary: |-
      Service principal name secret to access key vault.
  - name: --sql-mgmt-type
    parameterValueGroup: "Full, LightWeight, NoAgent"
    summary: |-
      SQL Server management type. Updates from LightWeight to Full.
    isDeprecated: true
    deprecateInfo: Argument 'sql_management_mode' has been deprecated and will be removed in a future release.
  - name: --sql-workload-type
    parameterValueGroup: "DW, GENERAL, OLTP"
    summary: |-
      SQL Server workload type.
  - name: --storage-account
    summary: |-
      Storage account url where backup will be taken to.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
  - name: --workspace-name
    summary: |-
      Name of the Log Analytics workspace to associate with VM.
  - name: --workspace-rg
    summary: |-
      Resource group containing the Log Analytics workspace.
  - name: --workspace-sub
    summary: |-
      Subscription containing the Log Analytics workspace.
  - name: --yes -y
    defaultValue: "True"
    summary: |-
      Do not prompt for confirmation. Requires --sql-mgmt-type.
    isDeprecated: true
    deprecateInfo: Argument 'prompt' has been deprecated and will be removed in a future release.
- uid: az_sql_vm_validate-azure-ad-auth
  name: az sql vm validate-azure-ad-auth
  summary: |-
    Validate Azure AD authentication of a SQL virtual machine at the client side without enabling it.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/sql/_help.py
  syntax: >-
    az sql vm validate-azure-ad-auth [--ids]
                                     [--msi-client-id]
                                     [--name]
                                     [--resource-group]
                                     [--subscription]
  examples:
  - summary: |-
      Validate Azure AD authentication with system-assigned managed identity at the client side.
    syntax: az sql vm validate-azure-ad-auth -n sqlvm -g myresourcegroup
  - summary: |-
      Validate Azure AD authentication with user-assigned managed identity at the client side.
    syntax: az sql vm validate-azure-ad-auth -n sqlvm -g myresourcegroup --msi-client-id 12345678
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --msi-client-id
    summary: |-
      Virutal Machine Managed Identity Client ID.
  - name: --name -n
    summary: |-
      Name of the SQL virtual machine.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
commands:
- az_sql_vm_add-to-group
- az_sql_vm_create
- az_sql_vm_delete
- az_sql_vm_enable-azure-ad-auth
- az_sql_vm_group
- az_sql_vm_group_ag-listener
- az_sql_vm_group_ag-listener_create
- az_sql_vm_group_ag-listener_delete
- az_sql_vm_group_ag-listener_list
- az_sql_vm_group_ag-listener_show
- az_sql_vm_group_ag-listener_update
- az_sql_vm_group_create
- az_sql_vm_group_delete
- az_sql_vm_group_list
- az_sql_vm_group_show
- az_sql_vm_group_update
- az_sql_vm_list
- az_sql_vm_remove-from-group
- az_sql_vm_show
- az_sql_vm_start-assessment
- az_sql_vm_update
- az_sql_vm_validate-azure-ad-auth
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, none, table, tsv, yaml, yamlc"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  ms.date: 11/24/2023
  description: Manage SQL virtual machines.
