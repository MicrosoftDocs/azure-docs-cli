### YamlMime:AzureCLIGroup
uid: az_keyvault
name: az keyvault
summary: Manage KeyVault keys, secrets, and certificates.
description: ''
directCommands:
- uid: az_keyvault_create
  name: az keyvault create
  summary: Create a Vault or HSM.
  description: If `--enable-rbac-authorization` is not specified, then default permissions are created for the current user or service principal unless the `--no-self-perms` flag is specified.
  syntax: >-
    az keyvault create --resource-group
                       [--administrators]
                       [--bypass {AzureServices, None}]
                       [--default-action {Allow, Deny}]
                       [--enable-purge-protection {false, true}]
                       [--enable-rbac-authorization {false, true}]
                       [--enable-soft-delete {false, true}]
                       [--enabled-for-deployment {false, true}]
                       [--enabled-for-disk-encryption {false, true}]
                       [--enabled-for-template-deployment {false, true}]
                       [--hsm-name]
                       [--location]
                       [--name]
                       [--network-acls]
                       [--network-acls-ips]
                       [--network-acls-vnets]
                       [--no-self-perms {false, true}]
                       [--no-wait]
                       [--retention-days]
                       [--sku]
                       [--subscription]
                       [--tags]
  examples:
  - summary: Create a key vault with network ACLs specified (use --network-acls to specify IP and VNet rules by using a JSON string).
    syntax: 'az keyvault create --location westus2 --name MyKeyVault --resource-group MyResourceGroup --network-acls "{\"ip\": [\"1.2.3.4\", \"2.3.4.0/24\"], \"vnet\": [\"vnet_name_1/subnet_name1\", \"vnet_name_2/subnet_name2\", \"/subscriptions/000000-0000-0000/resourceGroups/MyResourceGroup/providers/Microsoft.Network/virtualNetworks/MyVNet/subnets/MySubnet\"]}"'
  - summary: Create a key vault with network ACLs specified (use --network-acls to specify IP and VNet rules by using a JSON file).
    syntax: az keyvault create --location westus2 --name MyKeyVault --resource-group MyResourceGroup --network-acls network-acls-example.json
  - summary: Create a key vault with network ACLs specified (use --network-acls-ips to specify IP rules).
    syntax: az keyvault create --location westus2 --name MyKeyVault --resource-group MyResourceGroup --network-acls-ips 3.4.5.0/24 4.5.6.0/24
  - summary: Create a key vault with network ACLs specified (use --network-acls-vnets to specify VNet rules).
    syntax: az keyvault create --location westus2 --name MyKeyVault --resource-group MyResourceGroup --network-acls-vnets vnet_name_2/subnet_name_2 vnet_name_3/subnet_name_3 /subscriptions/000000-0000-0000/resourceGroups/MyResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet_name_4/subnets/subnet_name_4
  - summary: Create a key vault with network ACLs specified (use --network-acls, --network-acls-ips and --network-acls-vnets together, redundant rules will be removed, finally there will be 4 IP rules and 3 VNet rules).
    syntax: 'az keyvault create --location westus2 --name MyKeyVault --resource-group MyResourceGroup --network-acls "{\"ip\": [\"1.2.3.4\", \"2.3.4.0/24\"], \"vnet\": [\"vnet_name_1/subnet_name1\", \"vnet_name_2/subnet_name2\"]}" --network-acls-ips 3.4.5.0/24 4.5.6.0/24 --network-acls-vnets vnet_name_2/subnet_name_2 vnet_name_3/subnet_name_3 /subscriptions/000000-0000-0000/resourceGroups/MyResourceGroup/providers/Microsoft.Network/virtualNetworks/vnet_name_4/subnets/subnet_name_4'
  - summary: Create a key vault. (autogenerated)
    syntax: az keyvault create --location westus2 --name MyKeyVault --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  optionalParameters:
  - name: --administrators
    summary: '[HSM Only] Administrator role for data plane operations for Managed HSM. It accepts a space separated list of OIDs that will be assigned.'
    description: ''
  - name: --bypass
    parameterValueGroup: AzureServices, None
    summary: Bypass traffic for space-separated uses.
    description: ''
  - name: --default-action
    parameterValueGroup: Allow, Deny
    summary: Default action to apply when no rule matches.
    description: ''
  - name: --enable-purge-protection
    parameterValueGroup: false, true
    summary: Property specifying whether protection against purge is enabled for this vault. Setting this property to true activates protection against purge for this vault and its content - only the Key Vault service may initiate a hard, irrecoverable deletion. The setting is effective only if soft delete is also enabled. Enabling this functionality is irreversible - that is, the property does not accept false as its value.
    description: ''
  - name: --enable-rbac-authorization
    parameterValueGroup: false, true
    summary: 'Property that controls how data actions are authorized. When true, the key vault will use Role Based Access Control (RBAC) for authorization of data actions, and the access policies specified in vault properties will be  ignored (warning: this is a preview feature). When false, the key vault will use the access policies specified in vault properties, and any policy stored on Azure Resource Manager will be ignored. If null or not specified, the vault is created with the default value of false. Note that management actions are always authorized with RBAC.'
    description: ''
  - name: --enable-soft-delete
    parameterValueGroup: false, true
    summary: "[Vault Only] Property to specify whether the 'soft delete' functionality is enabled for this key vault. If it's not set to any value (true or false) when creating new key vault, it will be set to true by default. Once set to true, it cannot be reverted to false."
    description: ''
  - name: --enabled-for-deployment
    parameterValueGroup: false, true
    summary: '[Vault Only] Property to specify whether Azure Virtual Machines are permitted to retrieve certificates stored as secrets from the key vault.'
    description: ''
  - name: --enabled-for-disk-encryption
    parameterValueGroup: false, true
    summary: '[Vault Only] Property to specify whether Azure Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys.'
    description: ''
  - name: --enabled-for-template-deployment
    parameterValueGroup: false, true
    summary: '[Vault Only] Property to specify whether Azure Resource Manager is permitted to retrieve secrets from the key vault.'
    description: ''
  - name: --hsm-name
    summary: Name of the HSM. (--hsm-name and --name/-n are mutually exclusive, please specify just one of them).
    description: ''
  - name: --location -l
    summary: 'Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.'
    description: ''
  - name: --name -n
    summary: Name of the Vault.
    description: ''
  - name: --network-acls
    summary: 'Network ACLs. It accepts a JSON filename or a JSON string. JSON format: `{"ip":[<ip1>, <ip2>...],"vnet":[<vnet_name_1>/<subnet_name_1>,<subnet_id2>...]}`.'
    description: ''
  - name: --network-acls-ips
    summary: Network ACLs IP rules. Space-separated list of IP addresses.
    description: ''
  - name: --network-acls-vnets
    summary: Network ACLS VNet rules. Space-separated list of Vnet/subnet pairs or subnet resource ids.
    description: ''
  - name: --no-self-perms
    parameterValueGroup: false, true
    summary: "[Vault Only] Don't add permissions for the current user/service principal in the new vault."
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --retention-days
    defaultValue: "90"
    summary: Soft delete data retention days. It accepts >=7 and <=90.
    description: ''
  - name: --sku
    summary: 'Required. SKU details. Allowed values for Vault: premium, standard. Default: standard. Allowed values for HSM: Standard_B1, Custom_B32. Default: Standard_B1.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --tags
    summary: 'Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.'
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_delete
  name: az keyvault delete
  summary: Delete a Vault or HSM.
  description: ''
  syntax: >-
    az keyvault delete [--hsm-name]
                       [--name]
                       [--no-wait]
                       [--resource-group]
                       [--subscription]
  examples:
  - summary: Delete a key vault. (autogenerated)
    syntax: az keyvault delete --name MyKeyVault --resource-group MyResourceGroup
  optionalParameters:
  - name: --hsm-name
    summary: Name of the HSM. (--hsm-name and --name/-n are mutually exclusive, please specify just one of them).
    description: ''
  - name: --name -n
    summary: Name of the Vault.
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Proceed only if Key Vault belongs to the specified resource group.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_delete-policy
  name: az keyvault delete-policy
  summary: Delete security policy settings for a Key Vault.
  description: ''
  syntax: >-
    az keyvault delete-policy --name
                              [--application-id]
                              [--no-wait]
                              [--object-id]
                              [--resource-group]
                              [--spn]
                              [--subscription]
                              [--upn]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the Vault.
    description: ''
  optionalParameters:
  - name: --application-id
    summary: Application ID of the client making request on behalf of a principal. Exposed for compound identity using on-behalf-of authentication flow.
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --object-id
    summary: A GUID that identifies the principal that will receive permissions.
    description: ''
  - name: --resource-group -g
    summary: Proceed only if Key Vault belongs to the specified resource group.
    description: ''
  - name: --spn
    summary: Name of a service principal that will receive permissions.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --upn
    summary: Name of a user principal that will receive permissions.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_list
  name: az keyvault list
  summary: List Vaults and/or HSMs.
  description: ''
  syntax: >-
    az keyvault list [--query-examples]
                     [--resource-group]
                     [--resource-type]
                     [--subscription]
  optionalParameters:
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  - name: --resource-group -g
    summary: Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    description: ''
  - name: --resource-type
    summary: When --resource-type is not present the command will list all Vaults and HSMs. Possible values for --resource-type are vault and hsm.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_list-deleted
  name: az keyvault list-deleted
  summary: Get information about the deleted Vaults or HSMs in a subscription.
  description: ''
  syntax: >-
    az keyvault list-deleted [--resource-type]
                             [--subscription]
  optionalParameters:
  - name: --resource-type
    summary: When --resource-type is not present the command will list all deleted Vaults and HSMs. Possible values for --resource-type are vault and hsm.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_purge
  name: az keyvault purge
  summary: Permanently delete the specified Vault or HSM. Aka Purges the deleted Vault or HSM.
  description: ''
  syntax: >-
    az keyvault purge [--hsm-name]
                      [--location]
                      [--name]
                      [--no-wait]
                      [--subscription]
  optionalParameters:
  - name: --hsm-name
    summary: Name of the deleted HSM. (--hsm-name and --name/-n are mutually exclusive, please specify just one of them).
    description: ''
  - name: --location -l
    summary: Location of the deleted Vault or HSM.
    description: ''
  - name: --name -n
    summary: Name of the deleted Vault.
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_recover
  name: az keyvault recover
  summary: Recover a Vault or HSM.
  description: Recover a previously deleted Vault or HSM for which soft delete was enabled.
  syntax: >-
    az keyvault recover [--hsm-name]
                        [--location]
                        [--name]
                        [--no-wait]
                        [--resource-group]
                        [--subscription]
  examples:
  - summary: Recover a key vault. (autogenerated)
    syntax: az keyvault recover --location westus2 --name MyKeyVault --resource-group MyResourceGroup
  optionalParameters:
  - name: --hsm-name
    summary: Name of the deleted HSM. (--hsm-name and --name/-n are mutually exclusive, please specify just one of them).
    description: ''
  - name: --location -l
    summary: Location of the deleted Vault or HSM.
    description: ''
  - name: --name -n
    summary: Name of the deleted Vault.
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --resource-group -g
    summary: Resource group of the deleted Vault or HSM.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_set-policy
  name: az keyvault set-policy
  summary: Update security policy settings for a Key Vault.
  description: ''
  syntax: >-
    az keyvault set-policy --name
                           [--application-id]
                           [--certificate-permissions {backup, create, delete, deleteissuers, get, getissuers, import, list, listissuers, managecontacts, manageissuers, purge, recover, restore, setissuers, update}]
                           [--key-permissions {backup, create, decrypt, delete, encrypt, get, import, list, purge, recover, restore, sign, unwrapKey, update, verify, wrapKey}]
                           [--no-wait]
                           [--object-id]
                           [--resource-group]
                           [--secret-permissions {backup, delete, get, list, purge, recover, restore, set}]
                           [--spn]
                           [--storage-permissions {backup, delete, deletesas, get, getsas, list, listsas, purge, recover, regeneratekey, restore, set, setsas, update}]
                           [--subscription]
                           [--upn]
  examples:
  - summary: Assign key permissions `get`, `list`, `import` and secret permissions `backup`, `restore` to an object id.
    syntax: az keyvault set-policy -n MyVault --key-permissions get list import --secret-permissions backup restore --object-id {GUID}
  - summary: Assign key permissions `get`, `list` to a UPN (User Principal Name).
    syntax: az keyvault set-policy -n MyVault --key-permissions get list --upn {UPN}
  - summary: Assign key permissions `get`, `list` to a SPN (Service Principal Name).
    syntax: az keyvault set-policy -n MyVault --key-permissions get list --spn {SPN}
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the Vault.
    description: ''
  optionalParameters:
  - name: --application-id
    summary: Application ID of the client making request on behalf of a principal. Exposed for compound identity using on-behalf-of authentication flow.
    description: ''
  - name: --certificate-permissions
    parameterValueGroup: backup, create, delete, deleteissuers, get, getissuers, import, list, listissuers, managecontacts, manageissuers, purge, recover, restore, setissuers, update
    summary: Space-separated list of certificate permissions to assign.
    description: ''
  - name: --key-permissions
    parameterValueGroup: backup, create, decrypt, delete, encrypt, get, import, list, purge, recover, restore, sign, unwrapKey, update, verify, wrapKey
    summary: Space-separated list of key permissions to assign.
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --object-id
    summary: A GUID that identifies the principal that will receive permissions.
    description: ''
  - name: --resource-group -g
    summary: Proceed only if Key Vault belongs to the specified resource group.
    description: ''
  - name: --secret-permissions
    parameterValueGroup: backup, delete, get, list, purge, recover, restore, set
    summary: Space-separated list of secret permissions to assign.
    description: ''
  - name: --spn
    summary: Name of a service principal that will receive permissions.
    description: ''
  - name: --storage-permissions
    parameterValueGroup: backup, delete, deletesas, get, getsas, list, listsas, purge, recover, regeneratekey, restore, set, setsas, update
    summary: Space-separated list of storage permissions to assign.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --upn
    summary: Name of a user principal that will receive permissions.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_show
  name: az keyvault show
  summary: Show details of a Vault or HSM.
  description: ''
  syntax: >-
    az keyvault show [--hsm-name]
                     [--name]
                     [--query-examples]
                     [--resource-group]
                     [--subscription]
  examples:
  - summary: Show details of a key vault. (autogenerated)
    syntax: az keyvault show --name MyKeyVault
  optionalParameters:
  - name: --hsm-name
    summary: Name of the HSM. (--hsm-name and --name/-n are mutually exclusive, please specify just one of them).
    description: ''
  - name: --name -n
    summary: Name of the Vault.
    description: ''
  - name: --query-examples
    summary: Recommend JMESPath string for you. You can copy one of the query and paste it after --query parameter within double quotation marks to see the results. You can add one or more positional keywords so that we can give suggestions based on these key words.
    description: ''
  - name: --resource-group -g
    summary: Proceed only if Key Vault belongs to the specified resource group.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_show-deleted
  name: az keyvault show-deleted
  summary: Show details of a deleted Vault or HSM.
  description: ''
  syntax: >-
    az keyvault show-deleted [--hsm-name]
                             [--location]
                             [--name]
                             [--subscription]
  examples:
  - summary: Show details of a deleted key vault.
    syntax: az keyvault show-deleted --name MyKeyVault
  optionalParameters:
  - name: --hsm-name
    summary: Name of the deleted HSM. (--hsm-name and --name/-n are mutually exclusive, please specify just one of them).
    description: ''
  - name: --location -l
    summary: Location of the deleted Vault or HSM.
    description: ''
  - name: --name -n
    summary: Name of the deleted Vault.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_update
  name: az keyvault update
  summary: Update the properties of a Vault.
  description: ''
  syntax: >-
    az keyvault update --name
                       [--add]
                       [--bypass {AzureServices, None}]
                       [--default-action {Allow, Deny}]
                       [--enable-purge-protection {false, true}]
                       [--enable-rbac-authorization {false, true}]
                       [--enable-soft-delete {false, true}]
                       [--enabled-for-deployment {false, true}]
                       [--enabled-for-disk-encryption {false, true}]
                       [--enabled-for-template-deployment {false, true}]
                       [--force-string]
                       [--no-wait]
                       [--remove]
                       [--resource-group]
                       [--retention-days]
                       [--set]
                       [--subscription]
  examples:
  - summary: Update the properties of a Vault. (autogenerated)
    syntax: az keyvault update --enabled-for-disk-encryption true --name MyKeyVault --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the Vault.
    description: ''
  optionalParameters:
  - name: --add
    summary: 'Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.'
    description: ''
  - name: --bypass
    parameterValueGroup: AzureServices, None
    summary: Bypass traffic for space-separated uses.
    description: ''
  - name: --default-action
    parameterValueGroup: Allow, Deny
    summary: Default action to apply when no rule matches.
    description: ''
  - name: --enable-purge-protection
    parameterValueGroup: false, true
    summary: Property specifying whether protection against purge is enabled for this vault. Setting this property to true activates protection against purge for this vault and its content - only the Key Vault service may initiate a hard, irrecoverable deletion. The setting is effective only if soft delete is also enabled. Enabling this functionality is irreversible - that is, the property does not accept false as its value.
    description: ''
  - name: --enable-rbac-authorization
    parameterValueGroup: false, true
    summary: 'Property that controls how data actions are authorized. When true, the key vault will use Role Based Access Control (RBAC) for authorization of data actions, and the access policies specified in vault properties will be  ignored (warning: this is a preview feature). When false, the key vault will use the access policies specified in vault properties, and any policy stored on Azure Resource Manager will be ignored. If null or not specified, the vault is created with the default value of false. Note that management actions are always authorized with RBAC.'
    description: ''
  - name: --enable-soft-delete
    parameterValueGroup: false, true
    summary: "[Vault Only] Property to specify whether the 'soft delete' functionality is enabled for this key vault. If it's not set to any value (true or false) when creating new key vault, it will be set to true by default. Once set to true, it cannot be reverted to false."
    description: ''
  - name: --enabled-for-deployment
    parameterValueGroup: false, true
    summary: '[Vault Only] Property to specify whether Azure Virtual Machines are permitted to retrieve certificates stored as secrets from the key vault.'
    description: ''
  - name: --enabled-for-disk-encryption
    parameterValueGroup: false, true
    summary: '[Vault Only] Property to specify whether Azure Disk Encryption is permitted to retrieve secrets from the vault and unwrap keys.'
    description: ''
  - name: --enabled-for-template-deployment
    parameterValueGroup: false, true
    summary: '[Vault Only] Property to specify whether Azure Resource Manager is permitted to retrieve secrets from the key vault.'
    description: ''
  - name: --force-string
    summary: When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --remove
    summary: 'Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.'
    description: ''
  - name: --resource-group -g
    summary: Proceed only if Key Vault belongs to the specified resource group.
    description: ''
  - name: --retention-days
    summary: Soft delete data retention days. It accepts >=7 and <=90.
    description: ''
  - name: --set
    summary: 'Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_update-hsm
  name: az keyvault update-hsm
  summary: Update the properties of a HSM.
  description: ''
  syntax: >-
    az keyvault update-hsm --hsm-name
                           [--add]
                           [--bypass {AzureServices, None}]
                           [--default-action {Allow, Deny}]
                           [--enable-purge-protection {false, true}]
                           [--force-string]
                           [--no-wait]
                           [--remove]
                           [--resource-group]
                           [--secondary-locations]
                           [--set]
                           [--subscription]
  examples:
  - summary: Update the properties of a HSM.
    syntax: az keyvault update-hsm --enable-purge-protection true --hsm-name MyHSM --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --hsm-name
    summary: Name of the HSM.
    description: ''
  optionalParameters:
  - name: --add
    summary: 'Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.'
    description: ''
  - name: --bypass
    parameterValueGroup: AzureServices, None
    summary: Bypass traffic for space-separated uses.
    description: ''
  - name: --default-action
    parameterValueGroup: Allow, Deny
    summary: Default action to apply when no rule matches.
    description: ''
  - name: --enable-purge-protection -e
    parameterValueGroup: false, true
    summary: Property specifying whether protection against purge is enabled for this managed HSM pool. Setting this property to true activates protection against purge for this managed HSM pool and its content - only the Managed HSM service may initiate a hard, irrecoverable deletion. The setting is effective only if soft delete is also enabled. Enabling this functionality is irreversible.
    description: ''
  - name: --force-string
    summary: When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
    description: ''
  - name: --no-wait
    summary: Do not wait for the long-running operation to finish.
    description: ''
  - name: --remove
    summary: 'Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.'
    description: ''
  - name: --resource-group -g
    summary: Proceed only if Key Vault belongs to the specified resource group.
    description: ''
  - name: --secondary-locations
    summary: --secondary-locations extends/contracts an HSM pool to listed regions. The primary location where the resource was originally created CANNOT be removed.
    description: ''
  - name: --set
    summary: 'Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.'
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_wait
  name: az keyvault wait
  summary: Place the CLI in a waiting state until a condition of the Vault is met.
  description: ''
  syntax: >-
    az keyvault wait --name
                     [--created]
                     [--custom]
                     [--deleted]
                     [--exists]
                     [--interval]
                     [--resource-group]
                     [--subscription]
                     [--timeout]
                     [--updated]
  examples:
  - summary: Pause CLI until the vault is created.
    syntax: az keyvault wait --name MyVault --created
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: Name of the Vault.
    description: ''
  optionalParameters:
  - name: --created
    summary: Wait until created with 'provisioningState' at 'Succeeded'.
    description: ''
  - name: --custom
    summary: Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
    description: ''
  - name: --deleted
    summary: Wait until deleted.
    description: ''
  - name: --exists
    summary: Wait until the resource exists.
    description: ''
  - name: --interval
    defaultValue: "30"
    summary: Polling interval in seconds.
    description: ''
  - name: --resource-group -g
    summary: Proceed only if Key Vault belongs to the specified resource group.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    defaultValue: "3600"
    summary: Maximum wait in seconds.
    description: ''
  - name: --updated
    summary: Wait until updated with provisioningState at 'Succeeded'.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
- uid: az_keyvault_wait-hsm
  name: az keyvault wait-hsm
  summary: Place the CLI in a waiting state until a condition of the HSM is met.
  description: ''
  syntax: >-
    az keyvault wait-hsm --hsm-name
                         [--created]
                         [--custom]
                         [--deleted]
                         [--exists]
                         [--interval]
                         [--resource-group]
                         [--subscription]
                         [--timeout]
                         [--updated]
  examples:
  - summary: Pause CLI until the HSM is created.
    syntax: az keyvault wait-hsm --hsm-name MyHSM --created
  requiredParameters:
  - isRequired: true
    name: --hsm-name
    summary: Name of the HSM.
    description: ''
  optionalParameters:
  - name: --created
    summary: Wait until created with 'provisioningState' at 'Succeeded'.
    description: ''
  - name: --custom
    summary: Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
    description: ''
  - name: --deleted
    summary: Wait until deleted.
    description: ''
  - name: --exists
    summary: Wait until the resource exists.
    description: ''
  - name: --interval
    defaultValue: "30"
    summary: Polling interval in seconds.
    description: ''
  - name: --resource-group -g
    summary: Proceed only if HSM belongs to the specified resource group.
    description: ''
  - name: --subscription
    summary: Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    description: ''
  - name: --timeout
    defaultValue: "3600"
    summary: Maximum wait in seconds.
    description: ''
  - name: --updated
    summary: Wait until updated with provisioningState at 'Succeeded'.
    description: ''
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/keyvault/_help.py
commands:
- az_keyvault_backup
- az_keyvault_backup_start
- az_keyvault_certificate
- az_keyvault_certificate_backup
- az_keyvault_certificate_contact
- az_keyvault_certificate_contact_add
- az_keyvault_certificate_contact_delete
- az_keyvault_certificate_contact_list
- az_keyvault_certificate_create
- az_keyvault_certificate_delete
- az_keyvault_certificate_download
- az_keyvault_certificate_get-default-policy
- az_keyvault_certificate_import
- az_keyvault_certificate_issuer
- az_keyvault_certificate_issuer_admin
- az_keyvault_certificate_issuer_admin_add
- az_keyvault_certificate_issuer_admin_delete
- az_keyvault_certificate_issuer_admin_list
- az_keyvault_certificate_issuer_create
- az_keyvault_certificate_issuer_delete
- az_keyvault_certificate_issuer_list
- az_keyvault_certificate_issuer_show
- az_keyvault_certificate_issuer_update
- az_keyvault_certificate_list
- az_keyvault_certificate_list-deleted
- az_keyvault_certificate_list-versions
- az_keyvault_certificate_pending
- az_keyvault_certificate_pending_delete
- az_keyvault_certificate_pending_merge
- az_keyvault_certificate_pending_show
- az_keyvault_certificate_purge
- az_keyvault_certificate_recover
- az_keyvault_certificate_restore
- az_keyvault_certificate_set-attributes
- az_keyvault_certificate_show
- az_keyvault_certificate_show-deleted
- az_keyvault_create
- az_keyvault_delete
- az_keyvault_delete-policy
- az_keyvault_key
- az_keyvault_key_backup
- az_keyvault_key_create
- az_keyvault_key_decrypt
- az_keyvault_key_delete
- az_keyvault_key_download
- az_keyvault_key_encrypt
- az_keyvault_key_get-policy-template
- az_keyvault_key_import
- az_keyvault_key_list
- az_keyvault_key_list-deleted
- az_keyvault_key_list-versions
- az_keyvault_key_purge
- az_keyvault_key_recover
- az_keyvault_key_restore
- az_keyvault_key_set-attributes
- az_keyvault_key_show
- az_keyvault_key_show-deleted
- az_keyvault_list
- az_keyvault_list-deleted
- az_keyvault_network-rule
- az_keyvault_network-rule_add
- az_keyvault_network-rule_list
- az_keyvault_network-rule_remove
- az_keyvault_network-rule_wait
- az_keyvault_private-endpoint-connection
- az_keyvault_private-endpoint-connection_approve
- az_keyvault_private-endpoint-connection_delete
- az_keyvault_private-endpoint-connection_reject
- az_keyvault_private-endpoint-connection_show
- az_keyvault_private-endpoint-connection_wait
- az_keyvault_private-link-resource
- az_keyvault_private-link-resource_list
- az_keyvault_purge
- az_keyvault_recover
- az_keyvault_restore
- az_keyvault_restore_start
- az_keyvault_role
- az_keyvault_role_assignment
- az_keyvault_role_assignment_create
- az_keyvault_role_assignment_delete
- az_keyvault_role_assignment_list
- az_keyvault_role_definition
- az_keyvault_role_definition_create
- az_keyvault_role_definition_delete
- az_keyvault_role_definition_list
- az_keyvault_role_definition_show
- az_keyvault_role_definition_update
- az_keyvault_secret
- az_keyvault_secret_backup
- az_keyvault_secret_delete
- az_keyvault_secret_download
- az_keyvault_secret_list
- az_keyvault_secret_list-deleted
- az_keyvault_secret_list-versions
- az_keyvault_secret_purge
- az_keyvault_secret_recover
- az_keyvault_secret_restore
- az_keyvault_secret_set
- az_keyvault_secret_set-attributes
- az_keyvault_secret_show
- az_keyvault_secret_show-deleted
- az_keyvault_security-domain
- az_keyvault_security-domain_download
- az_keyvault_security-domain_init-recovery
- az_keyvault_security-domain_upload
- az_keyvault_security-domain_wait
- az_keyvault_set-policy
- az_keyvault_show
- az_keyvault_show-deleted
- az_keyvault_storage
- az_keyvault_storage_add
- az_keyvault_storage_backup
- az_keyvault_storage_list
- az_keyvault_storage_list-deleted
- az_keyvault_storage_purge
- az_keyvault_storage_recover
- az_keyvault_storage_regenerate-key
- az_keyvault_storage_remove
- az_keyvault_storage_restore
- az_keyvault_storage_sas-definition
- az_keyvault_storage_sas-definition_create
- az_keyvault_storage_sas-definition_delete
- az_keyvault_storage_sas-definition_list
- az_keyvault_storage_sas-definition_list-deleted
- az_keyvault_storage_sas-definition_recover
- az_keyvault_storage_sas-definition_show
- az_keyvault_storage_sas-definition_show-deleted
- az_keyvault_storage_sas-definition_update
- az_keyvault_storage_show
- az_keyvault_storage_show-deleted
- az_keyvault_storage_update
- az_keyvault_update
- az_keyvault_update-hsm
- az_keyvault_wait
- az_keyvault_wait-hsm
globalParameters:
- name: --debug
  summary: Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: Show this help message and exit.
- name: --only-show-errors
  summary: Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: json
  parameterValueGroup: json, jsonc, table, tsv
  summary: Output format.
- name: --query
  summary: JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --verbose
  summary: Increase logging verbosity. Use --debug for full debug logs.
metadata:
  doc_source_url_repo: https://github.com/Azure/azure-cli/blob/dev/
  ms.date: 06/01/2021
  description: Manage KeyVault keys, secrets, and certificates.
