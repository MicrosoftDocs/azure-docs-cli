### YamlMime:AzureCLIGroup
uid: az_storage_queue
name: az storage queue
summary: |-
  Manage storage queues.
status: Preview
isPreview: true
previewOrExperimentalInfo: 'This command group is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus'
sourceType: Core
directCommands:
- uid: az_storage_queue_create
  name: az storage queue create
  summary: |-
    Create a queue under the given account.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: "Command group 'storage queue' is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus"
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage queue create --name
                            [--account-key]
                            [--account-name]
                            [--auth-mode {key, login}]
                            [--connection-string]
                            [--fail-on-exist]
                            [--metadata]
                            [--queue-endpoint]
                            [--sas-token]
                            [--timeout]
  examples:
  - summary: |-
      Create a queue under the given account with metadata.
    syntax: az storage queue create -n myqueue --metadata key1=value1 key2=value2 --account-name mystorageaccount
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The queue name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --fail-on-exist
    defaultValue: "False"
    summary: |-
      Specify whether to throw an exception if the queue already exists.
  - name: --metadata
    summary: |-
      Metadata in space-separated key=value pairs. This overwrites any existing metadata.
  - name: --queue-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_queue_delete
  name: az storage queue delete
  summary: |-
    Delete the specified queue and any messages it contains.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: "Command group 'storage queue' is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus"
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage queue delete --name
                            [--account-key]
                            [--account-name]
                            [--auth-mode {key, login}]
                            [--connection-string]
                            [--fail-not-exist]
                            [--queue-endpoint]
                            [--sas-token]
                            [--timeout]
  examples:
  - summary: |-
      Delete the specified queue, throw an exception if the queue doesn't exist.
    syntax: az storage queue delete -n myqueue --fail-not-exist --account-name mystorageaccount
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The queue name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --fail-not-exist
    defaultValue: "False"
    summary: |-
      Specify whether to throw an exception if the queue doesn't exist.
  - name: --queue-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_queue_exists
  name: az storage queue exists
  summary: |-
    Return a boolean indicating whether the queue exists.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: "Command group 'storage queue' is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus"
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage queue exists --name
                            [--account-key]
                            [--account-name]
                            [--auth-mode {key, login}]
                            [--connection-string]
                            [--queue-endpoint]
                            [--sas-token]
                            [--timeout]
  examples:
  - summary: |-
      Check whether the queue exists.
    syntax: az storage queue exists -n myqueue --account-name mystorageaccount
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The queue name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --queue-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_queue_generate-sas
  name: az storage queue generate-sas
  summary: |-
    Generate a shared access signature for the queue.Use the returned signature with the sas_token parameter of QueueService.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: "Command group 'storage queue' is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus"
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage queue generate-sas --name
                                  [--account-key]
                                  [--account-name]
                                  [--connection-string]
                                  [--expiry]
                                  [--https-only]
                                  [--ip]
                                  [--permissions]
                                  [--policy-name]
                                  [--queue-endpoint]
                                  [--start]
  examples:
  - summary: |-
      Generate a sas token for the queue with read-only permissions.
    syntax: >-
      end=`date -u -d "30 minutes" '+%Y-%m-%dT%H:%MZ'`

      az storage queue generate-sas -n myqueue --account-name mystorageaccount --permissions r --expiry $end --https-only
  - summary: |-
      Generate a sas token for the queue with ip range specified.
    syntax: >-
      end=`date -u -d "30 minutes" '+%Y-%m-%dT%H:%MZ'`

      az storage queue generate-sas -n myqueue --account-name mystorageaccount --ip "176.134.171.0-176.134.171.255" --permissions r --expiry $end --https-only
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The queue name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --expiry
    summary: |-
      Specifies the UTC datetime (Y-m-d'T'H:M'Z') at which the SAS becomes invalid. Do not use if a stored access policy is referenced with --policy-name that specifies this value.
  - name: --https-only
    summary: |-
      Only permit requests made with the HTTPS protocol. If omitted, requests from both the HTTP and HTTPS protocol are permitted.
  - name: --ip
    summary: |-
      Specifies the IP address or range of IP addresses from which to accept requests. Supports only IPv4 style addresses.
  - name: --permissions
    summary: |-
      The permissions the SAS grants. Allowed values: (a)dd (p)rocess (r)ead (u)pdate. Do not use if a stored access policy is referenced with --id that specifies this value. Can be combined.
  - name: --policy-name
    summary: |-
      The name of a stored access policy within the share's ACL.
  - name: --queue-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --start
    summary: |-
      Specifies the UTC datetime (Y-m-d'T'H:M'Z') at which the SAS becomes valid. Do not use if a stored access policy is referenced with --policy-name that specifies this value. Defaults to the time of the request.
- uid: az_storage_queue_list
  name: az storage queue list
  summary: |-
    List queues in a storage account.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: "Command group 'storage queue' is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus"
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage queue list [--account-key]
                          [--account-name]
                          [--auth-mode {key, login}]
                          [--connection-string]
                          [--include-metadata]
                          [--marker]
                          [--num-results]
                          [--prefix]
                          [--queue-endpoint]
                          [--sas-token]
                          [--show-next-marker]
                          [--timeout]
  examples:
  - summary: |-
      List queues whose names begin with 'myprefix' under the storage account 'mystorageaccount'(account name)
    syntax: az storage queue list --prefix myprefix --account-name mystorageaccount
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --include-metadata
    defaultValue: "False"
    summary: |-
      Specify that queue metadata be returned in the response.
  - name: --marker
    summary: |-
      A string value that identifies the portion of the list of containers to be returned with the next listing operation. The operation returns the NextMarker value within the response body if the listing operation did not return all containers remaining to be listed with the current page. If specified, this generator will begin returning results from the point where the previous generator stopped.
  - name: --num-results
    defaultValue: "5000"
    summary: |-
      Specify the maximum number to return. If the request does not specify num_results, or specifies a value greater than 5000, the server will return up to 5000 items. Note that if the listing operation crosses a partition boundary, then the service will return a continuation token for retrieving the remaining of the results. Provide "*" to return all.
  - name: --prefix
    summary: |-
      Filter the results to return only queues whose names begin with the specified prefix.
  - name: --queue-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --show-next-marker
    summary: |-
      Show nextMarker in result when specified.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_queue_stats
  name: az storage queue stats
  summary: |-
    Retrieve statistics related to replication for the Queue service. It is only available when read-access geo-redundant replication is enabled for the storage account.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: "Command group 'storage queue' is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus"
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage queue stats [--account-key]
                           [--account-name]
                           [--auth-mode {key, login}]
                           [--connection-string]
                           [--queue-endpoint]
                           [--sas-token]
                           [--timeout]
  examples:
  - summary: |-
      Show statistics related to replication for the Queue service.
    syntax: az storage queue stats --account-name mystorageaccount
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --queue-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
commands:
- az_storage_queue_create
- az_storage_queue_delete
- az_storage_queue_exists
- az_storage_queue_generate-sas
- az_storage_queue_list
- az_storage_queue_metadata
- az_storage_queue_metadata_show
- az_storage_queue_metadata_update
- az_storage_queue_policy
- az_storage_queue_policy_create
- az_storage_queue_policy_delete
- az_storage_queue_policy_list
- az_storage_queue_policy_show
- az_storage_queue_policy_update
- az_storage_queue_stats
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, table, tsv"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  ms.date: 06/07/2023
  description: Manage storage queues.
