### YamlMime:AzureCLIGroup
uid: az_storage_share
name: az storage share
importantNote: >-
  > [!NOTE]

  > This command group has commands that are defined in both Azure CLI and at least one extension. Install each extension to benefit from its extended capabilities. [Learn more](https://learn.microsoft.com/cli/azure/azure-cli-extensions-overview) about extensions.
summary: |-
  Manage file shares.
status: GA
sourceType: Core and Extension
directCommands:
- uid: az_storage_share_close-handle
  name: az storage share close-handle
  summary: |-
    Close file handles of a file share.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share close-handle --name
                                  [--account-key]
                                  [--account-name]
                                  [--auth-mode {key, login}]
                                  [--backup-intent]
                                  [--close-all {false, true}]
                                  [--connection-string]
                                  [--disallow-trailing-dot {false, true}]
                                  [--file-endpoint]
                                  [--handle-id]
                                  [--path]
                                  [--recursive {false, true}]
                                  [--sas-token]
                                  [--snapshot]
                                  [--timeout]
  examples:
  - summary: |-
      Close all file handles of a file share recursively.
    syntax: >-
      az storage share close-handle --account-name MyAccount --name MyFileShare --close-all --recursive

      az storage share close-handle --account-name MyAccount --name MyFileShare --handle-id "*" --recursive
  - summary: |-
      Close all file handles of a file directory recursively.
    syntax: az storage share close-handle --account-name MyAccount --name MyFileShare --path 'dir1' --close-all --recursive
  - summary: |-
      Close all file handles of a file.
    syntax: az storage share close-handle --account-name MyAccount --name MyFileShare --path 'dir1/test.txt' --close-all
  - summary: |-
      Close file handle with a specific handle-id of a file.
    syntax: az storage share close-handle --account-name MyAccount --name MyFileShare --path 'dir1/test.txt' --handle-id "id"
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --backup-intent --enable-file-backup-request-intent
    defaultValue: "False"
    summary: |-
      Required parameter to use with OAuth (Azure AD) Authentication for Files. This will bypass any file/directory level permission checks and allow access, based on the allowed data actions, even if there are ACLs in place for those files/directories.
  - name: --close-all
    parameterValueGroup: "false, true"
    summary: |-
      Whether or not to close all the file handles. Specify close-all or a specific handle-id.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --disallow-trailing-dot
    defaultValue: "False"
    parameterValueGroup: "false, true"
    summary: |-
      If true, the trailing dot will be trimmed from the target URI. Default to False.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --handle-id
    summary: |-
      Specifies handle ID opened on the file or directory to be closed. Astrix (‘*’) is a wildcard that specifies all handles.
  - name: --path -p
    summary: |-
      The path to the file/directory within the file share.
  - name: --recursive
    parameterValueGroup: "false, true"
    summary: |-
      Boolean that specifies if operation should apply to the directory specified in the URI, its files, with its subdirectories and their files.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --snapshot
    summary: |-
      A string that represents the snapshot version, if applicable.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_close-handle(storage-preview)
  name: az storage share close-handle
  extensionSuffix: storage-preview
  summary: |-
    Close file handles of a file share.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: "Command group 'az storage' is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus"
  sourceType: Extension
  syntax: >-
    az storage share close-handle --name
                                  [--account-key]
                                  [--account-name]
                                  [--auth-mode {key, login}]
                                  [--backup-intent]
                                  [--close-all {false, true}]
                                  [--connection-string]
                                  [--disallow-trailing-dot {false, true}]
                                  [--handle-id]
                                  [--path]
                                  [--recursive {false, true}]
                                  [--sas-token]
                                  [--snapshot]
                                  [--timeout]
  examples:
  - summary: |-
      Close all file handles of a file share recursively.
    syntax: >-
      az storage share close-handle --account-name MyAccount --name MyFileShare --close-all --recursive

      az storage share close-handle --account-name MyAccount --name MyFileShare --handle-id "*" --recursive
  - summary: |-
      Close all file handles of a file directory recursively.
    syntax: az storage share close-handle --account-name MyAccount --name MyFileShare --path 'dir1' --close-all --recursive
  - summary: |-
      Close all file handles of a file.
    syntax: az storage share close-handle --account-name MyAccount --name MyFileShare --path 'dir1/test.txt' --close-all
  - summary: |-
      Close file handle with a specific handle-id of a file.
    syntax: az storage share close-handle --account-name MyAccount --name MyFileShare --path 'dir1/test.txt' --handle-id "id"
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --backup-intent --enable-file-backup-request-intent
    defaultValue: "False"
    summary: |-
      Required parameter to use with OAuth (Azure AD) Authentication for Files. This will bypass any file/directory level permission checks and allow access, based on the allowed data actions, even if there are ACLs in place for those files/directories.
  - name: --close-all
    parameterValueGroup: "false, true"
    summary: |-
      Whether or not to close all the file handles. Specify close-all or a specific handle-id.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --disallow-trailing-dot
    defaultValue: "False"
    parameterValueGroup: "false, true"
    summary: |-
      If true, the trailing dot will be trimmed from the target URI. Default to False.
  - name: --handle-id
    summary: |-
      Specifies handle ID opened on the file or directory to be closed. Astrix (‘*’) is a wildcard that specifies all handles.
  - name: --path -p
    summary: |-
      The path to the file/directory within the file share.
  - name: --recursive
    parameterValueGroup: "false, true"
    summary: |-
      Boolean that specifies if operation should apply to the directory specified in the URI, its files, with its subdirectories and their files.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --snapshot
    summary: |-
      A string that represents the snapshot version, if applicable.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_create
  name: az storage share create
  summary: |-
    Creates a new share under the specified account.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share create --name
                            [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--fail-on-exist]
                            [--file-endpoint]
                            [--metadata]
                            [--quota]
                            [--sas-token]
                            [--timeout]
  examples:
  - summary: |-
      Creates a new share under the specified account. (autogenerated)
    syntax: az storage share create --account-name MyAccount --name MyFileShare
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --fail-on-exist
    defaultValue: "False"
    summary: |-
      Specify whether to throw an exception when the share exists. False by default.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --metadata
    summary: |-
      Metadata in space-separated key=value pairs. This overwrites any existing metadata.
  - name: --quota
    summary: |-
      Specifies the maximum size of the share, in gigabytes. Must be greater than 0, and less than or equal to 5TB (5120).
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_delete
  name: az storage share delete
  summary: |-
    Mark the specified share for deletion.
  description: |-
    If the share does not exist, the operation fails on the service. By default, the exception is swallowed by the client. To expose the exception, specify True for fail_not_exist.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share delete --name
                            [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--delete-snapshots {include}]
                            [--fail-not-exist]
                            [--file-endpoint]
                            [--sas-token]
                            [--snapshot]
                            [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --delete-snapshots
    parameterValueGroup: "include"
    summary: |-
      Specify the deletion strategy when the share has snapshots.
  - name: --fail-not-exist
    defaultValue: "False"
    summary: |-
      Specify whether to throw an exception when the share doesn't exists. False by default.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --snapshot
    summary: |-
      A string that represents the snapshot version, if applicable.Specify this argument to delete a specific snapshot only. delete_snapshots must be None if this is specified.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_exists
  name: az storage share exists
  summary: |-
    Check for the existence of a file share.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share exists --name
                            [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--file-endpoint]
                            [--sas-token]
                            [--snapshot]
                            [--timeout]
  examples:
  - summary: |-
      Check for the existence of a file share. (autogenerated)
    syntax: az storage share exists --account-key 00000000 --account-name MyAccount --name MyFileShare
  - summary: |-
      Check for the existence of a file share (autogenerated)
    syntax: az storage share exists --connection-string $connectionString --name MyFileShare
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --snapshot
    summary: |-
      A string that represents the snapshot version, if applicable.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_generate-sas
  name: az storage share generate-sas
  summary: |-
    Generate a shared access signature for the share.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share generate-sas --name
                                  [--account-key]
                                  [--account-name]
                                  [--cache-control]
                                  [--connection-string]
                                  [--content-disposition]
                                  [--content-encoding]
                                  [--content-language]
                                  [--content-type]
                                  [--expiry]
                                  [--file-endpoint]
                                  [--https-only]
                                  [--ip]
                                  [--permissions]
                                  [--policy-name]
                                  [--start]
  examples:
  - summary: |-
      Generate a sas token for a fileshare and use it to upload a file.
    syntax: >-
      end=`date -u -d "30 minutes" '+%Y-%m-%dT%H:%MZ'`

      sas=`az storage share generate-sas -n MyShare --account-name MyStorageAccount --https-only --permissions dlrw --expiry $end -o tsv`

      az storage file upload -s MyShare --account-name MyStorageAccount --source file.txt  --sas-token $sas
  - summary: |-
      Generate a shared access signature for the share. (autogenerated)
    syntax: az storage share generate-sas --account-key 00000000 --account-name MyStorageAccount --expiry 2037-12-31T23:59:00Z --name MyShare --permissions dlrw
  - summary: |-
      Generate a shared access signature for the share. (autogenerated)
    syntax: az storage share generate-sas --connection-string $connectionString --expiry 2019-02-01T12:20Z --name MyShare --permissions dlrw
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --cache-control
    summary: |-
      Response header value for Cache-Control when resource is accessed using this shared access signature.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --content-disposition
    summary: |-
      Response header value for Content-Disposition when resource is accessed using this shared access signature.
  - name: --content-encoding
    summary: |-
      Response header value for Content-Encoding when resource is accessed using this shared access signature.
  - name: --content-language
    summary: |-
      Response header value for Content-Language when resource is accessed using this shared access signature.
  - name: --content-type
    summary: |-
      Response header value for Content-Type when resource is accessed using this shared access signature.
  - name: --expiry
    summary: |-
      Specifies the UTC datetime (Y-m-d'T'H:M'Z') at which the SAS becomes invalid. Do not use if a stored access policy is referenced with --policy-name that specifies this value.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --https-only
    summary: |-
      Only permit requests made with the HTTPS protocol. If omitted, requests from both the HTTP and HTTPS protocol are permitted.
  - name: --ip
    summary: |-
      Specifies the IP address or range of IP addresses from which to accept requests. Supports only IPv4 style addresses.
  - name: --permissions
    summary: |-
      The permissions the SAS grants. Allowed values: (c)reate (d)elete (l)ist (r)ead (w)rite. Do not use if a stored access policy is referenced with --id that specifies this value. Can be combined.
  - name: --policy-name
    summary: |-
      The name of a stored access policy within the share's ACL.
  - name: --start
    summary: |-
      Specifies the UTC datetime (Y-m-d'T'H:M'Z') at which the SAS becomes valid. Do not use if a stored access policy is referenced with --policy-name that specifies this value. Defaults to the time of the request.
- uid: az_storage_share_list
  name: az storage share list
  summary: |-
    List the file shares in a storage account.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share list [--account-key]
                          [--account-name]
                          [--connection-string]
                          [--file-endpoint]
                          [--include-metadata]
                          [--include-snapshots]
                          [--marker]
                          [--num-results]
                          [--prefix]
                          [--sas-token]
                          [--timeout]
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --include-metadata
    defaultValue: "False"
    summary: |-
      Specifies that share metadata be returned in the response.
  - name: --include-snapshots
    defaultValue: "False"
    summary: |-
      Specifies that share snapshots be returned in the response.
  - name: --marker
    summary: |-
      An opaque continuation token. This value can be retrieved from the next_marker field of a previous generator object if num_results was specified and that generator has finished enumerating results. If specified, this generator will begin returning results from the point where the previous generator stopped.
  - name: --num-results
    defaultValue: "5000"
    summary: |-
      Specify the maximum number to return. If the request does not specify num_results, or specifies a value greater than 5000, the server will return up to 5000 items. Note that if the listing operation crosses a partition boundary, then the service will return a continuation token for retrieving the remaining of the results. Provide "*" to return all.
  - name: --prefix
    summary: |-
      Filter the results to return only blobs whose name begins with the specified prefix.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_list-handle
  name: az storage share list-handle
  summary: |-
    List file handles of a file share.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share list-handle --name
                                 [--account-key]
                                 [--account-name]
                                 [--auth-mode {key, login}]
                                 [--backup-intent]
                                 [--connection-string]
                                 [--disallow-trailing-dot {false, true}]
                                 [--file-endpoint]
                                 [--marker]
                                 [--max-results]
                                 [--path]
                                 [--recursive {false, true}]
                                 [--sas-token]
                                 [--snapshot]
                                 [--timeout]
  examples:
  - summary: |-
      List all file handles of a file share recursively.
    syntax: az storage share list-handle --account-name MyAccount --name MyFileShare --recursive
  - summary: |-
      List all file handles of a file directory recursively.
    syntax: az storage share list-handle --account-name MyAccount --name MyFileShare --path 'dir1' --recursive
  - summary: |-
      List all file handles of a file.
    syntax: az storage share list-handle --account-name MyAccount --name MyFileShare --path 'dir1/test.txt'
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --backup-intent --enable-file-backup-request-intent
    defaultValue: "False"
    summary: |-
      Required parameter to use with OAuth (Azure AD) Authentication for Files. This will bypass any file/directory level permission checks and allow access, based on the allowed data actions, even if there are ACLs in place for those files/directories.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --disallow-trailing-dot
    defaultValue: "False"
    parameterValueGroup: "false, true"
    summary: |-
      If true, the trailing dot will be trimmed from the target URI. Default to False.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --marker
    summary: |-
      An opaque continuation token. This value can be retrieved from the next_marker field of a previous generator object if max_results was specified and that generator has finished enumerating results. If specified, this generator will begin returning results from the point where the previous generator stopped.
  - name: --max-results
    summary: |-
      Specifies the maximum number of handles taken on files and/or directories to return. If the request does not specify max_results or specifies a value greater than 5,000, the server will return up to 5,000 items. Setting max_results to a value less than or equal to zero results in error response code 400 (Bad Request).
  - name: --path -p
    summary: |-
      The path to the file/directory within the file share.
  - name: --recursive
    parameterValueGroup: "false, true"
    summary: |-
      Boolean that specifies if operation should apply to the directory specified in the URI, its files, with its subdirectories and their files.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --snapshot
    summary: |-
      A string that represents the snapshot version, if applicable.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_list-handle(storage-preview)
  name: az storage share list-handle
  extensionSuffix: storage-preview
  summary: |-
    List file handles of a file share.
  status: Preview
  isPreview: true
  previewOrExperimentalInfo: "Command group 'az storage' is in preview and under development. Reference and support levels: https://aka.ms/CLI_refstatus"
  sourceType: Extension
  syntax: >-
    az storage share list-handle --name
                                 [--account-key]
                                 [--account-name]
                                 [--auth-mode {key, login}]
                                 [--backup-intent]
                                 [--connection-string]
                                 [--disallow-trailing-dot {false, true}]
                                 [--marker]
                                 [--max-results]
                                 [--path]
                                 [--recursive {false, true}]
                                 [--sas-token]
                                 [--snapshot]
                                 [--timeout]
  examples:
  - summary: |-
      List all file handles of a file share recursively.
    syntax: az storage share list-handle --account-name MyAccount --name MyFileShare --recursive
  - summary: |-
      List all file handles of a file directory recursively.
    syntax: az storage share list-handle --account-name MyAccount --name MyFileShare --path 'dir1' --recursive
  - summary: |-
      List all file handles of a file.
    syntax: az storage share list-handle --account-name MyAccount --name MyFileShare --path 'dir1/test.txt'
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --auth-mode
    parameterValueGroup: "key, login"
    summary: |-
      The mode in which to run the command. "login" mode will directly use your login credentials for the authentication. The legacy "key" mode will attempt to query for an account key if no authentication parameters for the account are provided. Environment variable: AZURE_STORAGE_AUTH_MODE.
  - name: --backup-intent --enable-file-backup-request-intent
    defaultValue: "False"
    summary: |-
      Required parameter to use with OAuth (Azure AD) Authentication for Files. This will bypass any file/directory level permission checks and allow access, based on the allowed data actions, even if there are ACLs in place for those files/directories.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --disallow-trailing-dot
    defaultValue: "False"
    parameterValueGroup: "false, true"
    summary: |-
      If true, the trailing dot will be trimmed from the target URI. Default to False.
  - name: --marker
    summary: |-
      An opaque continuation token. This value can be retrieved from the next_marker field of a previous generator object if max_results was specified and that generator has finished enumerating results. If specified, this generator will begin returning results from the point where the previous generator stopped.
  - name: --max-results
    summary: |-
      Specifies the maximum number of handles taken on files and/or directories to return. If the request does not specify max_results or specifies a value greater than 5,000, the server will return up to 5,000 items. Setting max_results to a value less than or equal to zero results in error response code 400 (Bad Request).
  - name: --path -p
    summary: |-
      The path to the file/directory within the file share.
  - name: --recursive
    parameterValueGroup: "false, true"
    summary: |-
      Boolean that specifies if operation should apply to the directory specified in the URI, its files, with its subdirectories and their files.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --snapshot
    summary: |-
      A string that represents the snapshot version, if applicable.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_show
  name: az storage share show
  summary: |-
    Return all user-defined metadata and system properties for the specified share.
  description: |-
    The data returned does not include the shares's list of files or directories.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share show --name
                          [--account-key]
                          [--account-name]
                          [--connection-string]
                          [--file-endpoint]
                          [--sas-token]
                          [--snapshot]
                          [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --snapshot
    summary: |-
      A string that represents the snapshot version, if applicable.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_snapshot
  name: az storage share snapshot
  summary: |-
    Create a snapshot of an existing share under the specified account.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share snapshot --name
                              [--account-key]
                              [--account-name]
                              [--connection-string]
                              [--file-endpoint]
                              [--metadata]
                              [--quota]
                              [--sas-token]
                              [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --metadata
    summary: |-
      Metadata in space-separated key=value pairs. This overwrites any existing metadata.
  - name: --quota
    summary: |-
      Specifies the maximum size of the share, in gigabytes. Must be greater than 0, and less than or equal to 5 TB (5120 GB).
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_stats
  name: az storage share stats
  summary: |-
    Get the approximate size of the data stored on the share, rounded up to the nearest gigabyte.
  description: |-
    Note that this value may not include all recently created or recently re-sized files.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share stats --name
                           [--account-key]
                           [--account-name]
                           [--connection-string]
                           [--file-endpoint]
                           [--sas-token]
                           [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_update
  name: az storage share update
  summary: |-
    Set service-defined properties for the specified share.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share update --name
                            --quota
                            [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--file-endpoint]
                            [--sas-token]
                            [--timeout]
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  - isRequired: true
    name: --quota
    summary: |-
      Specifies the maximum size of the share, in gigabytes. Must be greater than 0, and less than or equal to 5 TB (5120 GB).
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_share_url
  name: az storage share url
  summary: |-
    Create a URI to access a file share.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage share url --name
                         [--account-key]
                         [--account-name]
                         [--connection-string]
                         [--file-endpoint]
                         [--protocol {http, https}]
                         [--sas-token]
                         [--unc]
  examples:
  - summary: |-
      Create a URI to access a file share. (autogenerated)
    syntax: az storage share url --account-key 00000000 --account-name MyAccount --name MyFileShare
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      The file share name.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --file-endpoint
    summary: |-
      Storage data service endpoint. Must be used in conjunction with either storage account key or a SAS token. You can find each service primary endpoint with `az storage account show`. Environment variable: AZURE_STORAGE_SERVICE_ENDPOINT.
  - name: --protocol
    defaultValue: "https"
    parameterValueGroup: "http, https"
    summary: |-
      Protocol to use.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name or service endpoint. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --unc
    defaultValue: "False"
    summary: |-
      Output UNC network path.
commands:
- az_storage_share_close-handle
- az_storage_share_close-handle(storage-preview)
- az_storage_share_create
- az_storage_share_delete
- az_storage_share_exists
- az_storage_share_generate-sas
- az_storage_share_list
- az_storage_share_list-handle
- az_storage_share_list-handle(storage-preview)
- az_storage_share_metadata
- az_storage_share_metadata_show
- az_storage_share_metadata_update
- az_storage_share_policy
- az_storage_share_policy_create
- az_storage_share_policy_delete
- az_storage_share_policy_list
- az_storage_share_policy_show
- az_storage_share_policy_update
- az_storage_share_show
- az_storage_share_snapshot
- az_storage_share_stats
- az_storage_share_update
- az_storage_share_url
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, none, table, tsv, yaml, yamlc"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  description: Manage file shares.
