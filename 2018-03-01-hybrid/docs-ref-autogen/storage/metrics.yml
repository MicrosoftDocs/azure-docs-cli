### YamlMime:AzureCLIGroup
uid: az_storage_metrics
name: az storage metrics
summary: |-
  Manage storage service metrics.
status: GA
sourceType: Core
directCommands:
- uid: az_storage_metrics_show
  name: az storage metrics show
  summary: |-
    Show metrics settings for a storage account.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage metrics show [--account-key]
                            [--account-name]
                            [--connection-string]
                            [--interval {both, hour, minute}]
                            [--sas-token]
                            [--services]
                            [--timeout]
  examples:
  - summary: |-
      Show metrics settings for a storage account. (autogenerated)
    syntax: az storage metrics show --account-key 00000000 --account-name MyAccount
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --interval
    defaultValue: "both"
    parameterValueGroup: "both, hour, minute"
    summary: |-
      Filter the set of metrics to retrieve by time interval.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --services
    defaultValue: "bfqt"
    summary: |-
      The storage services from which to retrieve metrics info: (b)lob (q)ueue (t)able. Can be combined.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
- uid: az_storage_metrics_update
  name: az storage metrics update
  summary: |-
    Update metrics settings for a storage account.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/storage/_help.py
  syntax: >-
    az storage metrics update --retention
                              --services
                              [--account-key]
                              [--account-name]
                              [--api {false, true}]
                              [--connection-string]
                              [--hour {false, true}]
                              [--minute {false, true}]
                              [--sas-token]
                              [--timeout]
  examples:
  - summary: |-
      Update metrics settings for a storage account. (autogenerated)
    syntax: az storage metrics update --account-name MyAccount --api true --hour true --minute true --retention 10 --services bfqt
  - summary: |-
      Update metrics settings for a storage account by connection string. (autogenerated)
    syntax: az storage metrics update --api true --connection-string $connectionString --hour true --minute true --retention 10 --services bfqt
  requiredParameters:
  - isRequired: true
    name: --retention
    summary: |-
      Number of days for which to retain metrics. 0 to disable. Applies to both hour and minute metrics if both are specified.
  - isRequired: true
    name: --services
    summary: |-
      The storage services from which to retrieve metrics info: (b)lob (q)ueue (t)able. Can be combined.
  optionalParameters:
  - name: --account-key
    summary: |-
      Storage account key. Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_KEY.
  - name: --account-name
    summary: |-
      Storage account name. Related environment variable: AZURE_STORAGE_ACCOUNT. Must be used in conjunction with either storage account key or a SAS token. If neither are present, the command will try to query the storage account key using the authenticated Azure account. If a large number of storage commands are executed the API quota may be hit.
  - name: --api
    parameterValueGroup: "false, true"
    summary: |-
      Specify whether to include API in metrics. Applies to both hour and minute metrics if both are specified. Must be specified if hour or minute metrics are enabled and being updated.
  - name: --connection-string
    summary: |-
      Storage account connection string. Environment variable: AZURE_STORAGE_CONNECTION_STRING.
  - name: --hour
    parameterValueGroup: "false, true"
    summary: |-
      Update the hourly metrics.
  - name: --minute
    parameterValueGroup: "false, true"
    summary: |-
      Update the by-minute metrics.
  - name: --sas-token
    summary: |-
      A Shared Access Signature (SAS). Must be used in conjunction with storage account name. Environment variable: AZURE_STORAGE_SAS_TOKEN.
  - name: --timeout
    summary: |-
      Request timeout in seconds. Applies to each call to the service.
commands:
- az_storage_metrics_show
- az_storage_metrics_update
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, none, table, tsv, yaml, yamlc"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  ms.date: 01/29/2024
  description: Manage storage service metrics.
