### YamlMime:AzureCLIGroup
uid: az_vm
name: az vm
importantNote: >-
  > [!NOTE]

  > This command group has commands that are defined in both Azure CLI and at least one extension. Install each extension to benefit from its extended capabilities. [Learn more](https://learn.microsoft.com/cli/azure/azure-cli-extensions-overview) about extensions.
summary: |-
  Manage Linux or Windows virtual machines.
status: GA
sourceType: Core and Extension
directCommands:
- uid: az_vm_auto-shutdown
  name: az vm auto-shutdown
  summary: |-
    Manage auto-shutdown for VM.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm auto-shutdown [--email]
                        [--ids]
                        [--location]
                        [--name]
                        [--off]
                        [--resource-group]
                        [--subscription]
                        [--time]
                        [--webhook]
  examples:
  - summary: |-
      Create auto-shutdown schedule for a VM.
    syntax: az vm auto-shutdown -g MyResourceGroup -n MyVm --time 1730 --email "foo@bar.com" --webhook "https://example.com/"
  - summary: |-
      Delete auto-shutdown schedule for a VM.
    syntax: az vm auto-shutdown -g MyResourceGroup -n MyVm --off
  optionalParameters:
  - name: --email
    summary: |-
      The email recipient to send notifications to (can be a list of semi-colon separated email addresses).
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --off
    summary: |-
      Turn off auto-shutdown for VM. Configuration will be cleared.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --time
    summary: |-
      The UTC time of day the schedule will occur every day. Format: hhmm. Example: 1730.
  - name: --webhook
    summary: |-
      The webhook URL to which the notification will be sent.
- uid: az_vm_capture
  name: az vm capture
  summary: |-
    Capture information for a stopped VM.
  description: |-
    For an end-to-end tutorial, see https://docs.microsoft.com/azure/virtual-machines/linux/capture-image.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm capture --vhd-name-prefix
                  [--ids]
                  [--name]
                  [--overwrite]
                  [--resource-group]
                  [--storage-container]
                  [--subscription]
  examples:
  - summary: |-
      Deallocate, generalize, and capture a stopped virtual machine.
    syntax: >-
      az vm deallocate -g MyResourceGroup -n MyVm

      az vm generalize -g MyResourceGroup -n MyVm

      az vm capture -g MyResourceGroup -n MyVm --vhd-name-prefix MyPrefix
  - summary: |-
      Deallocate, generalize, and capture multiple stopped virtual machines.
    syntax: >-
      vms_ids=$(az vm list -g MyResourceGroup --query "[].id" -o tsv)

      az vm deallocate --ids {vms_ids}

      az vm generalize --ids {vms_ids}

      az vm capture --ids {vms_ids} --vhd-name-prefix MyPrefix
  requiredParameters:
  - isRequired: true
    name: --vhd-name-prefix
    summary: |-
      The VHD name prefix specify for the VM disks.
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --overwrite
    defaultValue: "True"
    summary: |-
      Overwrite the existing disk file.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --storage-container
    defaultValue: "vhds"
    summary: |-
      The storage account container name in which to save the disks.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_convert
  name: az vm convert
  summary: |-
    Convert a VM with unmanaged disks to use managed disks.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm convert [--ids]
                  [--name]
                  [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                  [--resource-group]
                  [--subscription]
  examples:
  - summary: |-
      Convert a VM with unmanaged disks to use managed disks.
    syntax: az vm convert -g MyResourceGroup -n MyVm
  - summary: |-
      Convert all VMs with unmanaged disks in a resource group to use managed disks.
    syntax: az vm convert --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name --vm-name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_create
  name: az vm create
  summary: |-
    Create an Azure Virtual Machine.
  description: |-
    For an end-to-end tutorial, see https://docs.microsoft.com/azure/virtual-machines/linux/quick-create-cli.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm create --name
                 --resource-group
                 [--accelerated-networking {false, true}]
                 [--accept-term]
                 [--admin-password]
                 [--admin-username]
                 [--asgs]
                 [--assign-identity]
                 [--attach-data-disks]
                 [--attach-os-disk]
                 [--authentication-type {all, password, ssh}]
                 [--availability-set]
                 [--boot-diagnostics-storage]
                 [--computer-name]
                 [--count]
                 [--custom-data]
                 [--data-disk-caching]
                 [--data-disk-sizes-gb]
                 [--disk-controller-type]
                 [--encryption-at-host {false, true}]
                 [--eviction-policy]
                 [--generate-ssh-keys]
                 [--image]
                 [--license-type {None, RHEL_BASE, RHEL_BASESAPAPPS, RHEL_BASESAPHA, RHEL_BYOS, RHEL_ELS_6, RHEL_EUS, RHEL_SAPAPPS, RHEL_SAPHA, SLES, SLES_BYOS, SLES_HPC, SLES_SAP, SLES_STANDARD, UBUNTU, UBUNTU_PRO, Windows_Client, Windows_Server}]
                 [--location]
                 [--nics]
                 [--no-wait]
                 [--nsg]
                 [--nsg-rule {NONE, RDP, SSH}]
                 [--os-disk-caching {None, ReadOnly, ReadWrite}]
                 [--os-disk-name]
                 [--os-disk-size-gb]
                 [--os-type {linux, windows}]
                 [--plan-name]
                 [--plan-product]
                 [--plan-promotion-code]
                 [--plan-publisher]
                 [--private-ip-address]
                 [--public-ip-address]
                 [--public-ip-address-allocation {dynamic, static}]
                 [--public-ip-address-dns-name]
                 [--public-ip-sku {Basic, Standard}]
                 [--role]
                 [--scope]
                 [--secrets]
                 [--size]
                 [--specialized {false, true}]
                 [--ssh-dest-key-path]
                 [--ssh-key-name]
                 [--ssh-key-values]
                 [--storage-account]
                 [--storage-container-name]
                 [--storage-sku]
                 [--subnet]
                 [--subnet-address-prefix]
                 [--tags]
                 [--use-unmanaged-disk]
                 [--validate]
                 [--vmss]
                 [--vnet-address-prefix]
                 [--vnet-name]
                 [--workspace]
                 [--zone {1, 2, 3}]
  examples:
  - summary: |-
      Create a default Ubuntu2204 VM with automatic SSH authentication.
    syntax: az vm create -n MyVm -g MyResourceGroup --image Ubuntu2204
  - summary: |-
      Create a default RedHat VM with automatic SSH authentication using an image URN.
    syntax: az vm create -n MyVm -g MyResourceGroup --image RedHat:RHEL:7-RAW:7.4.2018010506
  - summary: |-
      Create a default Windows Server VM with a private IP address.
    syntax: az vm create -n MyVm -g MyResourceGroup --public-ip-address "" --image Win2012R2Datacenter
  - summary: |-
      Create a VM from a custom managed image.
    syntax: az vm create -g MyResourceGroup -n MyVm --image MyImage
  - summary: |-
      Create a VM from a generalized gallery image version.
    syntax: az vm create -g MyResourceGroup -n MyVm --image /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myRG/providers/Microsoft.Compute/galleries/myGallery/images/myImage/versions/1.0.0
  - summary: |-
      Create a VM from a specialized gallery image version.
    syntax: az vm create -g MyResourceGroup -n MyVm --image /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myRG/providers/Microsoft.Compute/galleries/myGallery/images/myImage/versions/1.0.0 --specialized
  - summary: |-
      Create a VM from the latest version of a gallery image
    syntax: az vm create -g MyResourceGroup -n MyVm --image /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myRG/providers/Microsoft.Compute/galleries/myGallery/images/myImage
  - summary: |-
      Create a VM by attaching to a managed operating system disk.
    syntax: az vm create -g MyResourceGroup -n MyVm --attach-os-disk MyOsDisk --os-type linux
  - summary: |-
      Create a VM by attaching to an unmanaged operating system disk from a VHD blob uri.
    syntax: az vm create -g MyResourceGroup -n MyVm --attach-os-disk https://vhd1234.blob.core.windows.net/vhds/osdisk1234.vhd --os-type linux --use-unmanaged-disk
  - summary: |-
      Create an Debian11 VM using a cloud-init script for configuration. See: https://docs.microsoft.com/azure/virtual-machines/linux/using-cloud-init.
    syntax: az vm create -g MyResourceGroup -n MyVm --image Debian11 --custom-data MyCloudInitScript.yml
  - summary: |-
      Create a Debian11 VM with SSH key authentication and a public DNS entry, located on an existing virtual network and availability set.
    syntax: >-
      az vm create -n MyVm -g MyResourceGroup --image Debian11 --vnet-name MyVnet --subnet subnet1 \
          --availability-set MyAvailabilitySet --public-ip-address-dns-name MyUniqueDnsName \
          --ssh-key-values @key-file
  - summary: |-
      Create a simple Ubuntu Linux VM with a public IP address, DNS entry, two data disks (10GB and 20GB), and then generate ssh key pairs.
    syntax: >-
      az vm create -n MyVm -g MyResourceGroup --public-ip-address-dns-name MyUniqueDnsName \
          --image Ubuntu2204 --data-disk-sizes-gb 10 20 --size Standard_DS2_v2 \
          --generate-ssh-keys
  - summary: |-
      Create a Debian11 VM using Key Vault secrets.
    syntax: >-
      az keyvault certificate create --vault-name vaultname -n cert1 \
        -p "$(az keyvault certificate get-default-policy)"

      secrets=$(az keyvault secret list-versions --vault-name vaultname \
        -n cert1 --query "[?attributes.enabled].id" -o tsv)

      vm_secrets=$(az vm secret format -s "$secrets")


      az vm create -g group-name -n vm-name --admin-username deploy  \
        --image debian11 --secrets "$vm_secrets"
  - summary: |-
      Create a CentOS VM with a system assigned identity. The VM will have a 'Contributor' role with access to a storage account.
    syntax: az vm create -n MyVm -g rg1 --image CentOS85Gen2 --assign-identity [system] --scope /subscriptions/99999999-1bf0-4dda-aec3-cb9272f09590/MyResourceGroup/myRG/providers/Microsoft.Storage/storageAccounts/storage1 --role Contributor
  - summary: |-
      Create a Debian11 VM with a user assigned identity.
    syntax: az vm create -n MyVm -g rg1 --image Debian11 --assign-identity /subscriptions/99999999-1bf0-4dda-aec3-cb9272f09590/resourcegroups/myRG/providers/Microsoft.ManagedIdentity/userAssignedIdentities/myID
  - summary: |-
      Create a Debian11 VM with both system and user assigned identity.
    syntax: az vm create -n MyVm -g rg1 --image Debian11 --assign-identity [system] /subscriptions/99999999-1bf0-4dda-aec3-cb9272f09590/resourcegroups/myRG/providers/Microsoft.ManagedIdentity/userAssignedIdentities/myID
  - summary: |-
      Create multiple VMs. In this example, 3 VMs are created. They are MyVm0, MyVm1, MyVm2.
    syntax: az vm create -n MyVm -g MyResourceGroup --image CentOS85Gen2 --count 3
  - summary: |-
      Create a VM from shared gallery image
    syntax: az vm create -n MyVm -g MyResourceGroup --image /SharedGalleries/{gallery_unique_name}/Images/{image}/Versions/{version}
  - summary: |-
      Create a VM from community gallery image
    syntax: az vm create -n MyVm -g MyResourceGroup --image /CommunityGalleries/{gallery_unique_name}/Images/{image}/Versions/{version}
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      Name of the virtual machine.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --accelerated-networking
    parameterValueGroup: "false, true"
    summary: |-
      Enable accelerated networking. Unless specified, CLI will enable it based on machine image and size.
  - name: --accept-term
    summary: |-
      Accept the license agreement and privacy statement.
  - name: --admin-password
    summary: |-
      Password for the VM if authentication type is 'Password'.
  - name: --admin-username
    summary: |-
      Username for the VM. Default value is current username of OS. If the default value is system reserved, then default value will be set to azureuser. Please refer to https://docs.microsoft.com/rest/api/compute/virtualmachines/createorupdate#osprofile to get a full list of reserved values.
  - name: --asgs
    summary: |-
      Space-separated list of existing application security groups to associate with the VM.
  - name: --assign-identity
    summary: |-
      Accept system or user assigned identities separated by spaces. Use '[system]' to refer system assigned identity, or a resource id to refer user assigned identity. Check out help for more examples.
  - name: --attach-data-disks
    summary: |-
      Attach existing data disks to the VM. Can use the name or ID of a managed disk or the URI to an unmanaged disk VHD.
  - name: --attach-os-disk
    summary: |-
      Attach an existing OS disk to the VM. Can use the name or ID of a managed disk or the URI to an unmanaged disk VHD.
  - name: --authentication-type
    parameterValueGroup: "all, password, ssh"
    summary: |-
      Type of authentication to use with the VM. Defaults to password for Windows and SSH public key for Linux. "all" enables both ssh and password authentication.
  - name: --availability-set
    summary: |-
      Name or ID of an existing availability set to add the VM to. None by default.
  - name: --boot-diagnostics-storage
    summary: |-
      Pre-existing storage account name or its blob uri to capture boot diagnostics. Its sku should be one of Standard_GRS, Standard_LRS and Standard_RAGRS.
  - name: --computer-name
    summary: |-
      The host OS name of the virtual machine. Defaults to the name of the VM.
  - name: --count
    summary: |-
      Number of virtual machines to create. Value range is [2, 250], inclusive. Don't specify this parameter if you want to create a normal single VM. The VMs are created in parallel. The output of this command is an array of VMs instead of one single VM. Each VM has its own public IP, NIC. VNET and NSG are shared. It is recommended that no existing public IP, NIC, VNET and NSG are in resource group. When --count is specified, --attach-data-disks, --attach-os-disk, --boot-diagnostics-storage, --computer-name, --host, --host-group, --nics, --os-disk-name, --private-ip-address, --public-ip-address, --public-ip-address-dns-name, --storage-account, --storage-container-name, --subnet, --use-unmanaged-disk, --vnet-name are not allowed.
    isPreview: true
  - name: --custom-data
    summary: |-
      Custom init script file or text (cloud-init, cloud-config, etc..).
  - name: --data-disk-caching
    summary: |-
      Storage caching type for data disk(s), including 'None', 'ReadOnly', 'ReadWrite', etc. Use a singular value to apply on all disks, or use `<lun>=<vaule1> <lun>=<value2>` to configure individual disk.
  - name: --data-disk-sizes-gb
    summary: |-
      Space-separated empty managed data disk sizes in GB to create.
  - name: --disk-controller-type
    summary: |-
      Specify the disk controller type configured for the VM or VMSS.
    isPreview: true
  - name: --encryption-at-host
    parameterValueGroup: "false, true"
    summary: |-
      Enable Host Encryption for the VM or VMSS. This will enable the encryption for all the disks including Resource/Temp disk at host itself.
  - name: --eviction-policy
  - name: --generate-ssh-keys
    defaultValue: "False"
    summary: |-
      Generate SSH public and private key files if missing. The keys will be stored in the ~/.ssh directory.
  - name: --image
    summary: |-
      The name of the operating system image as a URN alias, URN, custom image name or ID, custom image version ID, or VHD blob URI. In addition, it also supports shared gallery image. Please use the image alias including the version of the distribution you want to use. For example: please use Debian11 instead of Debian.' This parameter is required unless using `--attach-os-disk.` Valid URN format: "Publisher:Offer:Sku:Version". For more information, see https://docs.microsoft.com/azure/virtual-machines/linux/cli-ps-findimage.
    valueFrom: az sig image-version show-shared, az vm image list, az vm image show
  - name: --license-type
    parameterValueGroup: "None, RHEL_BASE, RHEL_BASESAPAPPS, RHEL_BASESAPHA, RHEL_BYOS, RHEL_ELS_6, RHEL_EUS, RHEL_SAPAPPS, RHEL_SAPHA, SLES, SLES_BYOS, SLES_HPC, SLES_SAP, SLES_STANDARD, UBUNTU, UBUNTU_PRO, Windows_Client, Windows_Server"
    summary: |-
      Specifies that the Windows image or disk was licensed on-premises. To enable Azure Hybrid Benefit for Windows Server, use 'Windows_Server'. To enable Multi-tenant Hosting Rights for Windows 10, use 'Windows_Client'. For more information see the Azure Windows VM online docs.
  - name: --location -l
    summary: |-
      Location in which to create VM and related resources. If default location is not configured, will default to the resource group's location.
  - name: --nics
    summary: |-
      Names or IDs of existing NICs to attach to the VM. The first NIC will be designated as primary. If omitted, a new NIC will be created. If an existing NIC is specified, do not specify subnet, VNet, public IP or NSG.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --nsg
    summary: |-
      The name to use when creating a new Network Security Group (default) or referencing an existing one. Can also reference an existing NSG by ID or specify "" for none ('""' in Azure CLI using PowerShell or --% operator).
  - name: --nsg-rule
    parameterValueGroup: "NONE, RDP, SSH"
    summary: |-
      NSG rule to create when creating a new NSG. Defaults to open ports for allowing RDP on Windows and allowing SSH on Linux. NONE represents no NSG rule.
  - name: --os-disk-caching
    parameterValueGroup: "None, ReadOnly, ReadWrite"
    summary: |-
      Storage caching type for the VM OS disk. Default: ReadWrite.
  - name: --os-disk-name
    summary: |-
      The name of the new VM OS disk.
  - name: --os-disk-size-gb
    summary: |-
      OS disk size in GB to create.
  - name: --os-type
    parameterValueGroup: "linux, windows"
    summary: |-
      Type of OS installed on a custom VHD. Do not use when specifying an URN or URN alias.
  - name: --plan-name
    summary: |-
      Plan name.
  - name: --plan-product
    summary: |-
      Plan product.
  - name: --plan-promotion-code
    summary: |-
      Plan promotion code.
  - name: --plan-publisher
    summary: |-
      Plan publisher.
  - name: --private-ip-address
    summary: |-
      Static private IP address (e.g. 10.0.0.5).
  - name: --public-ip-address
    summary: |-
      Name of the public IP address when creating one (default) or referencing an existing one. Can also reference an existing public IP by ID or specify "" for None ('""' in Azure CLI using PowerShell or --% operator). For Azure CLI using powershell core edition 7.3.4, specify  or "" (--public-ip-address  or --public-ip-address "").
  - name: --public-ip-address-allocation
    parameterValueGroup: "dynamic, static"
  - name: --public-ip-address-dns-name
    summary: |-
      Globally unique DNS name for a newly created public IP.
  - name: --public-ip-sku
    parameterValueGroup: "Basic, Standard"
    summary: |-
      Public IP SKU. It is set to Basic by default. The public IP is supported to be created on edge zone only when it is 'Standard'.
  - name: --role
    summary: |-
      Role name or id the system assigned identity will have.
  - name: --scope
    summary: |-
      Scope that the system assigned identity can access.
  - name: --secrets
    summary: |-
      One or many Key Vault secrets as JSON strings or files via `@{path}` containing `[{ "sourceVault": { "id": "value" }, "vaultCertificates": [{ "certificateUrl": "value", "certificateStore": "cert store name (only on windows)"}] }]`.
  - name: --size
    defaultValue: "Standard_DS1_v2"
    summary: |-
      The VM size to be created. See https://azure.microsoft.com/pricing/details/virtual-machines/ for size info.
    valueFrom: az vm list-sizes
  - name: --specialized
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether the source image is specialized.
  - name: --ssh-dest-key-path
    summary: |-
      Destination file path on the VM for the SSH key. If the file already exists, the specified key(s) are appended to the file. Destination path for SSH public keys is currently limited to its default value "/home/username/.ssh/authorized_keys" due to a known issue in Linux provisioning agent.
  - name: --ssh-key-name
    summary: |-
      Use it as public key in virtual machine. It should be an existing SSH key resource in Azure.
  - name: --ssh-key-values
    summary: |-
      Space-separated list of SSH public keys or public key file paths.
  - name: --storage-account
    summary: |-
      Only applicable when used with `--use-unmanaged-disk`. The name to use when creating a new storage account or referencing an existing one. If omitted, an appropriate storage account in the same resource group and location will be used, or a new one will be created.
  - name: --storage-container-name
    summary: |-
      Only applicable when used with `--use-unmanaged-disk`. Name of the storage container for the VM OS disk. Default: vhds.
  - name: --storage-sku
    summary: |-
      The SKU of the storage account with which to persist VM. Use a singular sku that would be applied across all disks, or specify individual disks. Usage: [--storage-sku SKU | --storage-sku ID=SKU ID=SKU ID=SKU...], where each ID is "os" or a 0-indexed lun. Allowed values: Standard_LRS, Premium_LRS.
  - name: --subnet
    summary: |-
      The name of the subnet when creating a new VNet or referencing an existing one. Can also reference an existing subnet by ID. If both vnet-name and subnet are omitted, an appropriate VNet and subnet will be selected automatically, or a new one will be created.
  - name: --subnet-address-prefix
    defaultValue: "10.0.0.0/24"
    summary: |-
      The subnet IP address prefix to use when creating a new VNet in CIDR format.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
  - name: --use-unmanaged-disk
    defaultValue: "False"
    summary: |-
      Do not use managed disk to persist VM.
  - name: --validate
    defaultValue: "False"
    summary: |-
      Generate and validate the ARM template without creating any resources.
  - name: --vmss
    summary: |-
      Name or ID of an existing virtual machine scale set that the virtual machine should be assigned to. None by default.
  - name: --vnet-address-prefix
    defaultValue: "10.0.0.0/16"
    summary: |-
      The IP address prefix to use when creating a new VNet in CIDR format.
  - name: --vnet-name
    summary: |-
      Name of the virtual network when creating a new one or referencing an existing one.
  - name: --workspace
    summary: |-
      Name or ID of Log Analytics Workspace. If you specify the workspace through its name, the workspace should be in the same resource group with the vm, otherwise a new workspace will be created.
    isPreview: true
  - name: --zone -z
    parameterValueGroup: "1, 2, 3"
    summary: |-
      Availability zone into which to provision the resource.
- uid: az_vm_deallocate
  name: az vm deallocate
  summary: |-
    Deallocate a VM so that computing resources are no longer allocated (charges no longer apply). The status will change from 'Stopped' to 'Stopped (Deallocated)'.
  description: |-
    For an end-to-end tutorial, see https://docs.microsoft.com/azure/virtual-machines/linux/capture-image.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm deallocate [--ids]
                     [--name]
                     [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                     [--resource-group]
                     [--subscription]
  examples:
  - summary: |-
      Deallocate, generalize, and capture a stopped virtual machine.
    syntax: >-
      az vm deallocate -g MyResourceGroup -n MyVm

      az vm generalize -g MyResourceGroup -n MyVm

      az vm capture -g MyResourceGroup -n MyVm --vhd-name-prefix MyPrefix
  - summary: |-
      Deallocate, generalize, and capture multiple stopped virtual machines.
    syntax: >-
      az vm deallocate --ids vms_ids

      az vm generalize --ids vms_ids

      az vm capture --ids vms_ids --vhd-name-prefix MyPrefix
  - summary: |-
      Deallocate a VM.
    syntax: az vm deallocate --name MyVm --no-wait --resource-group MyResourceGroup
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name --vm-name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_delete
  name: az vm delete
  summary: |-
    Delete a VM.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm delete [--ids]
                 [--name]
                 [--no-wait]
                 [--resource-group]
                 [--subscription]
                 [--yes]
  examples:
  - summary: |-
      Delete a VM without a prompt for confirmation.
    syntax: az vm delete -g MyResourceGroup -n MyVm --yes
  - summary: |-
      Delete all VMs in a resource group.
    syntax: az vm delete --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --yes -y
    defaultValue: "False"
    summary: |-
      Do not prompt for confirmation.
- uid: az_vm_generalize
  name: az vm generalize
  summary: |-
    Mark a VM as generalized, allowing it to be imaged for multiple deployments.
  description: |-
    For an end-to-end tutorial, see https://docs.microsoft.com/azure/virtual-machines/linux/capture-image.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm generalize [--ids]
                     [--name]
                     [--resource-group]
                     [--subscription]
  examples:
  - summary: |-
      Deallocate, generalize, and capture a stopped virtual machine.
    syntax: >-
      az vm deallocate -g MyResourceGroup -n MyVm

      az vm generalize -g MyResourceGroup -n MyVm

      az vm capture -g MyResourceGroup -n MyVm --vhd-name-prefix MyPrefix
  - summary: |-
      Deallocate, generalize, and capture multiple stopped virtual machines.
    syntax: >-
      az vm deallocate --ids vms_ids

      az vm generalize --ids vms_ids

      az vm capture --ids vms_ids --vhd-name-prefix MyPrefix
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name --vm-name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_get-instance-view
  name: az vm get-instance-view
  summary: |-
    Get instance information about a VM.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm get-instance-view [--ids]
                            [--name]
                            [--resource-group]
                            [--subscription]
  examples:
  - summary: |-
      Use a resource group and name to get instance view information of a VM.
    syntax: az vm get-instance-view -g MyResourceGroup -n MyVm
  - summary: |-
      Get instance views for all VMs in a resource group.
    syntax: az vm get-instance-view --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_list
  name: az vm list
  summary: |-
    List details of Virtual Machines.
  description: |-
    `--resource-group` can pass in an empty string as a parameter, which will output all VM information under the subscription. For more information on querying information about Virtual Machines, see https://docs.microsoft.com/cli/azure/query-az-cli2.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm list [--resource-group]
               [--show-details]
  examples:
  - summary: |-
      List all VMs.
    syntax: az vm list
  - summary: |-
      List all VMs by resource group.
    syntax: az vm list -g MyResourceGroup
  - summary: |-
      List all VMs by resource group with details.
    syntax: az vm list -g MyResourceGroup -d
  optionalParameters:
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --show-details -d
    defaultValue: "False"
    summary: |-
      Show public ip address, FQDN, and power states. command will run slow.
- uid: az_vm_list-ip-addresses
  name: az vm list-ip-addresses
  summary: |-
    List IP addresses associated with a VM.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm list-ip-addresses [--ids]
                            [--name]
                            [--resource-group]
                            [--subscription]
  examples:
  - summary: |-
      Get the IP addresses for a VM.
    syntax: az vm list-ip-addresses -g MyResourceGroup -n MyVm
  - summary: |-
      Get IP addresses for all VMs in a resource group.
    syntax: az vm list-ip-addresses --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_list-sizes
  name: az vm list-sizes
  summary: |-
    List available sizes for VMs.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm list-sizes [--ids]
                     [--location]
                     [--subscription]
  examples:
  - summary: |-
      List the available VM sizes in the West US region.
    syntax: az vm list-sizes -l westus
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_list-skus
  name: az vm list-skus
  summary: |-
    Get details for compute-related resource SKUs.
  description: |-
    This command incorporates subscription level restriction, offering the most accurate information.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm list-skus [--all {false, true}]
                    [--location]
                    [--resource-type]
                    [--size]
                    [--zone {false, true}]
  examples:
  - summary: |-
      List all SKUs in the West US region.
    syntax: az vm list-skus -l westus
  - summary: |-
      List all available vm sizes in the East US2 region which support availability zone.
    syntax: az vm list-skus -l eastus2 --zone
  - summary: |-
      List all available vm sizes in the East US2 region which support availability zone with name like "standard_ds1...".
    syntax: az vm list-skus -l eastus2 --zone --size standard_ds1
  - summary: |-
      List availability set related sku information in The West US region.
    syntax: az vm list-skus -l westus --resource-type availabilitySets
  optionalParameters:
  - name: --all
    parameterValueGroup: "false, true"
    summary: |-
      Show all information including vm sizes not available under the current subscription.
  - name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
  - name: --resource-type -r
    summary: |-
      Resource types e.g. "availabilitySets", "snapshots", "disks", etc.
  - name: --size -s
    summary: |-
      Size name, partial name is accepted.
  - name: --zone -z
    parameterValueGroup: "false, true"
    summary: |-
      Show skus supporting availability zones.
- uid: az_vm_list-usage
  name: az vm list-usage
  summary: |-
    List available usage resources for VMs.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: az vm list-usage --location
  examples:
  - summary: |-
      Get the compute resource usage for the West US region.
    syntax: az vm list-usage -l westus
  requiredParameters:
  - isRequired: true
    name: --location -l
    summary: |-
      Location. Values from: `az account list-locations`. You can configure the default location using `az configure --defaults location=<location>`.
- uid: az_vm_list-vm-resize-options
  name: az vm list-vm-resize-options
  summary: |-
    List available resizing options for VMs.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm list-vm-resize-options [--ids]
                                 [--name]
                                 [--resource-group]
                                 [--subscription]
  examples:
  - summary: |-
      List all available VM sizes for resizing.
    syntax: az vm list-vm-resize-options -g MyResourceGroup -n MyVm
  - summary: |-
      List available sizes for all VMs in a resource group.
    syntax: az vm list-vm-resize-options --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name --vm-name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_open-port
  name: az vm open-port
  summary: |-
    Opens a VM to inbound traffic on specified ports.
  description: |-
    Adds a security rule to the network security group (NSG) that is attached to the VM's network interface (NIC) or subnet. The existing NSG will be used or a new one will be created. The rule name is 'open-port-{port}' and will overwrite an existing rule with this name. For multi-NIC VMs, or for more fine-grained control, use the appropriate network commands directly (nsg rule create, etc).
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm open-port --port
                    [--apply-to-subnet]
                    [--ids]
                    [--name]
                    [--nsg-name]
                    [--priority]
                    [--resource-group]
                    [--subscription]
  examples:
  - summary: |-
      Open all ports on a VM to inbound traffic.
    syntax: az vm open-port -g MyResourceGroup -n MyVm --port '*'
  - summary: |-
      Open a range of ports on a VM to inbound traffic with the highest priority.
    syntax: az vm open-port -g MyResourceGroup -n MyVm --port 80-100 --priority 100
  - summary: |-
      Open ports 555, 557, 558, and 559 to inbound traffic with the highest priority.
    syntax: az vm open-port -g MyResourceGroup -n MyVm --port 555,557-559 --priority 100
  - summary: |-
      Open all ports for all VMs in a resource group.
    syntax: az vm open-port --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv) --port '*'
  requiredParameters:
  - isRequired: true
    name: --port
    summary: |-
      The port or port range (ex: 80-100) to open inbound traffic to. Use '*' to allow traffic to all ports. Use comma separated values to specify more than one port or port range.
  optionalParameters:
  - name: --apply-to-subnet
    defaultValue: "False"
    summary: |-
      Allow inbound traffic on the subnet instead of the NIC.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the virtual machine to open inbound traffic on.
  - name: --nsg-name
    summary: |-
      The name of the network security group to create if one does not exist. Ignored if an NSG already exists.
  - name: --priority
    defaultValue: "900"
    summary: |-
      Rule priority, between 100 (highest priority) and 4096 (lowest priority). Must be unique for each rule in the collection.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_perform-maintenance
  name: az vm perform-maintenance
  summary: |-
    The operation to perform maintenance on a virtual machine.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm perform-maintenance [--ids]
                              [--name]
                              [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                              [--resource-group]
                              [--subscription]
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name --vm-name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_redeploy
  name: az vm redeploy
  summary: |-
    Redeploy an existing VM.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm redeploy [--ids]
                   [--name]
                   [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                   [--resource-group]
                   [--subscription]
  examples:
  - summary: |-
      Redeploy a VM.
    syntax: az vm redeploy -g MyResourceGroup -n MyVm
  - summary: |-
      Redeploy all VMs in a resource group.
    syntax: az vm redeploy --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name --vm-name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_resize
  name: az vm resize
  summary: |-
    Update a VM's size.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm resize --size
                 [--ids]
                 [--name]
                 [--no-wait]
                 [--resource-group]
                 [--subscription]
  examples:
  - summary: |-
      Resize a VM.
    syntax: az vm resize -g MyResourceGroup -n MyVm --size Standard_DS3_v2
  - summary: |-
      Resize all VMs in a resource group.
    syntax: az vm resize --size Standard_DS3_v2 --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  requiredParameters:
  - isRequired: true
    name: --size
    summary: |-
      The VM size.
    valueFrom: az vm list-vm-resize-options
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_restart
  name: az vm restart
  summary: |-
    Restart VMs.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm restart [--force]
                  [--ids]
                  [--name]
                  [--no-wait]
                  [--resource-group]
                  [--subscription]
  examples:
  - summary: |-
      Restart a VM.
    syntax: az vm restart -g MyResourceGroup -n MyVm
  - summary: |-
      Restart all VMs in a resource group.
    syntax: az vm restart --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --force
    defaultValue: "False"
    summary: |-
      Force the VM to restart by redeploying it. Use if the VM is unresponsive.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_show
  name: az vm show
  summary: |-
    Get the details of a VM.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm show [--ids]
               [--name]
               [--resource-group]
               [--show-details]
               [--subscription]
  examples:
  - summary: |-
      Show information about a VM.
    syntax: az vm show -g MyResourceGroup -n MyVm -d
  - summary: |-
      Get the details for all VMs in a resource group.
    syntax: az vm show -d --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --show-details -d
    defaultValue: "False"
    summary: |-
      Show public ip address, FQDN, and power states. command will run slow.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_start
  name: az vm start
  summary: |-
    Start a stopped VM.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm start [--ids]
                [--name]
                [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                [--resource-group]
                [--subscription]
  examples:
  - summary: |-
      Start a stopped VM.
    syntax: az vm start -g MyResourceGroup -n MyVm
  - summary: |-
      Start all VMs in a resource group.
    syntax: az vm start --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  - summary: |-
      Start a stopped VM.
    syntax: az vm start --name MyVm --no-wait --resource-group MyResourceGroup
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name --vm-name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_stop
  name: az vm stop
  summary: |-
    Power off (stop) a running VM.
  description: |-
    The VM will continue to be billed. To avoid this, you can deallocate the VM through "az vm deallocate".
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm stop [--ids]
               [--name]
               [--no-wait]
               [--resource-group]
               [--subscription]
  examples:
  - summary: |-
      Power off (stop) a running VM.
    syntax: az vm stop --resource-group MyResourceGroup --name MyVm
  - summary: |-
      Power off a running VM without shutting down.
    syntax: az vm stop --resource-group MyResourceGroup --name MyVm --skip-shutdown
  - summary: |-
      Power off VMs in a resource group.
    syntax: az vm stop --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vm_update
  name: az vm update
  summary: |-
    Update the properties of a VM.
  description: |-
    Update VM objects and properties using paths that correspond to 'az vm show'.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm update [--add]
                 [--disk-caching]
                 [--disk-controller-type]
                 [--force-string]
                 [--ids]
                 [--license-type {None, RHEL_BASE, RHEL_BASESAPAPPS, RHEL_BASESAPHA, RHEL_BYOS, RHEL_ELS_6, RHEL_EUS, RHEL_SAPAPPS, RHEL_SAPHA, SLES, SLES_BYOS, SLES_HPC, SLES_SAP, SLES_STANDARD, UBUNTU, UBUNTU_PRO, Windows_Client, Windows_Server}]
                 [--name]
                 [--no-wait]
                 [--remove]
                 [--resource-group]
                 [--set]
                 [--size]
                 [--subscription]
                 [--workspace]
  examples:
  - summary: |-
      Add or update a tag.
    syntax: az vm update -n name -g group --set tags.tagName=tagValue
  - summary: |-
      Remove a tag.
    syntax: az vm update -n name -g group --remove tags.tagName
  - summary: |-
      Set the primary NIC of a VM.
    syntax: az vm update -n name -g group --set networkProfile.networkInterfaces[1].primary=false networkProfile.networkInterfaces[0].primary=true
  - summary: |-
      Add a new non-primary NIC to a VM.
    syntax: az vm update -n name -g group --add networkProfile.networkInterfaces primary=false id={NIC_ID}
  - summary: |-
      Remove the fourth NIC from a VM.
    syntax: az vm update -n name -g group --remove networkProfile.networkInterfaces 3
  - summary: |-
      Add an existing VM to a dedicated host
    syntax: >-
      az vm deallocate -n name -g group

      az vm update -n name -g group --host my-host

      az vm start -n name -g group
  - summary: |-
      Add an existing VM to a dedicated host group
    syntax: >-
      az vm deallocate -n name -g group

      az vm update -n name -g group --host-group my-host-group

      az vm start -n name -g group
  optionalParameters:
  - name: --add
    defaultValue: "[]"
    summary: |-
      Add an object to a list of objects by specifying a path and key value pairs.  Example: --add property.listProperty <key=value, string or JSON string>.
  - name: --disk-caching
    summary: |-
      Use singular value to apply across, or specify individual disks, e.g. 'os=ReadWrite 0=None 1=ReadOnly' should enable update os disk and 2 data disks.
  - name: --disk-controller-type
    summary: |-
      Specify the disk controller type configured for the VM or VMSS.
    isPreview: true
  - name: --force-string
    defaultValue: "False"
    summary: |-
      When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --license-type
    parameterValueGroup: "None, RHEL_BASE, RHEL_BASESAPAPPS, RHEL_BASESAPHA, RHEL_BYOS, RHEL_ELS_6, RHEL_EUS, RHEL_SAPAPPS, RHEL_SAPHA, SLES, SLES_BYOS, SLES_HPC, SLES_SAP, SLES_STANDARD, UBUNTU, UBUNTU_PRO, Windows_Client, Windows_Server"
    summary: |-
      Specifies that the Windows image or disk was licensed on-premises. To enable Azure Hybrid Benefit for Windows Server, use 'Windows_Server'. To enable Multi-tenant Hosting Rights for Windows 10, use 'Windows_Client'. For more information see the Azure Windows VM online docs.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --remove
    defaultValue: "[]"
    summary: |-
      Remove a property or an element from a list.  Example: --remove property.list <indexToRemove> OR --remove propertyToRemove.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --set
    defaultValue: "[]"
    summary: |-
      Update an object by specifying a property path and value to set.  Example: --set property1.property2=<value>.
  - name: --size
    summary: |-
      The new size of the virtual machine. See https://azure.microsoft.com/pricing/details/virtual-machines/ for size info.
    isPreview: true
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --workspace
    summary: |-
      Name or ID of Log Analytics Workspace. If you specify the workspace through its name, the workspace should be in the same resource group with the vm, otherwise a new workspace will be created.
    isPreview: true
- uid: az_vm_wait
  name: az vm wait
  summary: |-
    Place the CLI in a waiting state until a condition of the VM is met.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm wait [--created]
               [--custom]
               [--deleted]
               [--exists]
               [--ids]
               [--interval]
               [--name]
               [--resource-group]
               [--subscription]
               [--timeout]
               [--updated]
  examples:
  - summary: |-
      Wait until a VM is created.
    syntax: az vm wait -g MyResourceGroup -n MyVm --created
  - summary: |-
      Wait until all VMs in a resource group are deleted.
    syntax: az vm wait --deleted --ids $(az vm list -g MyResourceGroup --query "[].id" -o tsv)
  optionalParameters:
  - name: --created
    defaultValue: "False"
    summary: |-
      Wait until created with 'provisioningState' at 'Succeeded'.
  - name: --custom
    summary: |-
      Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
  - name: --deleted
    defaultValue: "False"
    summary: |-
      Wait until deleted.
  - name: --exists
    defaultValue: "False"
    summary: |-
      Wait until the resource exists.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --interval
    defaultValue: "30"
    summary: |-
      Polling interval in seconds.
  - name: --name -n
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --timeout
    defaultValue: "3600"
    summary: |-
      Maximum wait in seconds.
  - name: --updated
    defaultValue: "False"
    summary: |-
      Wait until updated with provisioningState at 'Succeeded'.
commands:
- az_vm_aem
- az_vm_aem_delete
- az_vm_aem_set
- az_vm_aem_verify
- az_vm_auto-shutdown
- az_vm_availability-set
- az_vm_availability-set_convert
- az_vm_availability-set_create
- az_vm_availability-set_delete
- az_vm_availability-set_list
- az_vm_availability-set_list-sizes
- az_vm_availability-set_show
- az_vm_availability-set_update
- az_vm_boot-diagnostics
- az_vm_boot-diagnostics_disable
- az_vm_boot-diagnostics_enable
- az_vm_boot-diagnostics_get-boot-log
- az_vm_capture
- az_vm_convert
- az_vm_create
- az_vm_deallocate
- az_vm_delete
- az_vm_diagnostics
- az_vm_diagnostics_get-default-config
- az_vm_diagnostics_set
- az_vm_disk
- az_vm_disk_attach
- az_vm_disk_detach
- az_vm_encryption
- az_vm_encryption_disable
- az_vm_encryption_enable
- az_vm_encryption_show
- az_vm_extension
- az_vm_extension_delete
- az_vm_extension_image
- az_vm_extension_image_list
- az_vm_extension_image_list-names
- az_vm_extension_image_list-versions
- az_vm_extension_image_show
- az_vm_extension_list
- az_vm_extension_set
- az_vm_extension_show
- az_vm_extension_wait
- az_vm_generalize
- az_vm_get-instance-view
- az_vm_identity
- az_vm_identity_assign
- az_vm_identity_show
- az_vm_image
- az_vm_image_accept-terms
- az_vm_image_list
- az_vm_image_list-offers
- az_vm_image_list-publishers
- az_vm_image_list-skus
- az_vm_image_show
- az_vm_image_terms
- az_vm_image_terms_accept
- az_vm_image_terms_cancel
- az_vm_image_terms_show
- az_vm_list
- az_vm_list-ip-addresses
- az_vm_list-sizes
- az_vm_list-skus
- az_vm_list-usage
- az_vm_list-vm-resize-options
- az_vm_monitor
- az_vm_monitor_log
- az_vm_monitor_log_show
- az_vm_nic
- az_vm_nic_add
- az_vm_nic_list
- az_vm_nic_remove
- az_vm_nic_set
- az_vm_nic_show
- az_vm_open-port
- az_vm_perform-maintenance
- az_vm_redeploy
- az_vm_repair
- az_vm_repair_create
- az_vm_repair_list-scripts
- az_vm_repair_repair-and-restore
- az_vm_repair_reset-nic
- az_vm_repair_restore
- az_vm_repair_run
- az_vm_resize
- az_vm_restart
- az_vm_run-command
- az_vm_run-command_create
- az_vm_run-command_delete
- az_vm_run-command_invoke
- az_vm_run-command_list
- az_vm_run-command_show
- az_vm_run-command_update
- az_vm_run-command_wait
- az_vm_secret
- az_vm_secret_add
- az_vm_secret_format
- az_vm_secret_list
- az_vm_secret_remove
- az_vm_show
- az_vm_start
- az_vm_stop
- az_vm_unmanaged-disk
- az_vm_unmanaged-disk_attach
- az_vm_unmanaged-disk_detach
- az_vm_unmanaged-disk_list
- az_vm_update
- az_vm_user
- az_vm_user_delete
- az_vm_user_reset-ssh
- az_vm_user_update
- az_vm_wait
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, table, tsv"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  description: Manage Linux or Windows virtual machines.
