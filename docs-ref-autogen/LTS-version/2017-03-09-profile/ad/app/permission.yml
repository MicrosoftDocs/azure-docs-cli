### YamlMime:AzureCLIGroup
uid: az_ad_app_permission
name: az ad app permission
summary: |-
  Manage an application's OAuth2 permissions.
status: GA
sourceType: Core
directCommands:
- uid: az_ad_app_permission_add
  name: az ad app permission add
  summary: |-
    Add an API permission.
  description: |-
    Invoking "az ad app permission grant" is needed to activate it.

    To get available permissions of the resource app, run `az ad sp show --id <resource-appId>`. For example, to get available permissions for Microsoft Graph API, run `az ad sp show --id 00000003-0000-0000-c000-000000000000`. Application permissions under the `appRoles` property correspond to `Role` in --api-permissions. Delegated permissions under the `oauth2Permissions` property correspond to `Scope` in --api-permissions.

    For details on Microsoft Graph permissions, see https://learn.microsoft.com/graph/permissions-reference.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: >-
    az ad app permission add --api
                             --api-permissions
                             --id
  examples:
  - summary: |-
      Add Microsoft Graph delegated permission User.Read
    syntax: az ad app permission add --id {appId} --api 00000003-0000-0000-c000-000000000000 --api-permissions e1fe6dd8-ba31-4d61-89e7-88639da4683d=Scope
  - summary: |-
      Add Microsoft Graph application permission Application.ReadWrite.All
    syntax: az ad app permission add --id {appId} --api 00000003-0000-0000-c000-000000000000 --api-permissions 1bfefb4e-e0b5-418b-a88f-73c46d2cc8e9=Role
  requiredParameters:
  - isRequired: true
    name: --api
    summary: |-
      RequiredResourceAccess.resourceAppId - The unique identifier for the resource that the application requires access to. This should be equal to the appId declared on the target resource application.
  - isRequired: true
    name: --api-permissions
    summary: |-
      Space-separated list of {id}={type}. {id} is resourceAccess.id - The unique identifier for one of the oauth2PermissionScopes or appRole instances that the resource application exposes. {type} is resourceAccess.type - Specifies whether the id property references an oauth2PermissionScopes or an appRole. The possible values are: Scope (for OAuth 2.0 permission scopes) or Role (for app roles).
  - isRequired: true
    name: --id
    summary: |-
      Identifier uri, application id, or object id.
- uid: az_ad_app_permission_admin-consent
  name: az ad app permission admin-consent
  summary: |-
    Grant Application & Delegated permissions through admin-consent.
  description: |-
    You must login as a global administrator.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: az ad app permission admin-consent --id
  examples:
  - summary: |-
      Grant Application & Delegated permissions through admin-consent. (autogenerated)
    syntax: az ad app permission admin-consent --id 00000000-0000-0000-0000-000000000000
  requiredParameters:
  - isRequired: true
    name: --id
    summary: |-
      Identifier uri, application id, or object id.
- uid: az_ad_app_permission_delete
  name: az ad app permission delete
  summary: |-
    Remove an API permission.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: >-
    az ad app permission delete --api
                                --id
                                [--api-permissions]
  examples:
  - summary: |-
      Remove Microsoft Graph permissions.
    syntax: az ad app permission delete --id eeba0b46-78e5-4a1a-a1aa-cafe6c123456 --api 00000003-0000-0000-c000-000000000000
  - summary: |-
      Remove Microsoft Graph delegated permission User.Read
    syntax: az ad app permission delete --id eeba0b46-78e5-4a1a-a1aa-cafe6c123456 --api 00000003-0000-0000-c000-000000000000 --api-permissions e1fe6dd8-ba31-4d61-89e7-88639da4683d
  requiredParameters:
  - isRequired: true
    name: --api
    summary: |-
      RequiredResourceAccess.resourceAppId - The unique identifier for the resource that the application requires access to. This should be equal to the appId declared on the target resource application.
  - isRequired: true
    name: --id
    summary: |-
      Identifier uri, application id, or object id.
  optionalParameters:
  - name: --api-permissions
    summary: |-
      Specify `ResourceAccess.id` - The unique identifier for one of the OAuth2Permission or AppRole instances that the resource application exposes. Space-separated list of `<resource-access-id>`.
- uid: az_ad_app_permission_grant
  name: az ad app permission grant
  summary: |-
    Grant the app an API Delegated permissions.
  description: |-
    A service principal must exist for the app when running this command. To create a corresponding service principal, use `az ad sp create --id {appId}`.
    For Application permissions, please use "ad app permission admin-consent".
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: >-
    az ad app permission grant --api,
                               --id,
                               --scope
                               [--consent-type {AllPrincipals, Principal}]
                               [--principal-id]
  examples:
  - summary: |-
      Grant a native application with permissions to access an existing API with TTL of 2 years
    syntax: az ad app permission grant --id e042ec79-34cd-498f-9d9f-1234234 --api a0322f79-57df-498f-9d9f-12678 --scope Directory.Read.All
  requiredParameters:
  - isRequired: true
    name: --api, --resource-id
    summary: |-
      The id of the resource service principal to which access is authorized. This identifies the API which the client is authorized to attempt to call on behalf of a signed-in user.
  - isRequired: true
    name: --id, --client-id
    summary: |-
      The id of the client service principal for the application which is authorized to act on behalf of a signed-in user when accessing an API.
  - isRequired: true
    name: --scope
    summary: |-
      A space-separated list of the claim values for delegated permissions which should be included in access tokens for the resource application (the API). For example, openid User.Read GroupMember.Read.All. Each claim value should match the value field of one of the delegated permissions defined by the API, listed in the oauth2PermissionScopes property of the resource service principal.
  optionalParameters:
  - name: --consent-type
    defaultValue: "AllPrincipals"
    parameterValueGroup: "AllPrincipals, Principal"
    summary: |-
      Indicates whether authorization is granted for the client application to impersonate all users or only a specific user. 'AllPrincipals' indicates authorization to impersonate all users. 'Principal' indicates authorization to impersonate a specific user. Consent on behalf of all users can be granted by an administrator. Non-admin users may be authorized to consent on behalf of themselves in some cases, for some delegated permissions.
  - name: --principal-id
    summary: |-
      The id of the user on behalf of whom the client is authorized to access the resource, when consentType is 'Principal'. If consentType is 'AllPrincipals' this value is null. Required when consentType is 'Principal'.
- uid: az_ad_app_permission_list
  name: az ad app permission list
  summary: |-
    List API permissions the application has requested.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: az ad app permission list --id
  examples:
  - summary: |-
      List the OAuth2 permissions for an application.
    syntax: az ad app permission list --id e042ec79-34cd-498f-9d9f-1234234
  requiredParameters:
  - isRequired: true
    name: --id
    summary: |-
      Identifier uri, application id, or object id of the associated application.
- uid: az_ad_app_permission_list-grants
  name: az ad app permission list-grants
  summary: |-
    List Oauth2 permission grants.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: >-
    az ad app permission list-grants [--filter]
                                     [--id]
                                     [--show-resource-name {false, true}]
  examples:
  - summary: |-
      list oauth2 permissions granted to the service principal
    syntax: az ad app permission list-grants --id e042ec79-34cd-498f-9d9f-1234234123456
  optionalParameters:
  - name: --filter
    summary: |-
      OData filter, e.g. --filter "displayname eq 'test' and servicePrincipalType eq 'Application'".
  - name: --id
    summary: |-
      Identifier uri, application id, or object id.
  - name: --show-resource-name -r
    parameterValueGroup: "false, true"
    summary: |-
      Show resource's display name.
commands:
- az_ad_app_permission_add
- az_ad_app_permission_admin-consent
- az_ad_app_permission_delete
- az_ad_app_permission_grant
- az_ad_app_permission_list
- az_ad_app_permission_list-grants
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, none, table, tsv, yaml, yamlc"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  ms.date: 07/25/2024
  description: Manage an application's OAuth2 permissions.
