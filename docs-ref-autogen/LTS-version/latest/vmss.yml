### YamlMime:AzureCLIGroup
uid: az_vmss
name: az vmss
summary: |-
  Manage groupings of virtual machines in an Azure Virtual Machine Scale Set (VMSS).
status: GA
sourceType: Core
directCommands:
- uid: az_vmss_create
  name: az vmss create
  summary: |-
    Create an Azure Virtual Machine Scale Set.
  description: |-
    For an end-to-end tutorial, see https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-linux-create-cli.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss create --name
                   --resource-group
                   [--accelerated-networking {false, true}]
                   [--accept-term]
                   [--additional-events {false, true}]
                   [--admin-password]
                   [--admin-username]
                   [--app-gateway]
                   [--app-gateway-capacity]
                   [--app-gateway-sku]
                   [--app-gateway-subnet-address-prefix]
                   [--asgs]
                   [--assign-identity]
                   [--authentication-type {all, password, ssh}]
                   [--automatic-repairs-action {Reimage, Replace, Restart}]
                   [--automatic-repairs-grace-period]
                   [--backend-pool-name]
                   [--backend-port]
                   [--capacity-reservation-group]
                   [--computer-name-prefix]
                   [--custom-data]
                   [--data-disk-caching]
                   [--data-disk-delete-option {Delete, Detach}]
                   [--data-disk-encryption-sets]
                   [--data-disk-iops]
                   [--data-disk-mbps]
                   [--data-disk-sizes-gb]
                   [--disable-integrity-monitoring-autoupgrade]
                   [--disable-overprovision]
                   [--disk-controller-type {NVMe, SCSI}]
                   [--dns-servers]
                   [--edge-zone]
                   [--enable-agent {false, true}]
                   [--enable-auto-os-upgrade {false, true}]
                   [--enable-auto-update {false, true}]
                   [--enable-cross-zone-upgrade {false, true}]
                   [--enable-hibernation {false, true}]
                   [--enable-integrity-monitoring]
                   [--enable-osimage-notification {false, true}]
                   [--enable-proxy-agent {false, true}]
                   [--enable-reboot {false, true}]
                   [--enable-redeploy {false, true}]
                   [--enable-resilient-creation {false, true}]
                   [--enable-resilient-deletion {false, true}]
                   [--enable-secure-boot {false, true}]
                   [--enable-spot-restore {false, true}]
                   [--enable-vtpm {false, true}]
                   [--encryption-at-host {false, true}]
                   [--ephemeral-os-disk {false, true}]
                   [--ephemeral-os-disk-placement {CacheDisk, NvmeDisk, ResourceDisk}]
                   [--eviction-policy {Deallocate, Delete}]
                   [--exclude-extensions]
                   [--generate-ssh-keys]
                   [--health-probe]
                   [--host-group]
                   [--image]
                   [--instance-count]
                   [--lb]
                   [--lb-nat-rule-name]
                   [--lb-sku {Basic, Gateway, Standard}]
                   [--license-type {None, RHEL_BASE, RHEL_BASESAPAPPS, RHEL_BASESAPHA, RHEL_BYOS, RHEL_ELS_6, RHEL_EUS, RHEL_SAPAPPS, RHEL_SAPHA, SLES, SLES_BYOS, SLES_HPC, SLES_SAP, SLES_STANDARD, UBUNTU, UBUNTU_PRO, Windows_Client, Windows_Server}]
                   [--location]
                   [--max-batch-instance-percent]
                   [--max-price]
                   [--max-surge {false, true}]
                   [--max-unhealthy-instance-percent]
                   [--max-unhealthy-upgraded-instance-percent]
                   [--network-api-version]
                   [--no-wait]
                   [--nsg]
                   [--orchestration-mode {Flexible, Uniform}]
                   [--os-disk-caching {None, ReadOnly, ReadWrite}]
                   [--os-disk-delete-option {Delete, Detach}]
                   [--os-disk-encryption-set]
                   [--os-disk-name]
                   [--os-disk-secure-vm-disk-encryption-set]
                   [--os-disk-security-encryption-type {DiskWithVMGuestState, NonPersistedTPM, VMGuestStateOnly}]
                   [--os-disk-size-gb]
                   [--os-type {linux, windows}]
                   [--patch-mode {AutomaticByOS, AutomaticByPlatform, ImageDefault, Manual}]
                   [--pause-time-between-batches]
                   [--plan-name]
                   [--plan-product]
                   [--plan-promotion-code]
                   [--plan-publisher]
                   [--platform-fault-domain-count]
                   [--ppg]
                   [--prioritize-unhealthy-instances {false, true}]
                   [--priority {Low, Regular, Spot}]
                   [--proxy-agent-mode {Audit, Enforce}]
                   [--public-ip-address]
                   [--public-ip-address-allocation {dynamic, static}]
                   [--public-ip-address-dns-name]
                   [--public-ip-per-vm]
                   [--regular-priority-count]
                   [--regular-priority-percentage]
                   [--role]
                   [--scale-in-policy {Default, NewestVM, OldestVM}]
                   [--scope]
                   [--secrets]
                   [--security-posture-id]
                   [--security-type {ConfidentialVM, Standard, TrustedLaunch}]
                   [--single-placement-group {false, true}]
                   [--sku-allocat-strat {CapacityOptimized, LowestPrice}]
                   [--skuprofile-vmsizes]
                   [--specialized {false, true}]
                   [--spot-restore-timeout]
                   [--ssh-dest-key-path]
                   [--ssh-key-type {Ed25519, RSA}]
                   [--ssh-key-values]
                   [--storage-container-name]
                   [--storage-sku]
                   [--subnet]
                   [--subnet-address-prefix]
                   [--tags]
                   [--terminate-notification-time]
                   [--ultra-ssd-enabled {false, true}]
                   [--upgrade-policy-mode {Automatic, Manual, Rolling}]
                   [--use-unmanaged-disk]
                   [--user-data]
                   [--v-cpus-available]
                   [--v-cpus-per-core]
                   [--validate]
                   [--vm-domain-name]
                   [--vm-sku]
                   [--vnet-address-prefix]
                   [--vnet-name]
                   [--zones]
  examples:
  - summary: |-
      Create a Windows VM scale set with 5 instances, a load balancer, a public IP address, a 2GB data disk and 40GB OS disk.
    syntax: az vmss create -n MyVmss -g MyResourceGroup --instance-count 5 --image Win2016Datacenter --data-disk-sizes-gb 2 --os-disk-size-gb 40
  - summary: |-
      Create a Linux VM scale set with an auto-generated ssh key pair, a public IP address, a DNS entry, an existing load balancer, and an existing virtual network.
    syntax: >-
      az vmss create -n MyVmss -g MyResourceGroup --public-ip-address-dns-name my-globally-dns-name \
          --load-balancer MyLoadBalancer --vnet-name MyVnet --subnet MySubnet --image Ubuntu2204 \
          --generate-ssh-keys
  - summary: |-
      Create a Linux VM scale set from a custom image using the default existing public SSH key.
    syntax: az vmss create -n MyVmss -g MyResourceGroup --image MyImage
  - summary: |-
      Create a Linux VM scale set with a load balancer and custom DNS servers. Each VM has a public-ip address and a custom domain name.
    syntax: >-
      az vmss create -n MyVmss -g MyResourceGroup --image CentOS85Gen2 \
          --public-ip-per-vm --vm-domain-name myvmss --dns-servers 10.0.0.6 10.0.0.5
  - summary: |-
      Create a Linux VM scale set using a cloud-init script for configuration. See: https://docs.microsoft.com/azure/virtual-machines/linux/using-cloud-init
    syntax: az vmss create -g MyResourceGroup -n MyVmss --image Debian11 --custom-data MyCloudInitScript.yml
  - summary: |-
      Create a VMSS from a generalized gallery image version.
    syntax: az vmss create -g MyResourceGroup -n MyVmss --image /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myRG/providers/Microsoft.Compute/galleries/myGallery/images/myImage/versions/1.0.0
  - summary: |-
      Create a VMSS from a specialized gallery image version.
    syntax: az vmss create -g MyResourceGroup -n MyVmss --image /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myRG/providers/Microsoft.Compute/galleries/myGallery/images/myImage/versions/1.0.0 --specialized
  - summary: |-
      Create a VMSS from the latest version of a gallery image
    syntax: az vmss create -g MyResourceGroup -n MyVmss --image /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/myRG/providers/Microsoft.Compute/galleries/myGallery/images/myImage
  - summary: |-
      Create a Debian11 VM scaleset using Key Vault secrets.
    syntax: >-
      az keyvault certificate create --vault-name vaultname -n cert1 \
        -p "$(az keyvault certificate get-default-policy)"

      secrets=$(az keyvault secret list-versions --vault-name vaultname \
        -n cert1 --query "[?attributes.enabled].id" -o tsv)

      vm_secrets=$(az vm secret format -s "$secrets")


      az vmss create -g group-name -n vm-name --admin-username deploy  \
        --image Debian11 --secrets "$vm_secrets"
  - summary: |-
      Create a VM scaleset with system assigned identity. The VM will have a 'Contributor' Role with access to a storage account.
    syntax: az vmss create -n MyVmss -g MyResourceGroup --image CentOS85Gen2 --assign-identity --scope /subscriptions/99999999-1bf0-4dda-aec3-cb9272f09590/MyResourceGroup/myRG/providers/Microsoft.Storage/storageAccounts/storage1 --role Contributor
  - summary: |-
      Create a Debian11 VM scaleset with a user assigned identity.
    syntax: az vmss create -n MyVmss -g rg1 --image Debian11 --assign-identity  /subscriptions/99999999-1bf0-4dda-aec3-cb9272f09590/resourcegroups/myRG/providers/Microsoft.ManagedIdentity/userAssignedIdentities/myID
  - summary: |-
      Create a Debian11 VM scaleset with both system and user assigned identity.
    syntax: az vmss create -n MyVmss -g rg1 --image Debian11 --assign-identity  [system] /subscriptions/99999999-1bf0-4dda-aec3-cb9272f09590/resourcegroups/myRG/providers/Microsoft.ManagedIdentity/userAssignedIdentities/myID
  - summary: |-
      Create a single zone VM scaleset in the current resource group's region
    syntax: az vmss create -n MyVmss -g MyResourceGroup --image CentOS85Gen2 --zones 1
  - summary: |-
      Create a VMSS that supports SpotRestore.
    syntax: az vmss create -n MyVmss -g MyResourceGroup  --location NorthEurope --instance-count 2 --image CentOS85Gen2 --priority Spot --eviction-policy Deallocate --single-placement-group --enable-spot-restore True --spot-restore-timeout PT1H
  - summary: |-
      Create a VMSS from shared gallery image.
    syntax: az vmss create -n MyVmss -g MyResourceGroup --image /SharedGalleries/{gallery_unique_name}/Images/{image}/Versions/{version}
  - summary: |-
      Create a VMSS from community gallery image.
    syntax: az vmss create -n MyVmss -g MyResourceGroup --image /CommunityGalleries/{gallery_unique_name}/Images/{image}/Versions/{version}
  - summary: |-
      Create a Windows VMSS with patch mode 'Manual' (Currently patch mode 'AutomaticByPlatform' is not supported during VMSS creation as health extension which is required for 'AutomaticByPlatform' mode cannot be set during VMSS creation).
    syntax: az vmss create -n MyVmss -g MyResourceGroup --image Win2019Datacenter --enable-agent --enable-auto-update false --patch-mode Manual --orchestration-mode Flexible
  - summary: |-
      Create a VMSS with specifying the security posture to be used for all virtual machines in the scale set.
    syntax: >-
      az vmss create -n MyVmss -g MyResourceGroup --image /CommunityGalleries/{gallery_unique_name}/Images/{image}/Versions/{version} --security-posture-reference-id /CommunityGalleries/{communityGalleryName}/securityPostures/{securityPostureName}/versions/{version} \
          --security-posture-reference-exclude-extensions "c:\tmp\exclude_extensions.json"
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      Name of the virtual machine scale set.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --accelerated-networking
    parameterValueGroup: "false, true"
    summary: |-
      Enable accelerated networking. Unless specified, CLI will enable it based on machine image and size.
  - name: --accept-term
    summary: |-
      Accept the license agreement and privacy statement.
  - name: --additional-events --additional-scheduled-events --scheduled-event-additional-publishing-target-event-grid-and-resource-graph
    parameterValueGroup: "false, true"
    summary: |-
      The configuration parameter used while creating event grid and resource graph scheduled event setting.
  - name: --admin-password
    summary: |-
      Password for the VM if authentication type is 'Password'.
  - name: --admin-username
    summary: |-
      Username for the VM. Default value is current username of OS. If the default value is system reserved, then default value will be set to azureuser. Please refer to https://docs.microsoft.com/rest/api/compute/virtualmachines/createorupdate#osprofile to get a full list of reserved values.
  - name: --app-gateway
    summary: |-
      Name to use when creating a new application gateway (default) or referencing an existing one. Can also reference an existing application gateway by ID or specify "" for none.
  - name: --app-gateway-capacity
    defaultValue: "10"
    summary: |-
      The number of instances to use when creating a new application gateway.
  - name: --app-gateway-sku
    defaultValue: "Standard_Large"
    summary: |-
      SKU when creating a new application gateway.
  - name: --app-gateway-subnet-address-prefix
    summary: |-
      The subnet IP address prefix to use when creating a new application gateway in CIDR format.
  - name: --asgs
    summary: |-
      Space-separated list of existing application security groups to associate with the VM.
  - name: --assign-identity
    summary: |-
      Accept system or user assigned identities separated by spaces. Use '[system]' to refer system assigned identity, or a resource id to refer user assigned identity. Check out help for more examples.
  - name: --authentication-type
    parameterValueGroup: "all, password, ssh"
    summary: |-
      Type of authentication to use with the VM. Defaults to password for Windows and SSH public key for Linux. "all" enables both ssh and password authentication.
  - name: --automatic-repairs-action
    parameterValueGroup: "Reimage, Replace, Restart"
    summary: |-
      Type of repair action that will be used for repairing unhealthy virtual machines in the scale set.
  - name: --automatic-repairs-grace-period
    summary: |-
      The amount of time (in minutes, between 30 and 90) for which automatic repairs are suspended due to a state change on VM.
  - name: --backend-pool-name
    summary: |-
      Name to use for the backend pool when creating a new load balancer or application gateway.
  - name: --backend-port
    summary: |-
      When creating a new load balancer, backend port to open with NAT rules (Defaults to 22 on Linux and 3389 on Windows). When creating an application gateway, the backend port to use for the backend HTTP settings.
  - name: --capacity-reservation-group --crg
    summary: |-
      The ID or name of the capacity reservation group that is used to allocate. Pass in "None" to disassociate the capacity reservation group. Please note that if you want to delete a VM/VMSS that has been associated with capacity reservation group, you need to disassociate the capacity reservation group first.
    isPreview: true
  - name: --computer-name-prefix
    summary: |-
      Computer name prefix for all of the virtual machines in the scale set. Computer name prefixes must be 1 to 15 characters long.
  - name: --custom-data
    summary: |-
      Custom init script file or text (cloud-init, cloud-config, etc..).
  - name: --data-disk-caching
    summary: |-
      Storage caching type for data disk(s), including 'None', 'ReadOnly', 'ReadWrite', etc. Use a singular value to apply on all disks, or use `<lun>=<vaule1> <lun>=<value2>` to configure individual disk.
  - name: --data-disk-delete-option
    parameterValueGroup: "Delete, Detach"
    summary: |-
      Specify whether data disk should be deleted or detached upon VMSS Flex deletion (This feature is only for VMSS with flexible orchestration mode).
  - name: --data-disk-encryption-sets
    summary: |-
      Names or IDs (space delimited) of disk encryption sets for data disks.
  - name: --data-disk-iops
    summary: |-
      Specify the Read-Write IOPS (space delimited) for the managed disk. Should be used only when StorageAccountType is UltraSSD_LRS. If not specified, a default value would be assigned based on diskSizeGB.
  - name: --data-disk-mbps
    summary: |-
      Specify the bandwidth in MB per second (space delimited) for the managed disk. Should be used only when StorageAccountType is UltraSSD_LRS. If not specified, a default value would be assigned based on diskSizeGB.
  - name: --data-disk-sizes-gb
    summary: |-
      Space-separated empty managed data disk sizes in GB to create.
  - name: --disable-integrity-monitoring-autoupgrade
    defaultValue: "False"
    summary: |-
      Disable auto upgrade of guest attestation extension for Trusted Launch enabled VMs and VMSS.
  - name: --disable-overprovision
    summary: |-
      Overprovision option (see https://azure.microsoft.com/documentation/articles/virtual-machine-scale-sets-overview/ for details).
  - name: --disk-controller-type
    parameterValueGroup: "NVMe, SCSI"
    summary: |-
      Specify the disk controller type configured for the VM or VMSS.
    isPreview: true
  - name: --dns-servers
    summary: |-
      Space-separated IP addresses of DNS servers, e.g. 10.0.0.5 10.0.0.6.
  - name: --edge-zone
    summary: |-
      The name of edge zone.
  - name: --enable-agent
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether virtual machine agent should be provisioned on the virtual machine. When this property is not specified, default behavior is to set it to true. This will ensure that VM Agent is installed on the VM so that extensions can be added to the VM later.
  - name: --enable-auto-os-upgrade
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether OS upgrades should automatically be applied to scale set instances in a rolling fashion when a newer version of the OS image becomes available.
  - name: --enable-auto-update
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether Automatic Updates is enabled for the Windows virtual machine.
  - name: --enable-cross-zone-upgrade
    parameterValueGroup: "false, true"
    summary: |-
      Set this Boolean property will allow VMSS to ignore AZ boundaries when constructing upgrade batches, and only consider Update Domain and maxBatchInstancePercent to determine the batch size.
  - name: --enable-hibernation
    parameterValueGroup: "false, true"
    summary: |-
      The flag that enable or disable hibernation capability on the VMSS.
  - name: --enable-integrity-monitoring
    defaultValue: "False"
    summary: |-
      Enable installing Microsoft propietary and not security supported guest attestation extension and enabling System Assigned Identity for Trusted Launch enabled VMs and VMSS.
  - name: --enable-osimage-notification
    parameterValueGroup: "false, true"
    summary: |-
      Specify whether the OS Image Scheduled event is enabled or disabled.
  - name: --enable-proxy-agent
    parameterValueGroup: "false, true"
    summary: |-
      Specify whether proxy agent feature should be enabled on the virtual machine or virtual machine scale set.
  - name: --enable-reboot --enable-user-reboot-scheduled-events
    parameterValueGroup: "false, true"
    summary: |-
      The configuration parameter used while publishing scheduled events additional publishing targets.
  - name: --enable-redeploy --enable-user-redeploy-scheduled-events
    parameterValueGroup: "false, true"
    summary: |-
      The configuration parameter used while creating user initiated redeploy scheduled event setting creation.
  - name: --enable-resilient-creation
    parameterValueGroup: "false, true"
    summary: |-
      Automatically recover customers from OS Provisioning Timeout and VM Start Timeout errors experienced during a VM Create operation by deleting and recreating the affected VM.
  - name: --enable-resilient-deletion
    parameterValueGroup: "false, true"
    summary: |-
      Retry VM Delete requests asynchronously in the event of a failed delete operation.
  - name: --enable-secure-boot
    parameterValueGroup: "false, true"
    summary: |-
      Enable secure boot.
  - name: --enable-spot-restore
    parameterValueGroup: "false, true"
    summary: |-
      Enable the Spot-Try-Restore feature where evicted VMSS SPOT instances will be tried to be restored opportunistically based on capacity availability and pricing constraints.
  - name: --enable-vtpm
    parameterValueGroup: "false, true"
    summary: |-
      Enable vTPM.
  - name: --encryption-at-host
    parameterValueGroup: "false, true"
    summary: |-
      Enable Host Encryption for the VM or VMSS. This will enable the encryption for all the disks including Resource/Temp disk at host itself.
  - name: --ephemeral-os-disk
    parameterValueGroup: "false, true"
    summary: |-
      Allows you to create an OS disk directly on the host node, providing local disk performance and faster VM/VMSS reimage time.
  - name: --ephemeral-os-disk-placement --ephemeral-placement
    parameterValueGroup: "CacheDisk, NvmeDisk, ResourceDisk"
    summary: |-
      Only applicable when used with `--ephemeral-os-disk`. Allows you to choose the Ephemeral OS disk provisioning location.
  - name: --eviction-policy
    parameterValueGroup: "Deallocate, Delete"
    summary: |-
      The eviction policy for virtual machines in a Spot priority scale set. Default eviction policy is Deallocate for a Spot priority scale set.
  - name: --exclude-extensions --security-posture-reference-exclude-extensions
    summary: |-
      List of virtual machine extensions to exclude when applying the Security Posture. Either a Json string or a file path is acceptable. Please refer to https://docs.microsoft.com/rest/api/compute/virtualmachinescalesets/get#virtualmachineextension for the data format.
  - name: --generate-ssh-keys
    defaultValue: "False"
    summary: |-
      Generate SSH public and private key files if missing. The keys will be stored in the ~/.ssh directory.
  - name: --health-probe
    summary: |-
      Probe name from the existing load balancer, mainly used for rolling upgrade or automatic repairs.
  - name: --host-group
    summary: |-
      Name or ID of dedicated host group that the virtual machine scale set resides in.
  - name: --image
    summary: |-
      The name of the operating system image as a URN alias, URN, custom image name or ID, or VHD blob URI. In addition, it also supports shared gallery image. Please use the image alias including the version of the distribution you want to use. For example: please use Debian11 instead of Debian.' This parameter is required unless using `--attach-os-disk.` Valid URN format: "Publisher:Offer:Sku:Version". For more information, see https://docs.microsoft.com/azure/virtual-machines/linux/cli-ps-findimage.
    valueFrom: az sig image-version show-shared, az vm image list, az vm image show
  - name: --instance-count
    defaultValue: "2"
    summary: |-
      Number of VMs in the scale set.
  - name: --lb --load-balancer
    summary: |-
      Name to use when creating a new load balancer (default) or referencing an existing one. Can also reference an existing load balancer by ID or specify "" for none.
  - name: --lb-nat-rule-name --nat-rule-name
    summary: |-
      Name to use for the NAT rule v2 when creating a new load balancer. (NAT rule V2 is used to replace NAT pool).
  - name: --lb-sku
    defaultValue: "Standard"
    parameterValueGroup: "Basic, Gateway, Standard"
    summary: |-
      Sku of the Load Balancer to create. The public IP is supported to be created on edge zone only when it is 'Standard'.
  - name: --license-type
    parameterValueGroup: "None, RHEL_BASE, RHEL_BASESAPAPPS, RHEL_BASESAPHA, RHEL_BYOS, RHEL_ELS_6, RHEL_EUS, RHEL_SAPAPPS, RHEL_SAPHA, SLES, SLES_BYOS, SLES_HPC, SLES_SAP, SLES_STANDARD, UBUNTU, UBUNTU_PRO, Windows_Client, Windows_Server"
    summary: |-
      Specifies that the Windows image or disk was licensed on-premises. To enable Azure Hybrid Benefit for Windows Server, use 'Windows_Server'. To enable Multi-tenant Hosting Rights for Windows 10, use 'Windows_Client'. For more information see the Azure Windows VM online docs.
  - name: --location -l
    summary: |-
      Location in which to create VM and related resources. If default location is not configured, will default to the resource group's location.
  - name: --max-batch-instance-percent
    summary: |-
      The maximum percent of total virtual machine instances that will be upgraded simultaneously by the rolling upgrade in one batch. Default: 20%.
  - name: --max-price
    summary: |-
      The maximum price (in US Dollars) you are willing to pay for a Spot VM/VMSS. -1 indicates that the Spot VM/VMSS should not be evicted for price reasons.
    isPreview: true
  - name: --max-surge
    parameterValueGroup: "false, true"
    summary: |-
      Specify it to create new virtual machines to upgrade the scale set, rather than updating the existing virtual machines.
    isPreview: true
  - name: --max-unhealthy-instance-percent
    summary: |-
      The maximum percentage of the total virtual machine instances in the scale set that can be simultaneously unhealthy. Default: 20%.
  - name: --max-unhealthy-upgraded-instance-percent
    summary: |-
      The maximum percentage of upgraded virtual machine instances that can be found to be in an unhealthy state. Default: 20%.
  - name: --network-api-version
    summary: |-
      Specify the Microsoft.Network API version used when creating networking resources in the Network Interface Configurations for Virtual Machine Scale Set with orchestration mode 'Flexible'. Default value is 2020-11-01.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --nsg
    summary: |-
      Name or ID of an existing Network Security Group.
  - name: --orchestration-mode
    defaultValue: "Flexible"
    parameterValueGroup: "Flexible, Uniform"
    summary: |-
      Choose how virtual machines are managed by the scale set. In Uniform mode, you define a virtual machine model and Azure will generate identical instances based on that model. In Flexible mode, you manually create and add a virtual machine of any configuration to the scale set or generate identical instances based on virtual machine model defined for the scale set.
  - name: --os-disk-caching
    parameterValueGroup: "None, ReadOnly, ReadWrite"
    summary: |-
      Storage caching type for the VM OS disk. Default: ReadWrite.
  - name: --os-disk-delete-option
    parameterValueGroup: "Delete, Detach"
    summary: |-
      Specify whether OS disk should be deleted or detached upon VMSS Flex deletion (This feature is only for VMSS with flexible orchestration mode).
  - name: --os-disk-encryption-set
    summary: |-
      Name or ID of disk encryption set for OS disk.
  - name: --os-disk-name
    summary: |-
      The name of the new VM OS disk.
  - name: --os-disk-secure-vm-disk-encryption-set
    summary: |-
      Specify the customer managed disk encryption set resource ID or name for the managed disk that is used for customer managed key encrypted Confidential VM OS disk and VM guest blob.
  - name: --os-disk-security-encryption-type
    parameterValueGroup: "DiskWithVMGuestState, NonPersistedTPM, VMGuestStateOnly"
    summary: |-
      Specify the encryption type of the OS managed disk.
  - name: --os-disk-size-gb
    summary: |-
      OS disk size in GB to create.
  - name: --os-type
    parameterValueGroup: "linux, windows"
    summary: |-
      Type of OS installed on a custom VHD. Do not use when specifying an URN or URN alias.
  - name: --patch-mode
    parameterValueGroup: "AutomaticByOS, AutomaticByPlatform, ImageDefault, Manual"
    summary: |-
      Mode of in-guest patching to IaaS virtual machine. Allowed values for Windows VM: AutomaticByOS, AutomaticByPlatform, Manual. Allowed values for Linux VM: AutomaticByPlatform, ImageDefault. Manual - You control the application of patches to a virtual machine. You do this by applying patches manually inside the VM. In this mode, automatic updates are disabled; the paramater --enable-auto-update must be false. AutomaticByOS - The virtual machine will automatically be updated by the OS. The parameter --enable-auto-update must be true. AutomaticByPlatform - the virtual machine will automatically updated by the OS. ImageDefault - The virtual machine's default patching configuration is used. The parameter --enable-agent and --enable-auto-update must be true.
  - name: --pause-time-between-batches
    summary: |-
      The wait time between completing the update for all virtual machines in one batch and starting the next batch. Default: 0 seconds.
  - name: --plan-name
    summary: |-
      Plan name.
  - name: --plan-product
    summary: |-
      Plan product.
  - name: --plan-promotion-code
    summary: |-
      Plan promotion code.
  - name: --plan-publisher
    summary: |-
      Plan publisher.
  - name: --platform-fault-domain-count
    summary: |-
      Fault Domain count for each placement group in the availability zone.
  - name: --ppg
    summary: |-
      The name or ID of the proximity placement group the VMSS should be associated with.
  - name: --prioritize-unhealthy-instances
    parameterValueGroup: "false, true"
    summary: |-
      Set this Boolean property will lead to all unhealthy instances in a scale set getting upgraded before any healthy instances.
  - name: --priority
    parameterValueGroup: "Low, Regular, Spot"
    summary: |-
      Priority. Use 'Spot' to run short-lived workloads in a cost-effective way. 'Low' enum will be deprecated in the future. Please use 'Spot' to deploy Azure spot VM and/or VMSS. Default to Regular.
  - name: --proxy-agent-mode
    parameterValueGroup: "Audit, Enforce"
    summary: |-
      Specify the mode that proxy agent will execute on if the feature is enabled.
  - name: --public-ip-address
    summary: |-
      Name of the public IP address when creating one (default) or referencing an existing one. Can also reference an existing public IP by ID or specify "" for None ('""' in Azure CLI using PowerShell or --% operator). For Azure CLI using powershell core edition 7.3.4, specify  or "" (--public-ip-address  or --public-ip-address "").
  - name: --public-ip-address-allocation
    parameterValueGroup: "dynamic, static"
  - name: --public-ip-address-dns-name
    summary: |-
      Globally unique DNS name for a newly created public IP.
  - name: --public-ip-per-vm
    defaultValue: "False"
    summary: |-
      Each VM instance will have a public ip. For security, you can use '--nsg' to apply appropriate rules.
  - name: --regular-priority-count
    summary: |-
      The base number of regular priority VMs that will be created in this scale set as it scales out. Must be greater than 0.
    isPreview: true
  - name: --regular-priority-percentage
    summary: |-
      The percentage of VM instances, after the base regular priority count has been reached, that are expected to use regular priority. Must be between 0 and 100.
    isPreview: true
  - name: --role
    summary: |-
      Role name or id the system assigned identity will have.
  - name: --scale-in-policy
    parameterValueGroup: "Default, NewestVM, OldestVM"
    summary: |-
      Specify the scale-in policy (space delimited) that decides which virtual machines are chosen for removal when a Virtual Machine Scale Set is scaled-in.
  - name: --scope
    summary: |-
      Scope that the system assigned identity can access.
  - name: --secrets
    summary: |-
      One or many Key Vault secrets as JSON strings or files via `@{path}` containing `[{ "sourceVault": { "id": "value" }, "vaultCertificates": [{ "certificateUrl": "value", "certificateStore": "cert store name (only on windows)"}] }]`.
  - name: --security-posture-id --security-posture-reference-id
    summary: |-
      The security posture reference id in the form of /CommunityGalleries/{communityGalleryName}/securityPostures/{securityPostureName}/versions/{major.minor.patch}|{major.*}|latest.
  - name: --security-type
    parameterValueGroup: "ConfidentialVM, Standard, TrustedLaunch"
    summary: |-
      Specify the security type of the virtual machine.
  - name: --single-placement-group
    parameterValueGroup: "false, true"
    summary: |-
      Limit the scale set to a single placement group. See https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-placement-groups for details.
  - name: --sku-allocat-strat --skuprofile-allocation-strategy
    parameterValueGroup: "CapacityOptimized, LowestPrice"
    summary: |-
      Allocation strategy for vm sizes in SKU profile.
  - name: --skuprofile-vmsizes
    summary: |-
      A list of VM sizes in the scale set. See https://azure.microsoft.com/pricing/details/virtual-machines/ for size info.
  - name: --specialized
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether the source image is specialized.
  - name: --spot-restore-timeout
    summary: |-
      Timeout value expressed as an ISO 8601 time duration after which the platform will not try to restore the VMSS SPOT instances.
  - name: --ssh-dest-key-path
    summary: |-
      Destination file path on the VM for the SSH key. If the file already exists, the specified key(s) are appended to the file. Destination path for SSH public keys is currently limited to its default value "/home/username/.ssh/authorized_keys" due to a known issue in Linux provisioning agent.
  - name: --ssh-key-type
    defaultValue: "RSA"
    parameterValueGroup: "Ed25519, RSA"
    summary: |-
      Specify the type of SSH public and private key files to be generated if missing.
  - name: --ssh-key-values
    summary: |-
      Space-separated list of SSH public keys or public key file paths.
  - name: --storage-container-name
    defaultValue: "vhds"
    summary: |-
      Only applicable when used with `--use-unmanaged-disk`. Name of the storage container for the VM OS disk. Default: vhds.
  - name: --storage-sku
    summary: |-
      The SKU of the storage account with which to persist VM. Use a singular sku that would be applied across all disks, or specify individual disks. Usage: [--storage-sku SKU | --storage-sku ID=SKU ID=SKU ID=SKU...], where each ID is "os" or a 0-indexed lun. Allowed values: Standard_LRS, Premium_LRS, StandardSSD_LRS, UltraSSD_LRS, Premium_ZRS, StandardSSD_ZRS, PremiumV2_LRS.
  - name: --subnet
    summary: |-
      The name of the subnet when creating a new VNet or referencing an existing one. Can also reference an existing subnet by ID. If both vnet-name and subnet are omitted, an appropriate VNet and subnet will be selected automatically, or a new one will be created.
  - name: --subnet-address-prefix
    summary: |-
      The subnet IP address prefix to use when creating a new VNet in CIDR format.
  - name: --tags
    summary: |-
      Space-separated tags: key[=value] [key[=value] ...]. Use "" to clear existing tags.
  - name: --terminate-notification-time
    summary: |-
      Length of time (in minutes, between 5 and 15) a notification to be sent to the VM on the instance metadata server till the VM gets deleted.
  - name: --ultra-ssd-enabled
    parameterValueGroup: "false, true"
    summary: |-
      Enables or disables the capability to have 1 or more managed data disks with UltraSSD_LRS storage account.
  - name: --upgrade-policy-mode
    defaultValue: "manual"
    parameterValueGroup: "Automatic, Manual, Rolling"
    summary: |-
      Specify the mode of an upgrade to virtual machines in the scale set.
  - name: --use-unmanaged-disk
    defaultValue: "False"
    summary: |-
      Do not use managed disk to persist VM.
  - name: --user-data
    summary: |-
      UserData for the virtual machines in the scale set. It can be passed in as file or string.
  - name: --v-cpus-available
    summary: |-
      Specify the number of vCPUs available.
  - name: --v-cpus-per-core
    summary: |-
      Specify the ratio of vCPU to physical core. Setting this property to 1 also means that hyper-threading is disabled.
  - name: --validate
    defaultValue: "False"
    summary: |-
      Generate and validate the ARM template without creating any resources.
  - name: --vm-domain-name
    summary: |-
      Domain name of VM instances, once configured, the FQDN is `vm<vm-index>.<vm-domain-name>.<..rest..>`.
  - name: --vm-sku
    summary: |-
      Size of VMs in the scale set. Default to "Standard_DS1_v2". See https://azure.microsoft.com/pricing/details/virtual-machines/ for size info.
  - name: --vnet-address-prefix
    defaultValue: "10.0.0.0/16"
    summary: |-
      The IP address prefix to use when creating a new VNet in CIDR format.
  - name: --vnet-name
    summary: |-
      Name of the virtual network when creating a new one or referencing an existing one.
  - name: --zones -z
    summary: |-
      Space-separated list of availability zones into which to provision the resource.
- uid: az_vmss_deallocate
  name: az vmss deallocate
  summary: |-
    Deallocate VMs within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss deallocate --name
                       --resource-group
                       [--hibernate {false, true}]
                       [--instance-ids]
                       [--no-wait]
  examples:
  - summary: |-
      Deallocate VMs within a VMSS. (autogenerated)
    syntax: az vmss deallocate --instance-ids 1 --name MyScaleSet --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --hibernate
    parameterValueGroup: "false, true"
    summary: |-
      Hibernate a virtual machine from the VM scale set. Available for VMSS with Flexible OrchestrationMode only.
  - name: --instance-ids
    summary: |-
      Space-separated list of IDs (ex: 1 2 3 ...) or * for all instances. If not provided, the action will be applied on the scaleset itself.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_vmss_delete
  name: az vmss delete
  summary: |-
    Delete a VM scale set.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss delete [--force-deletion {0, 1, f, false, n, no, t, true, y, yes}]
                   [--ids]
                   [--name]
                   [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                   [--resource-group]
                   [--subscription]
  optionalParameters:
  - name: --force-deletion
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Optional parameter to force delete a VM scale set. (Feature in Preview).
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name --vm-scale-set-name -n
    summary: |-
      The name of the VM scale set.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_delete-instances
  name: az vmss delete-instances
  summary: |-
    Delete VMs within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss delete-instances --instance-ids
                             --name
                             --resource-group
                             [--no-wait]
  examples:
  - summary: |-
      Delete VMs within a VMSS. (autogenerated)
    syntax: az vmss delete-instances --instance-ids 0 --name MyScaleSet --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --instance-ids
    summary: |-
      Space-separated list of IDs (ex: 1 2 3 ...) or * for all instances.
  - isRequired: true
    name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_vmss_get-instance-view
  name: az vmss get-instance-view
  summary: |-
    View an instance of a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss get-instance-view [--ids]
                              [--instance-id]
                              [--name]
                              [--resource-group]
                              [--subscription]
  examples:
  - summary: |-
      View an instance of a VMSS. (autogenerated)
    syntax: az vmss get-instance-view --name MyScaleSet --resource-group MyResourceGroup
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --instance-id
    summary: |-
      A VM instance ID or "*" to list instance view for all VMs in a scale set.
  - name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_get-os-upgrade-history
  name: az vmss get-os-upgrade-history
  summary: |-
    List the OS upgrades on a VM scale set instance.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss get-os-upgrade-history --name
                                   --resource-group
                                   [--max-items]
                                   [--next-token]
  requiredParameters:
  - isRequired: true
    name: --name --vm-scale-set-name -n
    summary: |-
      The name of the VM scale set.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --max-items
    summary: |-
      Total number of items to return in the command's output. If the total number of items available is more than the value specified, a token is provided in the command's output. To resume pagination, provide the token value in `--next-token` argument of a subsequent command.
  - name: --next-token
    summary: |-
      Token to specify where to start paginating. This is the token value from a previously truncated response.
- uid: az_vmss_list
  name: az vmss list
  summary: |-
    List all VM scale sets under a resource group.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss list [--max-items]
                 [--next-token]
                 [--resource-group]
  examples:
  - summary: |-
      List VMSS
    syntax: az vmss list --resource-group MyResourceGroup
  optionalParameters:
  - name: --max-items
    summary: |-
      Total number of items to return in the command's output. If the total number of items available is more than the value specified, a token is provided in the command's output. To resume pagination, provide the token value in `--next-token` argument of a subsequent command.
  - name: --next-token
    summary: |-
      Token to specify where to start paginating. This is the token value from a previously truncated response.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
- uid: az_vmss_list-instance-connection-info
  name: az vmss list-instance-connection-info
  summary: |-
    Get the IP address and port number used to connect to individual VM instances within a set.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss list-instance-connection-info [--ids]
                                          [--name]
                                          [--resource-group]
                                          [--subscription]
  examples:
  - summary: |-
      Get the IP address and port number used to connect to individual VM instances within a set. (autogenerated)
    syntax: az vmss list-instance-connection-info --name MyScaleSet --resource-group MyResourceGroup
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_list-instance-public-ips
  name: az vmss list-instance-public-ips
  summary: |-
    List public IP addresses of VM instances within a set.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss list-instance-public-ips [--ids]
                                     [--name]
                                     [--resource-group]
                                     [--subscription]
  examples:
  - summary: |-
      List public IP addresses of VM instances within a set. (autogenerated)
    syntax: az vmss list-instance-public-ips --name MyScaleSet --resource-group MyResourceGroup
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_list-instances
  name: az vmss list-instances
  summary: |-
    List all virtual machines in a VM scale sets.
  description: |-
    Return a list of virtual machines managed by VMSS. For VMSS in Flexible Orchestration mode, please use "az vm list" to get full details.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss list-instances --name
                           --resource-group
                           [--expand]
                           [--filter]
                           [--max-items]
                           [--next-token]
                           [--select]
  requiredParameters:
  - isRequired: true
    name: --name --virtual-machine-scale-set-name -n
    summary: |-
      The name of the VM scale set.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --expand
    summary: |-
      The expand expression to apply to the operation. Allowed values are 'instanceView'.
  - name: --filter
    summary: |-
      The filter to apply to the operation. Allowed values are 'startswith(instanceView/statuses/code, 'PowerState') eq true', 'properties/latestModelApplied eq true', 'properties/latestModelApplied eq false'.
  - name: --max-items
    summary: |-
      Total number of items to return in the command's output. If the total number of items available is more than the value specified, a token is provided in the command's output. To resume pagination, provide the token value in `--next-token` argument of a subsequent command.
  - name: --next-token
    summary: |-
      Token to specify where to start paginating. This is the token value from a previously truncated response.
  - name: --select
    summary: |-
      The list parameters. Allowed values are 'instanceView', 'instanceView/statuses'.
- uid: az_vmss_list-skus
  name: az vmss list-skus
  summary: |-
    List SKUs available for your VM scale set, including the minimum and maximum VM instances allowed for each SKU.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss list-skus --name
                      --resource-group
                      [--max-items]
                      [--next-token]
  requiredParameters:
  - isRequired: true
    name: --name --vm-scale-set-name -n
    summary: |-
      The name of the VM scale set.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --max-items
    summary: |-
      Total number of items to return in the command's output. If the total number of items available is more than the value specified, a token is provided in the command's output. To resume pagination, provide the token value in `--next-token` argument of a subsequent command.
  - name: --next-token
    summary: |-
      Token to specify where to start paginating. This is the token value from a previously truncated response.
- uid: az_vmss_perform-maintenance
  name: az vmss perform-maintenance
  summary: |-
    Perform maintenance on one or more virtual machines in a VM scale set. Operation on instances which are not eligible for perform maintenance will be failed. Please refer to best practices for more details: https://docs.microsoft.com/azure/virtual-machine-scale-sets/virtual-machine-scale-sets-maintenance-notifications.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss perform-maintenance [--ids]
                                [--instance-ids]
                                [--name]
                                [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                [--resource-group]
                                [--subscription]
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --instance-ids
    summary: |-
      The virtual machine scale set instance ids. Omitting the virtual machine scale set instance ids will result in the operation being performed on all virtual machines in the virtual machine scale set.  Support shorthand-syntax, json-file and yaml-file. Try "??" to show more.
  - name: --name --vm-scale-set-name -n
    summary: |-
      The name of the VM scale set.
  - name: --no-wait
    parameterValueGroup: "0, 1, f, false, n, no, t, true, y, yes"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_reimage
  name: az vmss reimage
  summary: |-
    Reimage VMs within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss reimage [--force-update-os-disk-for-ephemeral {false, true}]
                    [--ids]
                    [--instance-ids]
                    [--name]
                    [--no-wait]
                    [--resource-group]
                    [--subscription]
  examples:
  - summary: |-
      Reimage a VM instance within a VMSS.
    syntax: az vmss reimage --instance-ids 1 --name MyScaleSet --resource-group MyResourceGroup --subscription MySubscription
  - summary: |-
      Reimage a batch of VM instances within a VMSS.
    syntax: az vmss reimage --instance-ids 1 2 3 --name MyScaleSet --resource-group MyResourceGroup --subscription MySubscription
  - summary: |-
      Reimage all the VM instances within a VMSS.
    syntax: az vmss reimage --name MyScaleSet --resource-group MyResourceGroup --subscription MySubscription
  optionalParameters:
  - name: --force-update-os-disk-for-ephemeral --update-os-disk
    parameterValueGroup: "false, true"
    summary: |-
      Force update ephemeral OS disk for a virtual machine scale set VM.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --instance-ids
    summary: |-
      Space-separated list of VM instance ID. If missing, reimage all instances.
  - name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_restart
  name: az vmss restart
  summary: |-
    Restart VMs within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss restart --name
                    --resource-group
                    [--instance-ids]
                    [--no-wait]
  examples:
  - summary: |-
      Restart VMs within a VMSS. (autogenerated)
    syntax: az vmss restart --instance-ids 1 --name MyScaleSet --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --instance-ids
    summary: |-
      Space-separated list of IDs (ex: 1 2 3 ...) or * for all instances. If not provided, the action will be applied on the scaleset itself.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_vmss_scale
  name: az vmss scale
  summary: |-
    Change the number of VMs within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss scale --new-capacity
                  [--ids]
                  [--name]
                  [--no-wait]
                  [--resource-group]
                  [--subscription]
  examples:
  - summary: |-
      Change the number of VMs within a VMSS. (autogenerated)
    syntax: az vmss scale --name MyScaleSet --new-capacity 6 --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --new-capacity
    summary: |-
      Number of VMs in the VMSS.
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_set-orchestration-service-state
  name: az vmss set-orchestration-service-state
  summary: |-
    Change ServiceState property for a given service within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss set-orchestration-service-state --action {Resume, Suspend}
                                            --service-name {AutomaticRepairs, DummyOrchestrationServiceName}
                                            [--ids]
                                            [--name]
                                            [--no-wait]
                                            [--resource-group]
                                            [--subscription]
  examples:
  - summary: |-
      Change ServiceState property for AutomaticRepairs
    syntax: az vmss set-orchestration-service-state --service-name AutomaticRepairs --action Resume --name MyScaleSet --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --action
    parameterValueGroup: "Resume, Suspend"
    summary: |-
      The action to be performed.
  - isRequired: true
    name: --service-name
    parameterValueGroup: "AutomaticRepairs, DummyOrchestrationServiceName"
    summary: |-
      The name of the orchestration service.
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_show
  name: az vmss show
  summary: |-
    Get details on VMs within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss show --name
                 --resource-group
                 [--include-user-data]
                 [--instance-id]
  examples:
  - summary: |-
      Get details on VMs within a VMSS. (autogenerated)
    syntax: az vmss show --name MyScaleSet --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --include-user-data -u
    defaultValue: "False"
    summary: |-
      Include the user data properties in the query result.
  - name: --instance-id
    summary: |-
      VM instance ID. If missing, show the VMSS.
- uid: az_vmss_simulate-eviction
  name: az vmss simulate-eviction
  summary: |-
    Simulate the eviction of a Spot virtual machine in a VM scale set.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss simulate-eviction [--ids]
                              [--instance-id]
                              [--name]
                              [--resource-group]
                              [--subscription]
  examples:
  - summary: |-
      Simulate the eviction of a Spot virtual machine in a VM scale set.
    syntax: az vmss simulate-eviction --resource-group MyResourceGroup --name MyScaleSet --instance-id 0
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --instance-id
    summary: |-
      The instance ID of the virtual machine.
  - name: --name --vm-scale-set-name -n
    summary: |-
      The name of the VM scale set.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- uid: az_vmss_start
  name: az vmss start
  summary: |-
    Start VMs within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss start --name
                  --resource-group
                  [--instance-ids]
                  [--no-wait]
  examples:
  - summary: |-
      Start VMs within a VMSS. (autogenerated)
    syntax: az vmss start --instance-ids 1 --name MyScaleSet --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --instance-ids
    summary: |-
      Space-separated list of IDs (ex: 1 2 3 ...) or * for all instances. If not provided, the action will be applied on the scaleset itself.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_vmss_stop
  name: az vmss stop
  summary: |-
    Power off (stop) VMs within a VMSS.
  description: |-
    The VMs will continue to be billed. To avoid this, you can deallocate VM instances within a VMSS through "az vmss deallocate".
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss stop --name
                 --resource-group
                 [--instance-ids]
                 [--no-wait]
                 [--skip-shutdown]
  examples:
  - summary: |-
      Power off VMs within a VMSS without shutting down.
    syntax: az vmss stop --name MyScaleSet --resource-group MyResourceGroup --skip-shutdown
  - summary: |-
      Power off (stop) VMs within a VMSS. (autogenerated)
    syntax: az vmss stop --instance-ids 1 --name MyScaleSet --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --instance-ids
    summary: |-
      Space-separated list of IDs (ex: 1 2 3 ...) or * for all instances. If not provided, the action will be applied on the scaleset itself.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --skip-shutdown
    defaultValue: "False"
    summary: |-
      Skip shutdown and power-off immediately.
- uid: az_vmss_update
  name: az vmss update
  summary: |-
    Update a VMSS. Run 'az vmss update-instances' command to roll out the changes to VMs if you have not configured upgrade policy.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss update [--add]
                   [--additional-events {false, true}]
                   [--automatic-repairs-action {Reimage, Replace, Restart}]
                   [--automatic-repairs-grace-period]
                   [--capacity-reservation-group]
                   [--custom-data]
                   [--disk-controller-type {NVMe, SCSI}]
                   [--enable-auto-os-upgrade {false, true}]
                   [--enable-automatic-repairs {false, true}]
                   [--enable-cross-zone-upgrade {false, true}]
                   [--enable-hibernation {false, true}]
                   [--enable-osimage-notification {false, true}]
                   [--enable-proxy-agent {false, true}]
                   [--enable-reboot {false, true}]
                   [--enable-redeploy {false, true}]
                   [--enable-resilient-creation {false, true}]
                   [--enable-resilient-deletion {false, true}]
                   [--enable-secure-boot {false, true}]
                   [--enable-spot-restore {false, true}]
                   [--enable-terminate-notification {false, true}]
                   [--enable-vtpm {false, true}]
                   [--ephemeral-option {Local}]
                   [--ephemeral-os-disk {false, true}]
                   [--ephemeral-os-disk-placement {CacheDisk, NvmeDisk, ResourceDisk}]
                   [--exclude-extensions]
                   [--force-deletion]
                   [--force-string]
                   [--ids]
                   [--instance-id]
                   [--license-type {None, RHEL_BASE, RHEL_BASESAPAPPS, RHEL_BASESAPHA, RHEL_BYOS, RHEL_ELS_6, RHEL_EUS, RHEL_SAPAPPS, RHEL_SAPHA, SLES, SLES_BYOS, SLES_HPC, SLES_SAP, SLES_STANDARD, UBUNTU, UBUNTU_PRO, Windows_Client, Windows_Server}]
                   [--max-batch-instance-percent]
                   [--max-price]
                   [--max-surge {false, true}]
                   [--max-unhealthy-instance-percent]
                   [--max-unhealthy-upgraded-instance-percent]
                   [--name]
                   [--no-wait]
                   [--pause-time-between-batches]
                   [--ppg]
                   [--prioritize-unhealthy-instances {false, true}]
                   [--priority {Low, Regular, Spot}]
                   [--protect-from-scale-in {false, true}]
                   [--protect-from-scale-set-actions {false, true}]
                   [--proxy-agent-mode {Audit, Enforce}]
                   [--regular-priority-count]
                   [--regular-priority-percentage]
                   [--remove]
                   [--resource-group]
                   [--scale-in-policy {Default, NewestVM, OldestVM}]
                   [--security-posture-id]
                   [--security-type {Standard, TrustedLaunch}]
                   [--set]
                   [--sku-allocat-strat {CapacityOptimized, LowestPrice}]
                   [--skuprofile-vmsizes]
                   [--spot-restore-timeout]
                   [--subscription]
                   [--terminate-notification-time]
                   [--ultra-ssd-enabled {false, true}]
                   [--upgrade-policy-mode {Automatic, Manual, Rolling}]
                   [--user-data]
                   [--v-cpus-available]
                   [--v-cpus-per-core]
                   [--vm-sku]
                   [--zones]
  examples:
  - summary: |-
      Update a VMSS' license type for Azure Hybrid Benefit.
    syntax: az vmss update --name MyScaleSet --resource-group MyResourceGroup --license-type windows_server
  - summary: |-
      Update a VM instance's protection policies.
    syntax: az vmss update --name MyScaleSet --resource-group MyResourceGroup --instance-id 4 --protect-from-scale-set-actions False --protect-from-scale-in
  - summary: |-
      Update a VM instance's protection policies.
    syntax: az vmss update --name MyScaleSet --resource-group MyResourceGroup --instance-id 4 --set protectionPolicy.protectFromScaleIn=True protectionPolicy.protectFromScaleSetActions=False
  - summary: |-
      Update a VM instance's Read-Write IOPS of the managed disk.
    syntax: az vmss update --name MyScaleSet --resource-group MyResourceGroup --set virtualMachineProfile.storageProfile.dataDisks[0].diskIOPSReadWrite=444
  - summary: |-
      Update a VM instance's bandwidth in MB per second of the managed disk.
    syntax: az vmss update --name MyScaleSet --resource-group MyResourceGroup --set virtualMachineProfile.storageProfile.dataDisks[0].diskMBpsReadWrite=66
  - summary: |-
      Update a VM to use a custom image.
    syntax: az vmss update --name MyScaleSet --resource-group MyResourceGroup --set virtualMachineProfile.storageProfile.imageReference.id=imageID
  - summary: |-
      Update a Linux VMSS to patch mode 'AutomaticByPlatform'.
    syntax: az vmss update -n MyVmss -g MyResourceGroup --set virtualMachineProfile.osProfile.linuxConfiguration.patchSettings.patchMode=AutomaticByPlatform
  - summary: |-
      Update a VMSS with specifying the security posture to be used for all virtual machines in the scale set.
    syntax: >-
      az vmss update -n MyVmss -g MyResourceGroup --security-posture-reference-id /CommunityGalleries/{communityGalleryName}/securityPostures/{securityPostureName}/versions/{version} \
          --security-posture-reference-exclude-extensions "c:\tmp\exclude_extensions.json"
  optionalParameters:
  - name: --add
    defaultValue: "[]"
    summary: |-
      Add an object to a list of objects by specifying a path and key value pairs.  Example: `--add property.listProperty <key=value, string or JSON string>`.
  - name: --additional-events --additional-scheduled-events --scheduled-event-additional-publishing-target-event-grid-and-resource-graph
    parameterValueGroup: "false, true"
    summary: |-
      The configuration parameter used while creating event grid and resource graph scheduled event setting.
  - name: --automatic-repairs-action
    parameterValueGroup: "Reimage, Replace, Restart"
    summary: |-
      Type of repair action that will be used for repairing unhealthy virtual machines in the scale set.
  - name: --automatic-repairs-grace-period
    summary: |-
      The amount of time (in minutes, between 30 and 90) for which automatic repairs are suspended due to a state change on VM.
  - name: --capacity-reservation-group --crg
    summary: |-
      The ID or name of the capacity reservation group that is used to allocate. Pass in "None" to disassociate the capacity reservation group. Please note that if you want to delete a VM/VMSS that has been associated with capacity reservation group, you need to disassociate the capacity reservation group first.
    isPreview: true
  - name: --custom-data
    summary: |-
      Custom init script file or text (cloud-init, cloud-config, etc..).
  - name: --disk-controller-type
    parameterValueGroup: "NVMe, SCSI"
    summary: |-
      Specify the disk controller type configured for the VM or VMSS.
    isPreview: true
  - name: --enable-auto-os-upgrade
    parameterValueGroup: "false, true"
    summary: |-
      Indicate whether OS upgrades should automatically be applied to scale set instances in a rolling fashion when a newer version of the OS image becomes available.
  - name: --enable-automatic-repairs
    parameterValueGroup: "false, true"
    summary: |-
      Enable automatic repairs.
  - name: --enable-cross-zone-upgrade
    parameterValueGroup: "false, true"
    summary: |-
      Set this Boolean property will allow VMSS to ignore AZ boundaries when constructing upgrade batches, and only consider Update Domain and maxBatchInstancePercent to determine the batch size.
  - name: --enable-hibernation
    parameterValueGroup: "false, true"
    summary: |-
      The flag that enable or disable hibernation capability on the VMSS.
  - name: --enable-osimage-notification
    parameterValueGroup: "false, true"
    summary: |-
      Specify whether the OS Image Scheduled event is enabled or disabled.
  - name: --enable-proxy-agent
    parameterValueGroup: "false, true"
    summary: |-
      Specify whether proxy agent feature should be enabled on the virtual machine or virtual machine scale set.
  - name: --enable-reboot --enable-user-reboot-scheduled-events
    parameterValueGroup: "false, true"
    summary: |-
      The configuration parameter used while publishing scheduled events additional publishing targets.
  - name: --enable-redeploy --enable-user-redeploy-scheduled-events
    parameterValueGroup: "false, true"
    summary: |-
      The configuration parameter used while creating user initiated redeploy scheduled event setting creation.
  - name: --enable-resilient-creation
    parameterValueGroup: "false, true"
    summary: |-
      Automatically recover customers from OS Provisioning Timeout and VM Start Timeout errors experienced during a VM Create operation by deleting and recreating the affected VM.
  - name: --enable-resilient-deletion
    parameterValueGroup: "false, true"
    summary: |-
      Retry VM Delete requests asynchronously in the event of a failed delete operation.
  - name: --enable-secure-boot
    parameterValueGroup: "false, true"
    summary: |-
      Enable secure boot.
  - name: --enable-spot-restore
    parameterValueGroup: "false, true"
    summary: |-
      Enable the Spot-Try-Restore feature where evicted VMSS SPOT instances will be tried to be restored opportunistically based on capacity availability and pricing constraints.
  - name: --enable-terminate-notification
    parameterValueGroup: "false, true"
    summary: |-
      Enable terminate notification.
  - name: --enable-vtpm
    parameterValueGroup: "false, true"
    summary: |-
      Enable vTPM.
  - name: --ephemeral-option --ephemeral-os-disk-option
    parameterValueGroup: "Local"
    summary: |-
      Specify the ephemeral disk settings for operating system disk.
  - name: --ephemeral-os-disk
    parameterValueGroup: "false, true"
    summary: |-
      Allow you to specify the ephemeral disk settings for the operating system disk. Specify it to false to set ephemeral disk setting as empty and migrate it to non ephemeral.
  - name: --ephemeral-os-disk-placement --ephemeral-placement
    parameterValueGroup: "CacheDisk, NvmeDisk, ResourceDisk"
    summary: |-
      Only applicable when used with `--vm-sku`. Allows you to choose the Ephemeral OS disk provisioning location.
  - name: --exclude-extensions --security-posture-reference-exclude-extensions
    summary: |-
      List of virtual machine extensions to exclude when applying the Security Posture. Either a Json string or a file path is acceptable. Please refer to https://docs.microsoft.com/rest/api/compute/virtualmachinescalesets/get#virtualmachineextension for the data format.
  - name: --force-deletion
    summary: |-
      This property allow you to specify if virtual machines chosen for removal have to be force deleted when a virtual machine scale set is being scaled-in.
    isPreview: true
  - name: --force-string
    defaultValue: "False"
    summary: |-
      When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --instance-id
    summary: |-
      Update the VM instance with this ID. If missing, Update the VMSS.
  - name: --license-type
    parameterValueGroup: "None, RHEL_BASE, RHEL_BASESAPAPPS, RHEL_BASESAPHA, RHEL_BYOS, RHEL_ELS_6, RHEL_EUS, RHEL_SAPAPPS, RHEL_SAPHA, SLES, SLES_BYOS, SLES_HPC, SLES_SAP, SLES_STANDARD, UBUNTU, UBUNTU_PRO, Windows_Client, Windows_Server"
    summary: |-
      Specifies that the Windows image or disk was licensed on-premises. To enable Azure Hybrid Benefit for Windows Server, use 'Windows_Server'. To enable Multi-tenant Hosting Rights for Windows 10, use 'Windows_Client'. For more information see the Azure Windows VM online docs.
  - name: --max-batch-instance-percent
    summary: |-
      The maximum percent of total virtual machine instances that will be upgraded simultaneously by the rolling upgrade in one batch. Default: 20%.
  - name: --max-price
    summary: |-
      The maximum price (in US Dollars) you are willing to pay for a Spot VM/VMSS. -1 indicates that the Spot VM/VMSS should not be evicted for price reasons.
    isPreview: true
  - name: --max-surge
    parameterValueGroup: "false, true"
    summary: |-
      Specify it to create new virtual machines to upgrade the scale set, rather than updating the existing virtual machines.
    isPreview: true
  - name: --max-unhealthy-instance-percent
    summary: |-
      The maximum percentage of the total virtual machine instances in the scale set that can be simultaneously unhealthy. Default: 20%.
  - name: --max-unhealthy-upgraded-instance-percent
    summary: |-
      The maximum percentage of upgraded virtual machine instances that can be found to be in an unhealthy state. Default: 20%.
  - name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --pause-time-between-batches
    summary: |-
      The wait time between completing the update for all virtual machines in one batch and starting the next batch. Default: 0 seconds.
  - name: --ppg
    summary: |-
      The name or ID of the proximity placement group the VMSS should be associated with.
  - name: --prioritize-unhealthy-instances
    parameterValueGroup: "false, true"
    summary: |-
      Set this Boolean property will lead to all unhealthy instances in a scale set getting upgraded before any healthy instances.
  - name: --priority
    parameterValueGroup: "Low, Regular, Spot"
    summary: |-
      Priority. Use 'Spot' to run short-lived workloads in a cost-effective way. 'Low' enum will be deprecated in the future. Please use 'Spot' to deploy Azure spot VM and/or VMSS. Default to Regular.
  - name: --protect-from-scale-in
    parameterValueGroup: "false, true"
    summary: |-
      Protect the VM instance from scale-in operations.
  - name: --protect-from-scale-set-actions
    parameterValueGroup: "false, true"
    summary: |-
      Protect the VM instance from scale set actions (including scale-in).
  - name: --proxy-agent-mode
    parameterValueGroup: "Audit, Enforce"
    summary: |-
      Specify the mode that proxy agent will execute on if the feature is enabled.
  - name: --regular-priority-count
    summary: |-
      The base number of regular priority VMs that will be created in this scale set as it scales out. Must be greater than 0.
    isPreview: true
  - name: --regular-priority-percentage
    summary: |-
      The percentage of VM instances, after the base regular priority count has been reached, that are expected to use regular priority. Must be between 0 and 100.
    isPreview: true
  - name: --remove
    defaultValue: "[]"
    summary: |-
      Remove a property or an element from a list.  Example: `--remove property.list <indexToRemove>` OR `--remove propertyToRemove`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --scale-in-policy
    parameterValueGroup: "Default, NewestVM, OldestVM"
    summary: |-
      Specify the scale-in policy (space delimited) that decides which virtual machines are chosen for removal when a Virtual Machine Scale Set is scaled-in.
  - name: --security-posture-id --security-posture-reference-id
    summary: |-
      The security posture reference id in the form of /CommunityGalleries/{communityGalleryName}/securityPostures/{securityPostureName}/versions/{major.minor.patch}|{major.*}|latest.
  - name: --security-type
    parameterValueGroup: "Standard, TrustedLaunch"
    summary: |-
      Specify the security type of the virtual machine scale set.
  - name: --set
    defaultValue: "[]"
    summary: |-
      Update an object by specifying a property path and value to set.  Example: `--set property1.property2=<value>`.
  - name: --sku-allocat-strat --skuprofile-allocation-strategy
    parameterValueGroup: "CapacityOptimized, LowestPrice"
    summary: |-
      Allocation strategy for vm sizes in SKU profile.
  - name: --skuprofile-vmsizes
    summary: |-
      A list of VM sizes in the scale set. See https://azure.microsoft.com/pricing/details/virtual-machines/ for size info.
  - name: --spot-restore-timeout
    summary: |-
      Timeout value expressed as an ISO 8601 time duration after which the platform will not try to restore the VMSS SPOT instances.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --terminate-notification-time
    summary: |-
      Length of time (in minutes, between 5 and 15) a notification to be sent to the VM on the instance metadata server till the VM gets deleted.
  - name: --ultra-ssd-enabled
    parameterValueGroup: "false, true"
    summary: |-
      Enables or disables the capability to have 1 or more managed data disks with UltraSSD_LRS storage account.
  - name: --upgrade-policy-mode
    parameterValueGroup: "Automatic, Manual, Rolling"
    summary: |-
      Specify the mode of an upgrade to virtual machines in the scale set.
  - name: --user-data
    summary: |-
      UserData for the virtual machines in the scale set. It can be passed in as file or string. If empty string is passed in, the existing value will be deleted.
  - name: --v-cpus-available
    summary: |-
      Specify the number of vCPUs available.
  - name: --v-cpus-per-core
    summary: |-
      Specify the ratio of vCPU to physical core. Setting this property to 1 also means that hyper-threading is disabled.
  - name: --vm-sku
    summary: |-
      The new size of the virtual machine instances in the scale set. Default to "Standard_DS1_v2". See https://azure.microsoft.com/pricing/details/virtual-machines/ for size info.
    isPreview: true
  - name: --zones -z
    summary: |-
      Space-separated list of availability zones into which to provision the resource.
- uid: az_vmss_update-domain-walk
  name: az vmss update-domain-walk
  summary: |-
    Manual platform update domain walk to update virtual machines in a service fabric virtual machine scale set.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss update-domain-walk --platform-update-domain
                               [--ids]
                               [--placement-group-id]
                               [--resource-group]
                               [--subscription]
                               [--vmss-name]
                               [--zone]
  examples:
  - summary: |-
      Force recovery service fabric platform update domain walk
    syntax: az vmss update-domain-walk -g rg --vmss-name vmss --platform-update-domain
  requiredParameters:
  - isRequired: true
    name: --platform-update-domain
    summary: |-
      The platform update domain for which a manual recovery walk is requested.
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --placement-group-id
    summary: |-
      The placement group id for which the manual recovery walk is requested.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --vmss-name
    summary: |-
      The name of the VM scale set.
  - name: --zone
    summary: |-
      The zone in which the manual recovery walk is requested for cross zone virtual machine scale set.
- uid: az_vmss_update-instances
  name: az vmss update-instances
  summary: |-
    Upgrade VMs within a VMSS.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss update-instances --instance-ids
                             --name
                             --resource-group
                             [--no-wait]
  examples:
  - summary: |-
      Upgrade VMs within a VMSS. (autogenerated)
    syntax: az vmss update-instances --instance-ids 1 --name MyScaleSet --resource-group MyResourceGroup
  requiredParameters:
  - isRequired: true
    name: --instance-ids
    summary: |-
      Space-separated list of IDs (ex: 1 2 3 ...) or * for all instances.
  - isRequired: true
    name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  optionalParameters:
  - name: --no-wait
    defaultValue: "False"
    summary: |-
      Do not wait for the long-running operation to finish.
- uid: az_vmss_wait
  name: az vmss wait
  summary: |-
    Place the CLI in a waiting state until a condition of a scale set is met.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vmss wait [--created]
                 [--custom]
                 [--deleted]
                 [--exists]
                 [--ids]
                 [--instance-id]
                 [--interval]
                 [--name]
                 [--resource-group]
                 [--subscription]
                 [--timeout]
                 [--updated]
  examples:
  - summary: |-
      Place the CLI in a waiting state until the VMSS has been updated.
    syntax: az vmss wait --updated --name MyScaleSet --resource-group MyResourceGroup
  - summary: |-
      Place the CLI in a waiting state until the VMSS instance has been updated.
    syntax: az vmss wait --updated --instance-id 1 --name MyScaleSet --resource-group MyResourceGroup
  - summary: |-
      Place the CLI in a waiting state until a condition of a scale set is met. (autogenerated)
    syntax: az vmss wait --created --name MyScaleSet --resource-group MyResourceGroup
  optionalParameters:
  - name: --created
    defaultValue: "False"
    summary: |-
      Wait until created with 'provisioningState' at 'Succeeded'.
  - name: --custom
    summary: |-
      Wait until the condition satisfies a custom JMESPath query. E.g. provisioningState!='InProgress', instanceView.statuses[?code=='PowerState/running'].
  - name: --deleted
    defaultValue: "False"
    summary: |-
      Wait until deleted.
  - name: --exists
    defaultValue: "False"
    summary: |-
      Wait until the resource exists.
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
  - name: --instance-id
    summary: |-
      Wait on the VM instance with this ID. If missing, Wait on the VMSS.
  - name: --interval
    defaultValue: "30"
    summary: |-
      Polling interval in seconds.
  - name: --name -n
    summary: |-
      Scale set name. You can configure the default using `az configure --defaults vmss=<name>`.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --timeout
    defaultValue: "3600"
    summary: |-
      Maximum wait in seconds.
  - name: --updated
    defaultValue: "False"
    summary: |-
      Wait until updated with provisioningState at 'Succeeded'.
commands:
- az_vmss_application
- az_vmss_application_list
- az_vmss_application_set
- az_vmss_create
- az_vmss_deallocate
- az_vmss_delete
- az_vmss_delete-instances
- az_vmss_diagnostics
- az_vmss_diagnostics_get-default-config
- az_vmss_diagnostics_set
- az_vmss_disk
- az_vmss_disk_attach
- az_vmss_disk_detach
- az_vmss_encryption
- az_vmss_encryption_disable
- az_vmss_encryption_enable
- az_vmss_encryption_show
- az_vmss_extension
- az_vmss_extension_delete
- az_vmss_extension_image
- az_vmss_extension_image_list
- az_vmss_extension_image_list-names
- az_vmss_extension_image_list-versions
- az_vmss_extension_image_show
- az_vmss_extension_list
- az_vmss_extension_set
- az_vmss_extension_show
- az_vmss_extension_upgrade
- az_vmss_get-instance-view
- az_vmss_get-os-upgrade-history
- az_vmss_identity
- az_vmss_identity_assign
- az_vmss_identity_remove
- az_vmss_identity_show
- az_vmss_list
- az_vmss_list-instance-connection-info
- az_vmss_list-instance-public-ips
- az_vmss_list-instances
- az_vmss_list-skus
- az_vmss_nic
- az_vmss_nic_list
- az_vmss_nic_list-vm-nics
- az_vmss_nic_show
- az_vmss_perform-maintenance
- az_vmss_reimage
- az_vmss_restart
- az_vmss_rolling-upgrade
- az_vmss_rolling-upgrade_cancel
- az_vmss_rolling-upgrade_get-latest
- az_vmss_rolling-upgrade_start
- az_vmss_run-command
- az_vmss_run-command_create
- az_vmss_run-command_delete
- az_vmss_run-command_invoke
- az_vmss_run-command_list
- az_vmss_run-command_show
- az_vmss_run-command_update
- az_vmss_scale
- az_vmss_set-orchestration-service-state
- az_vmss_show
- az_vmss_simulate-eviction
- az_vmss_start
- az_vmss_stop
- az_vmss_update
- az_vmss_update-domain-walk
- az_vmss_update-instances
- az_vmss_wait
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, none, table, tsv, yaml, yamlc"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  ms.date: 04/18/2024
  description: Manage groupings of virtual machines in an Azure Virtual Machine Scale Set (VMSS).
