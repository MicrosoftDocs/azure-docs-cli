### YamlMime:AzureCLIGroup
uid: az_ad_sp
name: az ad sp
summary: |-
  Manage Microsoft Entra service principals.
status: GA
sourceType: Core
directCommands:
- uid: az_ad_sp_create
  name: az ad sp create
  summary: |-
    Create a service principal.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: az ad sp create --id
  examples:
  - summary: |-
      Create a service principal. (autogenerated)
    syntax: az ad sp create --id 00000000-0000-0000-0000-000000000000
  requiredParameters:
  - isRequired: true
    name: --id
    summary: |-
      Identifier uri, application id, or object id of the associated application.
- uid: az_ad_sp_create-for-rbac
  name: az ad sp create-for-rbac
  summary: |-
    Create a service principal and configure its access to Azure resources.
  description: |-
    The output includes credentials that you must protect. Be sure that you do not include these credentials in your code or check the credentials into your source control. As an alternative, consider using [managed identities](https://aka.ms/azadsp-managed-identities) if available to avoid the need to use credentials.

    By default, this command does not assign any role to the service principal. You may use --role and --scopes to assign a specific role and narrow the scope to a resource or resource group. You may also use `az role assignment create` to create role assignments for this service principal later. See [steps to add a role assignment](https://aka.ms/azadsp-more) for more information.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: >-
    az ad sp create-for-rbac [--cert]
                             [--create-cert]
                             [--display-name]
                             [--json-auth {false, true}]
                             [--keyvault]
                             [--role]
                             [--scopes]
                             [--years]
  examples:
  - summary: |-
      Create without role assignment.
    syntax: az ad sp create-for-rbac
  - summary: |-
      Create using a custom display name.
    syntax: az ad sp create-for-rbac -n MyApp
  - summary: |-
      Create with a Contributor role assignments on specified scopes. To retrieve current subscription ID, run `az account show --query id --output tsv`.
    syntax: az ad sp create-for-rbac -n MyApp --role Contributor --scopes /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/resourceGroup1 /subscriptions/00000000-0000-0000-0000-000000000000/resourceGroups/resourceGroup2
  - summary: |-
      Create using a self-signed certificate.
    syntax: az ad sp create-for-rbac --create-cert
  - summary: |-
      Create using a self-signed certificate, and store it within KeyVault.
    syntax: az ad sp create-for-rbac --keyvault MyVault --cert CertName --create-cert
  - summary: |-
      Create using existing certificate in KeyVault.
    syntax: az ad sp create-for-rbac --keyvault MyVault --cert CertName
  optionalParameters:
  - name: --cert
    summary: |-
      Certificate to use for credentials. When used with `--keyvault,`, indicates the name of the cert to use or create. Otherwise, supply a PEM or DER formatted public certificate string. Use `@{path}` to load from a file. Do not include private key info.
  - name: --create-cert
    defaultValue: "False"
    summary: |-
      Create a self-signed certificate to use for the credential. Only the current OS user has read/write permission to this certificate. Use with `--keyvault` to create the certificate in Key Vault. Otherwise, a certificate will be created locally.
  - name: --display-name --name -n
    summary: |-
      Display name of the service principal. If not present, default to azure-cli-%Y-%m-%d-%H-%M-%S where the suffix is the time of creation.
  - name: --json-auth --sdk-auth
    parameterValueGroup: "false, true"
    summary: |-
      Output service principal credential along with cloud endpoints in JSON format.
    isDeprecated: true
    deprecateInfo: Option '--sdk-auth' has been deprecated and will be removed in a future release.
  - name: --keyvault
    summary: |-
      Name or ID of a KeyVault to use for creating or retrieving certificates.
  - name: --role
    summary: |-
      Role of the service principal.
  - name: --scopes
    summary: |-
      Space-separated list of scopes the service principal's role assignment applies to. e.g., subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup, /subscriptions/0b1f6471-1bf0-4dda-aec3-111122223333/resourceGroups/myGroup/providers/Microsoft.Compute/virtualMachines/myVM.
  - name: --years
    summary: |-
      Number of years for which the credentials will be valid. Default: 1 year.
- uid: az_ad_sp_delete
  name: az ad sp delete
  summary: |-
    Delete a service principal.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: az ad sp delete --id
  examples:
  - summary: |-
      Delete a service principal.
    syntax: az ad sp delete --id 00000000-0000-0000-0000-000000000000
  requiredParameters:
  - isRequired: true
    name: --id
    summary: |-
      Service principal name, or object id.
- uid: az_ad_sp_list
  name: az ad sp list
  summary: |-
    List service principals.
  description: |-
    For low latency, by default, only the first 100 will be returned unless you provide filter arguments or use "--all".
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: >-
    az ad sp list [--all]
                  [--display-name]
                  [--filter]
                  [--show-mine]
                  [--spn]
  optionalParameters:
  - name: --all
    summary: |-
      List all entities, expect long delay if under a big organization.
  - name: --display-name
    summary: |-
      Object's display name or its prefix.
  - name: --filter
    summary: |-
      OData filter, e.g. --filter "displayname eq 'test' and servicePrincipalType eq 'Application'".
  - name: --show-mine
    summary: |-
      List entities owned by the current user.
  - name: --spn
    summary: |-
      Service principal name.
- uid: az_ad_sp_show
  name: az ad sp show
  summary: |-
    Get the details of a service principal.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: az ad sp show --id
  examples:
  - summary: |-
      Get the details of a service principal with appId.
    syntax: az ad sp show --id 00000000-0000-0000-0000-000000000000
  - summary: |-
      Get the details of a service principal with id.
    syntax: az ad sp show --id 00000000-0000-0000-0000-000000000000
  - summary: |-
      Get the details of a service principal with identifier URI.
    syntax: az ad sp show --id api://myapp
  requiredParameters:
  - isRequired: true
    name: --id
    summary: |-
      Service principal name, or object id.
- uid: az_ad_sp_update
  name: az ad sp update
  summary: |-
    Update a service principal.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/role/_help.py
  syntax: >-
    az ad sp update --id
                    [--add]
                    [--force-string]
                    [--remove]
                    [--set]
  examples:
  - summary: |-
      update a service principal (autogenerated)
    syntax: az ad sp update --id 00000000-0000-0000-0000-000000000000 --set groupMembershipClaims=All
  requiredParameters:
  - isRequired: true
    name: --id
    summary: |-
      Service principal name, or object id.
  optionalParameters:
  - name: --add
    defaultValue: "[]"
    summary: |-
      Add an object to a list of objects by specifying a path and key value pairs.  Example: `--add property.listProperty <key=value, string or JSON string>`.
  - name: --force-string
    defaultValue: "False"
    summary: |-
      When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
  - name: --remove
    defaultValue: "[]"
    summary: |-
      Remove a property or an element from a list.  Example: `--remove property.list <indexToRemove>` OR `--remove propertyToRemove`.
  - name: --set
    defaultValue: "[]"
    summary: |-
      Update an object by specifying a property path and value to set.  Example: `--set property1.property2=<value>`.
commands:
- az_ad_sp_create
- az_ad_sp_create-for-rbac
- az_ad_sp_credential
- az_ad_sp_credential_delete
- az_ad_sp_credential_list
- az_ad_sp_credential_reset
- az_ad_sp_delete
- az_ad_sp_list
- az_ad_sp_owner
- az_ad_sp_owner_list
- az_ad_sp_show
- az_ad_sp_update
globalParameters:
- name: --debug
  summary: |-
    Increase logging verbosity to show all debug logs.
- name: --help -h
  summary: |-
    Show this help message and exit.
- name: --only-show-errors
  summary: |-
    Only show errors, suppressing warnings.
- name: --output -o
  defaultValue: "json"
  parameterValueGroup: "json, jsonc, none, table, tsv, yaml, yamlc"
  summary: |-
    Output format.
- name: --query
  summary: |-
    JMESPath query string. See <a href="http://jmespath.org/">http://jmespath.org/</a> for more information and examples.
- name: --subscription
  summary: |-
    Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
- name: --verbose
  summary: |-
    Increase logging verbosity. Use --debug for full debug logs.
metadata:
  ms.date: 07/25/2024
  description: Manage Microsoft Entra service principals.
