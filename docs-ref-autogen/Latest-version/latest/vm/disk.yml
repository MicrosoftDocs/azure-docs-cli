### YamlMime:AzureCLIGroup
uid: az_vm_disk
name: az vm disk
summary: |-
  Manage the managed data disks attached to a VM.
description: |-
  Azure Virtual Machines use disks as a place to store an operating system, applications, and data. All Azure virtual machines have at least two disks: An operating system disk, and a temporary disk. The operating system disk is created from an image, and both the operating system disk and the image are actually virtual hard disks (VHDs) stored in an Azure storage account. Virtual machines also can have one or more data disks, that are also stored as VHDs.

  Azure Managed and Unmanaged Data Disks have a maximum size of 4095 GB (with the exception of larger disks in preview). Azure Unmanaged Disks also have a maximum capacity of 4095 GB.

  For more information, see:
  - Azure Disks - https://learn.microsoft.com/azure/virtual-machines/managed-disks-overview.
  - Larger Managed Disks in Public Preview - https://azure.microsoft.com/blog/introducing-the-public-preview-of-larger-managed-disks-sizes/
  - Ultra SSD Managed Disks in Public Preview - https://learn.microsoft.com/azure/virtual-machines/disks-types.
status: GA
sourceType: Core
directCommands:
- uid: az_vm_disk_attach
  name: az vm disk attach
  summary: |-
    Attach a managed persistent disk to a VM.
  description: |-
    This allows for the preservation of data, even if the VM is reprovisioned due to maintenance or resizing.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm disk attach --vm-name
                      [--caching {None, ReadOnly, ReadWrite}]
                      [--disk-ids]
                      [--disks]
                      [--enable-write-accelerator]
                      [--lun]
                      [--name]
                      [--new]
                      [--new-names-of-rp --new-names-of-source-disk-restore-point]
                      [--new-names-of-source-snapshots-or-disks --new-names-of-sr]
                      [--resource-group]
                      [--size-gb]
                      [--sku {PremiumV2_LRS, Premium_LRS, Premium_ZRS, StandardSSD_LRS, StandardSSD_ZRS, Standard_LRS, UltraSSD_LRS}]
                      [--source-disk-restore-point --source-disk-rp]
                      [--source-resource --source-snapshots-or-disks]
                      [--subscription]
  examples:
  - summary: |-
      Attach a new default sized (1023 GB) managed data disk to a VM.
    syntax: az vm disk attach -g MyResourceGroup --vm-name MyVm --name disk_name --new
  - summary: |-
      Attach a managed persistent disk to a VM. (autogenerated)
    syntax: az vm disk attach --name $diskId --new --resource-group MyResourceGroup --size-gb 128 --sku Standard_LRS --vm-name MyVm
  - summary: |-
      Attach multiple managed disks to a VM.
    syntax: az vm disk attach --vm-name MyVm --resource-group MyResourceGroup --sku Standard_LRS --disks diskId1 diskId2 diskId3
  requiredParameters:
  - isRequired: true
    name: --vm-name
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  optionalParameters:
  - name: --caching
    acceptedValues: None, ReadOnly, ReadWrite
    summary: |-
      Disk caching policy.
  - name: --disk-ids
    summary: |-
      The disk IDs of the managed disk (space-delimited).
  - name: --disks
    summary: |-
      One or more names or IDs of the managed disk (space-delimited).
  - name: --enable-write-accelerator
    defaultValue: "False"
    summary: |-
      Enable write accelerator.
  - name: --lun
    summary: |-
      0-based logical unit number (LUN). Max value depends on the Virtual Machine size.
  - name: --name -n
    summary: |-
      The name or ID of the managed disk.
    groupName: Resource Id Arguments
  - name: --new
    defaultValue: "False"
    summary: |-
      Create a new disk.
  - name: --new-names-of-rp --new-names-of-source-disk-restore-point
    summary: |-
      The name of create new data disk from a disk restore point.
  - name: --new-names-of-source-snapshots-or-disks --new-names-of-sr
    summary: |-
      The name of create new data disk from a snapshot or another disk.
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    groupName: Resource Id Arguments
  - name: --size-gb -z
    summary: |-
      Size in GB. Max size: 4095 GB (certain preview disks can be larger).
  - name: --sku
    acceptedValues: PremiumV2_LRS, Premium_LRS, Premium_ZRS, StandardSSD_LRS, StandardSSD_ZRS, Standard_LRS, UltraSSD_LRS
    summary: |-
      Underlying storage SKU.
  - name: --source-disk-restore-point --source-disk-rp
    summary: |-
      Create a data disk from a disk restore point. Can use the ID of a disk restore point.
  - name: --source-resource --source-snapshots-or-disks
    summary: |-
      Create a data disk from a snapshot or another disk. Can use the ID of a disk or snapshot.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    groupName: Resource Id Arguments
  globalParameters:
  - name: --debug
    defaultValue: "False"
    summary: |-
      Increase logging verbosity to show all debug logs.
  - name: --help -h
    summary: |-
      Show this help message and exit.
  - name: --only-show-errors
    defaultValue: "False"
    summary: |-
      Only show errors, suppressing warnings.
  - name: --output -o
    defaultValue: json
    acceptedValues: json, jsonc, none, table, tsv, yaml, yamlc
    summary: |-
      Output format.
  - name: --query
    summary: |-
      JMESPath query string. See http://jmespath.org/ for more information and examples.
  - name: --verbose
    defaultValue: "False"
    summary: |-
      Increase logging verbosity. Use --debug for full debug logs.
- uid: az_vm_disk_detach
  name: az vm disk detach
  summary: |-
    Detach a managed disk from a VM.
  status: GA
  sourceType: Core
  editLink: https://github.com/Azure/azure-cli/blob/dev/src/azure-cli/azure/cli/command_modules/vm/_help.py
  syntax: >-
    az vm disk detach --resource-group
                      --vm-name
                      [--disk-ids]
                      [--force-detach]
                      [--name]
  examples:
  - summary: |-
      Detach a data disk from a VM.
    syntax: az vm disk detach -g MyResourceGroup --vm-name MyVm --name disk_name
  - summary: |-
      Force detach a data disk from a VM.
    syntax: az vm disk detach -g MyResourceGroup --vm-name MyVm --name disk_name --force-detach
  requiredParameters:
  - isRequired: true
    name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
  - isRequired: true
    name: --vm-name
    summary: |-
      The name of the Virtual Machine. You can configure the default using `az configure --defaults vm=<name>`.
  optionalParameters:
  - name: --disk-ids
    summary: |-
      The disk IDs of the managed disk (space-delimited).
  - name: --force-detach
    summary: |-
      Force detach managed data disks from a VM.
  - name: --name -n
    summary: |-
      The data disk name.
  globalParameters:
  - name: --debug
    defaultValue: "False"
    summary: |-
      Increase logging verbosity to show all debug logs.
  - name: --help -h
    summary: |-
      Show this help message and exit.
  - name: --only-show-errors
    defaultValue: "False"
    summary: |-
      Only show errors, suppressing warnings.
  - name: --output -o
    defaultValue: json
    acceptedValues: json, jsonc, none, table, tsv, yaml, yamlc
    summary: |-
      Output format.
  - name: --query
    summary: |-
      JMESPath query string. See http://jmespath.org/ for more information and examples.
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
  - name: --verbose
    defaultValue: "False"
    summary: |-
      Increase logging verbosity. Use --debug for full debug logs.
commands:
- az_vm_disk_attach
- az_vm_disk_detach
metadata:
  ms.date: 09/29/2025
  description: >-
    Azure Virtual Machines use disks as a place to store an operating system, applications, and data. All Azure virtual machines have at least two disks: An operating system disk, and a temporary disk. The operating system disk is created from an image, and both the operating system disk and the image are actually virtual hard disks (VHDs) stored in an Azure storage account. Virtual machines also can have one or more data disks, that are also stored as VHDs.


    Azure Managed and Unmanaged Data Disks have a maximum size of 4095 GB (with the exception of larger disks in preview). Azure Unmanaged Disks also have a maximum capacity of 4095 GB.


    For more information, see:

    - Azure Disks - https://learn.microsoft.com/azure/virtual-machines/managed-disks-overview.

    - Larger Managed Disks in Public Preview - https://azure.microsoft.com/blog/introducing-the-public-preview-of-larger-managed-disks-sizes/

    - Ultra SSD Managed Disks in Public Preview - https://learn.microsoft.com/azure/virtual-machines/disks-types.
