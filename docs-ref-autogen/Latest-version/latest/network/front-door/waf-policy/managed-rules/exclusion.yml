### YamlMime:AzureCLIGroup
uid: az_network_front-door_waf-policy_managed-rules_exclusion
name: az network front-door waf-policy managed-rules exclusion
extensionInformation: |-
  > [!NOTE]
  > This reference is part of the **front-door** extension for the Azure CLI (version 2.75.0 or higher). The extension will automatically install the first time you run an **az network front-door waf-policy managed-rules exclusion** command. [Learn more](https://learn.microsoft.com/cli/azure/azure-cli-extensions-overview) about extensions.
summary: |-
  View and alter exclusions on a managed rule set, rule group, or rule within a managed rule set.
description: |-
  Exclusions prevent the rule set, rule group, or rule from being applied to the content of the specified variable. Use 'az network front-door waf-policy managed-rule-definition list' to see the available rules.
status: GA
sourceType: Extension
directCommands:
- uid: az_network_front-door_waf-policy_managed-rules_exclusion_add
  name: az network front-door waf-policy managed-rules exclusion add
  summary: |-
    Update policy with specified rule set name within a resource group.
  status: GA
  sourceType: Extension
  syntax: >-
    az network front-door waf-policy managed-rules exclusion add --match-variable {QueryStringArgNames, RequestBodyJsonArgNames, RequestBodyPostArgNames, RequestCookieNames, RequestHeaderNames}
                                                                 --operator {Contains, EndsWith, Equals, EqualsAny, StartsWith}
                                                                 --type
                                                                 --value
                                                                 [--add]
                                                                 [--force-string {0, 1, f, false, n, no, t, true, y, yes}]
                                                                 [--ids]
                                                                 [--name --policy-name]
                                                                 [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                                                 [--remove]
                                                                 [--resource-group]
                                                                 [--rule-group-id]
                                                                 [--rule-id]
                                                                 [--set]
                                                                 [--subscription]
  examples:
  - summary: |-
      update log scrubbing
    syntax: >-
      az network front-door waf-policy update -g rg -n n1 --log-scrubbing "{scrubbing-rules:[{match-variable:QueryStringArgNames,selector-match-operator:EqualsAny}],state:Enabled}"

      az network front-door waf-policy update -g rg -n n1 --log-scrubbing scrubbing-rules[1]="{match-variable:RequestUri,selector-match-operator:Equals}"

      az network front-door waf-policy update -g rg -n n1 --log-scrubbing "{scrubbing-rules:[{match-variable:RequestBodyJsonArgNames,selector-match-operator:EqualsAny}],state:Enabled}" scrubbing-rules[1]="{match-variable:RequestUri,selector-match-operator:EqualsAny}"
  - summary: |-
      Update specific policy
    syntax: az network front-door waf-policy update --resource-group rg1 --policy-name Policy1 --location WestUs --enabled-state Enabled --mode Prevention --redirect-url http://www.bing.com --custom-block-response-status-code 429 --custom-block-response-body PGh0bWw+CjxoZWFkZXI+PHRpdGxlPkhlbGxvPC90aXRsZT48L2hlYWRlcj4KPGJvZHk+CkhlbGxvIHdvcmxkCjwvYm9keT4KPC9odG1sPg== --request-body-check Disabled --javascript-challenge-expiration-in-minutes 30 --captcha-expiration-in-minutes 30 --log-scrubbing "{state:Enabled,scrubbing-rules:[{match-variable:RequestIPAddress,selector-match-operator:EqualsAny,selector:null,state:Enabled}]}" --custom-rules "{rules:[{name:Rule1,priority:1,rule-type:RateLimitRule,rate-limit-threshold:1000,match-conditions:[{match-variable:RemoteAddr,operator:IPMatch,match-value:[192.168.1.0/24,10.0.0.0/24]}],action:Block},{name:Rule2,priority:2,rule-type:MatchRule,match-conditions:[{match-variable:RemoteAddr,operator:GeoMatch,match-value:[CH]},{match-variable:RequestHeader,operator:Contains,selector:UserAgent,match-value:[windows],transforms:[Lowercase]}],action:Block},{name:Rule3,priority:1,rule-type:RateLimitRule,rate-limit-threshold:1000,match-conditions:[{match-variable:RemoteAddr,operator:ServiceTagMatch,match-value:[AzureBackup,AzureBotService]}],action:CAPTCHA}]}" --managed-rules "{managed-rule-sets:[{rule-set-type:DefaultRuleSet,rule-set-version:1.0,rule-set-action:Block,exclusions:[{matchVariable:RequestHeaderNames,selectorMatchOperator:Equals,selector:User-Agent}],rule-group-overrides:[{rule-group-name:SQLI,exclusions:[{matchVariable:RequestCookieNames,selectorMatchOperator:StartsWith,selector:token}],rules:[{rule-id:942100,enabled-state:Enabled,action:Redirect,exclusions:[{matchVariable:QueryStringArgNames,selectorMatchOperator:Equals,selector:query}]},{rule-id:942110,enabled-state:Disabled}]}]},{rule-set-type:Microsoft_HTTPDDoSRuleSet,rule-set-version:1.0,rule-group-overrides:[{rule-group-name:ExcessiveRequests,rules:[{rule-id:500100,enabled-state:Enabled,action:Block,sensitivity:High}]}]}]}" --sku Premium_AzureFrontDoor
  requiredParameters:
  - isRequired: true
    name: --match-variable
    acceptedValues: QueryStringArgNames, RequestBodyJsonArgNames, RequestBodyPostArgNames, RequestCookieNames, RequestHeaderNames
    summary: |-
      The variable type to be excluded.
  - isRequired: true
    name: --operator
    acceptedValues: Contains, EndsWith, Equals, EqualsAny, StartsWith
    summary: |-
      Comparison operator to apply to the selector.
  - isRequired: true
    name: --type
    summary: |-
      The type of the managed rule set.
  - isRequired: true
    name: --value
    summary: |-
      Selector value for which elements in the collection this exclusion applies to.
  optionalParameters:
  - name: --add
    summary: |-
      Add an object to a list of objects by specifying a path and key value pairs.  Example: `--add property.listProperty <key=value, string or JSON string>`.
    groupName: Generic Update Arguments
  - name: --force-string
    acceptedValues: 0, 1, f, false, n, no, t, true, y, yes
    summary: |-
      When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
    groupName: Generic Update Arguments
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    groupName: Resource Id Arguments
  - name: --name --policy-name -n
    summary: |-
      The name of the Web Application Firewall Policy.
    groupName: Resource Id Arguments
  - name: --no-wait
    acceptedValues: 0, 1, f, false, n, no, t, true, y, yes
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --remove
    summary: |-
      Remove a property or an element from a list.  Example: `--remove property.list <indexToRemove>` OR `--remove propertyToRemove`.
    groupName: Generic Update Arguments
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    groupName: Resource Id Arguments
  - name: --rule-group-id
    summary: |-
      The managed rule group ID.
  - name: --rule-id
    summary: |-
      The managed rule ID.
  - name: --set
    summary: |-
      Update an object by specifying a property path and value to set.  Example: `--set property1.property2=<value>`.
    groupName: Generic Update Arguments
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    groupName: Resource Id Arguments
  globalParameters:
  - name: --debug
    defaultValue: "False"
    summary: |-
      Increase logging verbosity to show all debug logs.
  - name: --help -h
    summary: |-
      Show this help message and exit.
  - name: --only-show-errors
    defaultValue: "False"
    summary: |-
      Only show errors, suppressing warnings.
  - name: --output -o
    defaultValue: json
    acceptedValues: json, jsonc, none, table, tsv, yaml, yamlc
    summary: |-
      Output format.
  - name: --query
    summary: |-
      JMESPath query string. See http://jmespath.org/ for more information and examples.
  - name: --verbose
    defaultValue: "False"
    summary: |-
      Increase logging verbosity. Use --debug for full debug logs.
- uid: az_network_front-door_waf-policy_managed-rules_exclusion_list
  name: az network front-door waf-policy managed-rules exclusion list
  summary: |-
    Get protection policy with specified name within a resource group.
  status: GA
  sourceType: Extension
  syntax: >-
    az network front-door waf-policy managed-rules exclusion list [--ids]
                                                                  [--name --policy-name]
                                                                  [--resource-group]
                                                                  [--subscription]
  examples:
  - summary: |-
      Get Policy
    syntax: az network front-door waf-policy show --resource-group rg1 --policy-name Policy1
  optionalParameters:
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    groupName: Resource Id Arguments
  - name: --name --policy-name -n
    summary: |-
      The name of the Web Application Firewall Policy.
    groupName: Resource Id Arguments
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    groupName: Resource Id Arguments
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    groupName: Resource Id Arguments
  globalParameters:
  - name: --debug
    defaultValue: "False"
    summary: |-
      Increase logging verbosity to show all debug logs.
  - name: --help -h
    summary: |-
      Show this help message and exit.
  - name: --only-show-errors
    defaultValue: "False"
    summary: |-
      Only show errors, suppressing warnings.
  - name: --output -o
    defaultValue: json
    acceptedValues: json, jsonc, none, table, tsv, yaml, yamlc
    summary: |-
      Output format.
  - name: --query
    summary: |-
      JMESPath query string. See http://jmespath.org/ for more information and examples.
  - name: --verbose
    defaultValue: "False"
    summary: |-
      Increase logging verbosity. Use --debug for full debug logs.
- uid: az_network_front-door_waf-policy_managed-rules_exclusion_remove
  name: az network front-door waf-policy managed-rules exclusion remove
  summary: |-
    Update policy with specified rule set name within a resource group.
  status: GA
  sourceType: Extension
  syntax: >-
    az network front-door waf-policy managed-rules exclusion remove --match-variable {QueryStringArgNames, RequestBodyJsonArgNames, RequestBodyPostArgNames, RequestCookieNames, RequestHeaderNames}
                                                                    --operator {Contains, EndsWith, Equals, EqualsAny, StartsWith}
                                                                    --type
                                                                    --value
                                                                    [--add]
                                                                    [--force-string {0, 1, f, false, n, no, t, true, y, yes}]
                                                                    [--ids]
                                                                    [--name --policy-name]
                                                                    [--no-wait {0, 1, f, false, n, no, t, true, y, yes}]
                                                                    [--remove]
                                                                    [--resource-group]
                                                                    [--rule-group-id]
                                                                    [--rule-id]
                                                                    [--set]
                                                                    [--subscription]
  examples:
  - summary: |-
      update log scrubbing
    syntax: >-
      az network front-door waf-policy update -g rg -n n1 --log-scrubbing "{scrubbing-rules:[{match-variable:QueryStringArgNames,selector-match-operator:EqualsAny}],state:Enabled}"

      az network front-door waf-policy update -g rg -n n1 --log-scrubbing scrubbing-rules[1]="{match-variable:RequestUri,selector-match-operator:Equals}"

      az network front-door waf-policy update -g rg -n n1 --log-scrubbing "{scrubbing-rules:[{match-variable:RequestBodyJsonArgNames,selector-match-operator:EqualsAny}],state:Enabled}" scrubbing-rules[1]="{match-variable:RequestUri,selector-match-operator:EqualsAny}"
  - summary: |-
      Update specific policy
    syntax: az network front-door waf-policy update --resource-group rg1 --policy-name Policy1 --location WestUs --enabled-state Enabled --mode Prevention --redirect-url http://www.bing.com --custom-block-response-status-code 429 --custom-block-response-body PGh0bWw+CjxoZWFkZXI+PHRpdGxlPkhlbGxvPC90aXRsZT48L2hlYWRlcj4KPGJvZHk+CkhlbGxvIHdvcmxkCjwvYm9keT4KPC9odG1sPg== --request-body-check Disabled --javascript-challenge-expiration-in-minutes 30 --captcha-expiration-in-minutes 30 --log-scrubbing "{state:Enabled,scrubbing-rules:[{match-variable:RequestIPAddress,selector-match-operator:EqualsAny,selector:null,state:Enabled}]}" --custom-rules "{rules:[{name:Rule1,priority:1,rule-type:RateLimitRule,rate-limit-threshold:1000,match-conditions:[{match-variable:RemoteAddr,operator:IPMatch,match-value:[192.168.1.0/24,10.0.0.0/24]}],action:Block},{name:Rule2,priority:2,rule-type:MatchRule,match-conditions:[{match-variable:RemoteAddr,operator:GeoMatch,match-value:[CH]},{match-variable:RequestHeader,operator:Contains,selector:UserAgent,match-value:[windows],transforms:[Lowercase]}],action:Block},{name:Rule3,priority:1,rule-type:RateLimitRule,rate-limit-threshold:1000,match-conditions:[{match-variable:RemoteAddr,operator:ServiceTagMatch,match-value:[AzureBackup,AzureBotService]}],action:CAPTCHA}]}" --managed-rules "{managed-rule-sets:[{rule-set-type:DefaultRuleSet,rule-set-version:1.0,rule-set-action:Block,exclusions:[{matchVariable:RequestHeaderNames,selectorMatchOperator:Equals,selector:User-Agent}],rule-group-overrides:[{rule-group-name:SQLI,exclusions:[{matchVariable:RequestCookieNames,selectorMatchOperator:StartsWith,selector:token}],rules:[{rule-id:942100,enabled-state:Enabled,action:Redirect,exclusions:[{matchVariable:QueryStringArgNames,selectorMatchOperator:Equals,selector:query}]},{rule-id:942110,enabled-state:Disabled}]}]},{rule-set-type:Microsoft_HTTPDDoSRuleSet,rule-set-version:1.0,rule-group-overrides:[{rule-group-name:ExcessiveRequests,rules:[{rule-id:500100,enabled-state:Enabled,action:Block,sensitivity:High}]}]}]}" --sku Premium_AzureFrontDoor
  requiredParameters:
  - isRequired: true
    name: --match-variable
    acceptedValues: QueryStringArgNames, RequestBodyJsonArgNames, RequestBodyPostArgNames, RequestCookieNames, RequestHeaderNames
    summary: |-
      The variable type to be excluded.
  - isRequired: true
    name: --operator
    acceptedValues: Contains, EndsWith, Equals, EqualsAny, StartsWith
    summary: |-
      Comparison operator to apply to the selector.
  - isRequired: true
    name: --type
    summary: |-
      The type of the managed rule set.
  - isRequired: true
    name: --value
    summary: |-
      Selector value for which elements in the collection this exclusion applies to.
  optionalParameters:
  - name: --add
    summary: |-
      Add an object to a list of objects by specifying a path and key value pairs.  Example: `--add property.listProperty <key=value, string or JSON string>`.
    groupName: Generic Update Arguments
  - name: --force-string
    acceptedValues: 0, 1, f, false, n, no, t, true, y, yes
    summary: |-
      When using 'set' or 'add', preserve string literals instead of attempting to convert to JSON.
    groupName: Generic Update Arguments
  - name: --ids
    summary: |-
      One or more resource IDs (space-delimited). It should be a complete resource ID containing all information of 'Resource Id' arguments. You should provide either --ids or other 'Resource Id' arguments.
    groupName: Resource Id Arguments
  - name: --name --policy-name -n
    summary: |-
      The name of the Web Application Firewall Policy.
    groupName: Resource Id Arguments
  - name: --no-wait
    acceptedValues: 0, 1, f, false, n, no, t, true, y, yes
    summary: |-
      Do not wait for the long-running operation to finish.
  - name: --remove
    summary: |-
      Remove a property or an element from a list.  Example: `--remove property.list <indexToRemove>` OR `--remove propertyToRemove`.
    groupName: Generic Update Arguments
  - name: --resource-group -g
    summary: |-
      Name of resource group. You can configure the default group using `az configure --defaults group=<name>`.
    groupName: Resource Id Arguments
  - name: --rule-group-id
    summary: |-
      The managed rule group ID.
  - name: --rule-id
    summary: |-
      The managed rule ID.
  - name: --set
    summary: |-
      Update an object by specifying a property path and value to set.  Example: `--set property1.property2=<value>`.
    groupName: Generic Update Arguments
  - name: --subscription
    summary: |-
      Name or ID of subscription. You can configure the default subscription using `az account set -s NAME_OR_ID`.
    groupName: Resource Id Arguments
  globalParameters:
  - name: --debug
    defaultValue: "False"
    summary: |-
      Increase logging verbosity to show all debug logs.
  - name: --help -h
    summary: |-
      Show this help message and exit.
  - name: --only-show-errors
    defaultValue: "False"
    summary: |-
      Only show errors, suppressing warnings.
  - name: --output -o
    defaultValue: json
    acceptedValues: json, jsonc, none, table, tsv, yaml, yamlc
    summary: |-
      Output format.
  - name: --query
    summary: |-
      JMESPath query string. See http://jmespath.org/ for more information and examples.
  - name: --verbose
    defaultValue: "False"
    summary: |-
      Increase logging verbosity. Use --debug for full debug logs.
commands:
- az_network_front-door_waf-policy_managed-rules_exclusion_add
- az_network_front-door_waf-policy_managed-rules_exclusion_list
- az_network_front-door_waf-policy_managed-rules_exclusion_remove
metadata:
  description: Exclusions prevent the rule set, rule group, or rule from being applied to the content of the specified variable. Use 'az network front-door waf-policy managed-rule-definition list' to see the available rules.
